
<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml"  lang="en">

    <head>

        
        <meta charset="UTF-8" />

        
        <meta name="viewport" content="width=device-width, initial-scale=1"/>

                
        <title> 
             Oracle常见函数  
        </title>
        
        
            <link href="https://example.com/index.xml" rel="alternate" type="application/rss+xml" title="Kiss&#39;Em!" />
        

        
        <link rel="stylesheet" href="/css/style.css"/>

        
        
            <link rel='stylesheet' href='https://example.com/css/custom.css'>
        
        
    </head>

    <body>



<section class="section">
  <div class="container">
    <nav id="nav-main" class="nav">
      <div id="nav-name" class="nav-left">
        <a id="nav-anchor" class="nav-item" href="https://example.com">
          <h1 id="nav-heading" class="title is-4">Kiss&#39;Em!</h1>
        </a>
      </div>
      <div class="nav-right">
        
        
        <nav id="nav-items" class="nav-item level is-mobile">
          <a class="level-item" aria-label="about" href='/about'
           rel='noopener'>
            <span class="icon">
              <i class>

<svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12" y2="8"></line>
    
  </svg></i>
            </span>
          </a>
          <a class="level-item" aria-label="email" href='mailto:info@pavel-pi.de'
           target='_blank'  rel='noopener'>
            <span class="icon">
              <i class>

<svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
    <polyline points="22,6 12,13 2,6"/>
    
  </svg></i>
            </span>
          </a>
          <a class="level-item" aria-label="github" href='https://github.com/pavel-pi'
           target='_blank'  rel='noopener'>
            <span class="icon">
              <i class>

<svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
    
  </svg></i>
            </span>
          </a>
          <a class="level-item" aria-label="twitter" href='https://twitter.com/@_pavel_pi_'
           target='_blank'  rel='noopener'>
            <span class="icon">
              <i class>

<svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
    
  </svg></i>
            </span>
          </a>
          <a class="level-item" aria-label="rss" href='/index.xml'
           target='_blank'  rel='noopener'>
            <span class="icon">
              <i class>

<svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle>
    
  </svg></i>
            </span>
          </a></nav>
        
      
      </div>
    </nav>

    <nav class="nav">
      

      
    </nav>

  </div>
</section>

<section class="section">
    
    <div class="container">
    
        
            
<div class="subtitle tags is-6 is-pulled-right">
    
        
<a class="subtitle is-6" href="/tags/oracle/">#oracle</a>




    
</div>



<h2 class="subtitle is-6">
    
    
        November 27, 2017 | 22:03
    
</h2>



<h1 class="title">Oracle常见函数</h1>

<div class="content">

    
    <h2 id="oracle常见函数">Oracle常见函数</h2>
<h2 id="单行函数">单行函数</h2>
<h4 id="字符函数">字符函数</h4>
<ol>
<li>
<p>LOWER函数和UPPER函数：</p>
<p>作用：将字符串转换为大/小写的格式</p>
</li>
<li>
<p>length(char):</p>
<p>作用：返回字符串的长度</p>
</li>
<li>
<p>initcap函数：</p>
<p>作用：将字符串中每个单词转换为首字母大写，其余字符小写</p>
</li>
<li>
<p>ASCII函数和CHR函数</p>
<p>作用：字符和ascii码相互转换</p>
</li>
<li>
<p>substr(char,m,n):</p>
<p>作用：截取字符串的子串，n代表n个字符的意思，不是代表取到第n个</p>
</li>
<li>
<p>replace(char1, search_string, replace_string)</p>
<p>作用:替换函数</p>
</li>
<li>
<p>instr(c1,c2,i,j)：</p>
<p>作用：判断某字符或者字符串是否存在，存在返回出现位置的索引，否则返回小于1；在一个字符串中搜索指定的字符，返回发现指定的字符的位置；C1 被搜索的字符串，C2希望搜索的字符串，I 搜索的开始位置，默认为1，J 出现的位置，默认为1</p>
</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> instr(<span style="color:#e6db74">&#39;azhangsanbcd&#39;</span>, <span style="color:#e6db74">&#39;zhangsan&#39;</span>) <span style="color:#66d9ef">from</span> dual; <span style="color:#75715e">--返回2
</span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> instr(<span style="color:#e6db74">&#39;oracle traning&#39;</span>, <span style="color:#e6db74">&#39;ra&#39;</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>) instring <span style="color:#66d9ef">from</span> dual; <span style="color:#75715e">--返回2
</span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> instr(<span style="color:#e6db74">&#39;oracle traning&#39;</span>, <span style="color:#e6db74">&#39;ra&#39;</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>) instring <span style="color:#66d9ef">from</span> dual; <span style="color:#75715e">--返回9
</span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> instr(<span style="color:#e6db74">&#39;oracle traning&#39;</span>, <span style="color:#e6db74">&#39;ra&#39;</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">3</span>) instring <span style="color:#66d9ef">from</span> dual; <span style="color:#75715e">--返回0
</span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> instr(<span style="color:#e6db74">&#39;abc&#39;</span>,<span style="color:#e6db74">&#39;d&#39;</span>) <span style="color:#66d9ef">from</span> dual;  <span style="color:#75715e">--返回0
</span></code></pre></div><ol start="8">
<li>
<p>LPAD函数和RPAD函数：</p>
<p>作用：LPAD(x,width[,pad_string])，给x左边补充pad_string，直至width长度。</p>
</li>
<li>
<p>LTRIM函数、RTRIM函数和TRIM函数</p>
<p>格式：LTRIM(x,trim_string])</p>
<p>作用：从x左边截去trim_string,如果没有第二个参数则截去空格</p>
</li>
<li>
<p>substr函数</p>
</li>
</ol>
<p>格式：SUBSTR(x，start，length)</p>
<p>作用：从x中的start开始，截取length长度的子串，如未指明length，则一直截取到x的末尾</p>
<h4 id="空值处理函数">空值处理函数</h4>
<ol>
<li>
<p>NVL函数</p>
<p>格式：NVL(x,value)</p>
<p>作用：如果X为null，则返回value，否则返回x</p>
</li>
<li>
<p>NVL2函数</p>
<p>格式：NVL2(x,value1,value2)</p>
<p>作用：如果x不为NULL，则返回value1，否则返回value2</p>
</li>
</ol>
<h3 id="数值函数">数值函数</h3>
<p>数学函数的输入参数和返回值的数据类型都是数据类型的</p>
<ol>
<li>
<p>round(n,[m]) 该函数用于执行四舍五入</p>
<p>如果省掉m，则四舍五入到整数</p>
<p>如果m是正数，则四舍五入到小数点的m位后</p>
<p>如果m是负数，则四舍五入到小数点的m位后</p>
<p>示例</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">SELECT</span> round(<span style="color:#ae81ff">23</span>.<span style="color:#ae81ff">75123</span>) <span style="color:#66d9ef">FROM</span> dual; <span style="color:#75715e">--返回24
</span><span style="color:#75715e"></span><span style="color:#66d9ef">SELECT</span> round(<span style="color:#ae81ff">23</span>.<span style="color:#ae81ff">75123</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) <span style="color:#66d9ef">FROM</span> dual; <span style="color:#75715e">--返回20
</span><span style="color:#75715e"></span><span style="color:#66d9ef">SELECT</span> round(<span style="color:#ae81ff">27</span>.<span style="color:#ae81ff">75123</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) <span style="color:#66d9ef">FROM</span> dual; <span style="color:#75715e">--返回30
</span><span style="color:#75715e"></span><span style="color:#66d9ef">SELECT</span> round(<span style="color:#ae81ff">23</span>.<span style="color:#ae81ff">75123</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">3</span>) <span style="color:#66d9ef">FROM</span> dual; <span style="color:#75715e">--返回0
</span><span style="color:#75715e"></span><span style="color:#66d9ef">SELECT</span> round(<span style="color:#ae81ff">23</span>.<span style="color:#ae81ff">75123</span>, <span style="color:#ae81ff">1</span>) <span style="color:#66d9ef">FROM</span> dual; <span style="color:#75715e">--返回23.8
</span><span style="color:#75715e"></span><span style="color:#66d9ef">SELECT</span> round(<span style="color:#ae81ff">23</span>.<span style="color:#ae81ff">75123</span>, <span style="color:#ae81ff">2</span>) <span style="color:#66d9ef">FROM</span> dual; <span style="color:#75715e">--返回23.75
</span><span style="color:#75715e"></span><span style="color:#66d9ef">SELECT</span> round(<span style="color:#ae81ff">23</span>.<span style="color:#ae81ff">75123</span>, <span style="color:#ae81ff">3</span>) <span style="color:#66d9ef">FROM</span> dual; <span style="color:#75715e">--返回23.751
</span></code></pre></div></li>
<li>
<p>trunc(n,[m])该函数用于截取数字</p>
<p>如果省掉m，就截去小数部分，
如果m是正数就截取到小数点的m位后，
如果m是负数，则截取到小数点的前m位</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">SELECT</span> trunc(<span style="color:#ae81ff">23</span>.<span style="color:#ae81ff">75123</span>) <span style="color:#66d9ef">FROM</span> dual; <span style="color:#75715e">--返回23
</span><span style="color:#75715e"></span><span style="color:#66d9ef">SELECT</span> trunc(<span style="color:#ae81ff">23</span>.<span style="color:#ae81ff">75123</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) <span style="color:#66d9ef">FROM</span> dual; <span style="color:#75715e">--返回20
</span><span style="color:#75715e"></span><span style="color:#66d9ef">SELECT</span> trunc(<span style="color:#ae81ff">27</span>.<span style="color:#ae81ff">75123</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) <span style="color:#66d9ef">FROM</span> dual; <span style="color:#75715e">--返回20
</span><span style="color:#75715e"></span><span style="color:#66d9ef">SELECT</span> trunc(<span style="color:#ae81ff">23</span>.<span style="color:#ae81ff">75123</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">3</span>) <span style="color:#66d9ef">FROM</span> dual; <span style="color:#75715e">--返回0
</span><span style="color:#75715e"></span><span style="color:#66d9ef">SELECT</span> trunc(<span style="color:#ae81ff">23</span>.<span style="color:#ae81ff">75123</span>, <span style="color:#ae81ff">1</span>) <span style="color:#66d9ef">FROM</span> dual; <span style="color:#75715e">--返回23.7
</span><span style="color:#75715e"></span><span style="color:#66d9ef">SELECT</span> trunc(<span style="color:#ae81ff">23</span>.<span style="color:#ae81ff">75123</span>, <span style="color:#ae81ff">2</span>) <span style="color:#66d9ef">FROM</span> dual; <span style="color:#75715e">--返回23.75
</span><span style="color:#75715e"></span><span style="color:#66d9ef">SELECT</span> trunc(<span style="color:#ae81ff">23</span>.<span style="color:#ae81ff">75123</span>, <span style="color:#ae81ff">3</span>) <span style="color:#66d9ef">FROM</span> dual; <span style="color:#75715e">--返回23.751
</span></code></pre></div></li>
<li>
<p>mod(m,n)取余函数</p>
</li>
<li>
<p>floor(n) 返回小于或是等于n的最大整数</p>
</li>
<li>
<p>celi(n) 返回大于或是等于n的最小整数</p>
</li>
<li>
<p>abs(n) 返回数字的绝对值</p>
</li>
<li>
<p>power(x,y) 计算x的y次幂</p>
</li>
<li>
<p>sqrt() 计算平方根</p>
</li>
</ol>
<h4 id="数值和字符串转换函数">数值和字符串转换函数</h4>
<p>转换函数用于将数据类型从一种转为另外一种</p>
<ol>
<li>
<p>to_char()函数</p>
<p>格式：TO_CHAR(x [,format])；</p>
<p>作用：将数值x转化为字符串，format指明转换后的格式</p>
<p>format中可以使用的转换符：9&ndash;代表一位数字；0&ndash;代表该位置补零；D&ndash;代表小数点符号位置，和.等效；S&ndash;代表返回正负号；如果实际整数位数超过格式字符串中的位数，则返回由#组成的字符串。</p>
<p>示例：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> TO_CHAR(<span style="color:#ae81ff">23456</span>.<span style="color:#ae81ff">78954</span>,<span style="color:#960050;background-color:#1e0010">‘</span>S099999.<span style="color:#ae81ff">99</span><span style="color:#e6db74">&#39;)from dual;
</span></code></pre></div></li>
<li>
<p>TO_NUMBER()函数</p>
<p>格式： TO_NUMBER(x[,format])</p>
<p>作用：将字符串x转换为数值</p>
<p>format说明了字符串的格式。</p>
</li>
<li>
<p>CAST函数</p>
<p>格式：CAST(x AS type)</p>
<p>作用：将x转换为type所指定的数据类型</p>
</li>
</ol>
<h2 id="日期函数">日期函数</h2>
<ol>
<li>
<p>sysdate 返回系统时间</p>
</li>
<li>
<p>add_months函数</p>
<p>oracle add_months(time,months)函数可以得到某一时间之前或之后n个月的时间</p>
</li>
<li>
<p>last_day(d):返回指定日期所在月份的最后一天</p>
</li>
<li>
<p>MONTHS_BETWEEN(x,y) 返回日期x减去日期y后的月份差。</p>
</li>
<li>
<p>NEXT_DAY(x,day) day&ndash;是一个表示星期几的字符串(和nls_date_language有关，如’saturday’ ,’星期六’) 该函数返回从日期x开始，到达下个指定的星期几的日期</p>
</li>
</ol>
<h4 id="日期值和字符串转换函数">日期值和字符串转换函数</h4>
<ol>
<li>使用TO_CHAR(x[,format])将日期值转换为字符串,format字符串用来说明转换后的字符串的格式，如果没有该参数，则使用当前会话中的日期语言和日期格式进行转换。</li>
<li>使用TO_DATE(x[,format])函数将字符串转换为日期值,x&ndash;一个日期字符串,format&ndash;用来说明字符串中的日期格式。</li>
</ol>
<h2 id="聚合函数">聚合函数</h2>
<p>聚合函数可以同时对一组进行操作，并返回操作结果，可以配合使用DISTINCT在计算时取消重复值。</p>
<ol>
<li>AVG:返回平均值</li>
<li>COUNT：返回行数</li>
<li>MAX：返回最大值</li>
<li>MIN：返回最小值</li>
<li>SUM：返回和</li>
</ol>
<p>COUNT,MIN,MAX可应用于数值、字符串和日期数据。AVG和SUM仅能用于数值。</p>
<p>除了count(*),其它聚合函数都会忽略空值。</p>
<h2 id="分组聚合">分组聚合</h2>
<p>可以使用GROUP BY子句把不同行的数据分成组；如果未对查询结果进行分组，聚合函数将作用与整个查询结果；对查询结果分组后，聚合函数将分别作用于每个组</p>
<p>格式：GROUP BY 字段列表 HAVING &lt;条件表达式&gt;</p>
<p>GROUP BY 对查询结果按字段列表进行分组，字段值相等的记录分为一组，定用于分组的字段列表可以是一列，也可以是多个列，彼此间用逗号分隔；HAVING短语对分组的结果进行过滤，仅输出满足条件的组</p>
<p>示例：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#f92672">#</span><span style="color:#960050;background-color:#1e0010">查询各个课程号及相应的选课人数</span>
<span style="color:#66d9ef">SELECT</span> courseNo, <span style="color:#66d9ef">COUNT</span>(studentNo) <span style="color:#66d9ef">FROM</span> tb_score <span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> courseNo;
<span style="color:#f92672">#</span><span style="color:#960050;background-color:#1e0010">查询每个学生的选课门数、平均分和最高分</span>
<span style="color:#66d9ef">SELECT</span> studentNo, <span style="color:#66d9ef">COUNT</span>(<span style="color:#f92672">*</span>) <span style="color:#960050;background-color:#1e0010">选课门数</span>, <span style="color:#66d9ef">AVG</span>(score) <span style="color:#960050;background-color:#1e0010">平均分</span>, <span style="color:#66d9ef">MAX</span>(score) <span style="color:#960050;background-color:#1e0010">最高分</span> <span style="color:#66d9ef">FROM</span> tb_score <span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> studentNo;
<span style="color:#f92672">#</span><span style="color:#960050;background-color:#1e0010">查询学生选课的平均成绩，只取大于</span><span style="color:#ae81ff">80</span><span style="color:#960050;background-color:#1e0010">分的才输出</span>
<span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">AVG</span>(score) <span style="color:#960050;background-color:#1e0010">平均分</span> <span style="color:#66d9ef">FROM</span> tb_score <span style="color:#66d9ef">HAVING</span> <span style="color:#66d9ef">AVG</span>(score)<span style="color:#f92672">&gt;=</span><span style="color:#ae81ff">88</span>;
</code></pre></div>

    
    
        <div class="related">


<h3>Similar articles</h3>

<ul>
	
	<li><a href="/note/database/oracle/oracle%E7%94%A8%E6%88%B7%E8%A7%92%E8%89%B2%E6%9D%83%E9%99%90/">Oracle用户角色权限</a></li>
	
</ul>


</div>
    

</div>


        

    </div>

</section>



<section class="section">
  <div class="container has-text-centered">
    <p>© <a href="https://github.com/pavel-pi">Pavel Pi</a> 2020</p>
    
      <p>Powered by <a href="https://gohugo.io/">Hugo</a> &amp; <a href="https://github.com/pavel-pi/kiss-em">Kiss'Em</a>.</p>
    
  </div>
</section>

</body>
</html>

