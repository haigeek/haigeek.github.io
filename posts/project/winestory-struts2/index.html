<!DOCTYPE html>
<html lang="en-us">
  <head>
    <title>winestoryä¸­struts2çš„ä½¿ç”¨ | haigeek-blog</title>

    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">    
<meta name="viewport" content="width=device-width,minimum-scale=1">
<meta name="description" content="æˆ‘æ˜¯è° ğŸ”— çˆ±æŠ˜è…¾ï¼Œä¼ªæ–‡é’ï¼Œæ–¯äººå·²å»ï¼Œå‹¿å¿µï¼Œç°åœ¨å­¦ä¹ ç¼–ç¨‹ã€‚(2016-2018ï¼‰ haigeekæ˜¯æˆ‘åœ¨ç½‘ç»œä¸Šå¸¸ç”¨çš„æ˜µç§°ï¼Œå› ä¸ºä»–çš„è°éŸ³å’Œæˆ‘ä»¬çœŸå®åå­—">
<meta name="generator" content="Hugo 0.76.5" />


  <META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">


<link rel="stylesheet" href="/css/style.css">
<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />





<script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?2917929c3741b51731d979e597a2be52";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
</script>



  </head>

  <body>
    <nav class="navigation">
	
		<a href="/"> <span class="arrow">â†</span>Home</a>
	
	<a href="/posts">Archive</a>
	<a href="/tags">Tags</a>
	<a href="/about">About</a>

	
		<a href="https://wiki.haigeek.me">WIKI</a>
	

	
	  <a href="https://haigeek.me/index.xml">RSS</a>
	
</nav>


    <main class="main">
      

<section id="single">
    <h1 class="title">winestoryä¸­struts2çš„ä½¿ç”¨</h1>

    <div class="tip">
        <span>
          Jul 22, 2017 20:27
        </span>
        <span class="split">
          Â·
        </span>
        <span>
          
            6804 words
          
        </span>
        <span class="split">
          Â·
        </span>
        <span>
          14 minute read
        </span>
    </div>

    <div class="content">
      <p>ä½¿ç”¨sshæ¡†æ¶åšçš„ä¸€ä¸ªå°è®ºå›æ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ªé¡¹ç›®ï¼Œsshæ¡†æ¶åœ¨ç°åœ¨æ—©å·²ç»è¿‡æ—¶ï¼Œä½†æ˜¯å½“åˆå­¦ä¹ å’Œè§£å†³é—®é¢˜çš„ç²¾ç¥å´æ˜¯æœ€é‡è¦çš„ï¼Œå› æ­¤æˆ‘å°†ç›¸å…³çš„åšæ–‡è¿›è¡Œå½’æ¡£ï¼Œè®°å½•å¹¶ç¼…æ€€åˆå­¦ç¼–ç¨‹æ—¶çš„å†ç¨‹ã€‚è¿™ä¸€ç¯‡æ˜¯struts2æ¡†æ¶ç›¸å…³å†…å®¹ã€‚</p>
<h1 id="winestoryä¸­struts2çš„ä½¿ç”¨">winestoryä¸­struts2çš„ä½¿ç”¨ <a href="#winestory%e4%b8%adstruts2%e7%9a%84%e4%bd%bf%e7%94%a8" class="anchor">ğŸ”—</a></h1><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1 id="ä»€ä¹ˆæ˜¯struts">ä»€ä¹ˆæ˜¯Struts <a href="#%e4%bb%80%e4%b9%88%e6%98%afstruts" class="anchor">ğŸ”—</a></h1><p>Strutsç›´è¯‘è¿‡æ¥å°±æ˜¯æ”¯æŸ±ï¼Œæå¹²çš„æ„æ€ï¼Œå®ƒå®ç°äº†åŸºäºjavawebåº”ç”¨çš„Model-Viewâ€”â€”Controllerè®¾è®¡æ¨¡å¼çš„åº”ç”¨æ¡†æ¶</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="strutsçš„ä½“ç³»ç»“æ„">Strutsçš„ä½“ç³»ç»“æ„ <a href="#struts%e7%9a%84%e4%bd%93%e7%b3%bb%e7%bb%93%e6%9e%84" class="anchor">ğŸ”—</a></h2><p>ä¸€ä¸ªè¯·æ±‚åœ¨Struts2æ¡†æ¶ä¸­çš„å¤„ç†å¤§æ¦‚ä¼šç»è¿‡ä»¥ä¸‹ç»“æ„æ­¥éª¤</p>
<ol>
<li>å®¢æˆ·ç«¯å‘å‡ºä¸€ä¸ªæŒ‡å‘Servletå®¹å™¨ï¼ˆä¾‹å¦‚Tomcatï¼‰çš„è¯·æ±‚</li>
<li>è¿™ä¸ªè¯·æ±‚ä¼šç»è¿‡ç»“æ„è¿‡æ»¤å™¨Filter(ActionContextCleanUPå¯é€‰è¿‡æ»¤å™¨ï¼Œå…¶ä»–webè¿‡æ»¤å™¨å¦‚SiteMeshç­‰)ï¼Œæœ€ååˆ°è¾¾FilterDispatcherè¿‡æ»¤å™¨</li>
<li>æ¥ç€FilterDispatcherï¼ˆè¿‡æ»¤è°ƒåº¦å™¨ï¼‰è¿‡æ»¤å™¨è¢«è°ƒç”¨ï¼ŒFilterDispatcherè¯¢é—®ActionMapperæ¥å†³å®šè¿™ä¸ªè¯·æ˜¯å¦éœ€è¦è°ƒç”¨æŸä¸ªAction</li>
<li>å¦‚æœActionMapperå†³å®šéœ€è¦è°ƒç”¨æŸä¸ªActionï¼ŒFilterDispatcheræŠŠè¯·æ±‚çš„å¤„ç†äº¤ç»™Actionå¯¹è±¡çš„ä»£ç†ï¼ˆActionProxyï¼‰</li>
<li>ActionProxyé€šè¿‡é…ç½®ç®¡ç†å™¨ï¼ˆConfiguration Managerï¼‰è¯»å–æ¡†æ¶çš„ç›¸å…³çš„é…ç½®æ–‡ä»¶ï¼ˆStruts.xmlä»¥åŠå®ƒåŒ…å«çš„*.xmlé…ç½®æ–‡ä»¶ï¼‰æ‰¾åˆ°éœ€è¦è°ƒç”¨çš„Actionç±»</li>
<li>æ‰¾åˆ°éœ€è¦è°ƒç”¨çš„Actionç±»ä¹‹åï¼ŒActionProxyä¼šåˆ›å»ºä¸€ä¸ªActionInvocationï¼ˆåŠ¨ä½œè°ƒç”¨)çš„å®ä¾‹</li>
<li>ActionInvocationåœ¨è°ƒç”¨Actionçš„è¿‡ç¨‹ä¹‹å‰ï¼Œä¼šå…ˆä¾æ¬¡è°ƒç”¨ç›¸å…³é…ç½®æ‹¦æˆªå™¨ï¼ˆIntercepterï¼‰æ‰§è¡Œç»“æœè¿”å›ç»“æœå­—ç¬¦ä¸²</li>
<li>ActionInvocationè´Ÿè´£æŸ¥æ‰¾ç»“æœå­—ç¬¦ä¸²å¯¹åº”çš„Resultã€‚ç„¶åå†æ‰§è¡Œè¿™ä¸ªResultï¼Œå†è¿”å›å¯¹åº”çš„ç»“æœè§†å›¾ï¼ˆå¦‚JSPï¼‰æ¥å‘ˆç°ç•Œé¢</li>
<li>å†æ¬¡è°ƒç”¨æ‰€ç”¨çš„é…ç½®æ‹¦æˆªå™¨ï¼ˆè°ƒç”¨é¡ºåºä¸ç¬¬7æ­¥ç›¸åï¼‰ï¼Œç„¶åå“åº”ï¼ˆHttpServletResponse)è¢«è¿”å›ç»™æµè§ˆå™¨</li>
</ol>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="struts2çš„ä¼˜ç‚¹">Struts2çš„ä¼˜ç‚¹ <a href="#struts2%e7%9a%84%e4%bc%98%e7%82%b9" class="anchor">ğŸ”—</a></h2><ul>
<li>Struts2æ˜¯éä¾µå…¥å¼è®¾è®¡ï¼Œå³ä¸ä¾èµ–ä¸Servlet APIå’ŒStrutsAPI</li>
<li>Strtus2æä¾›äº†å¼ºå¤§çš„æ‹¦æˆªå™¨ï¼Œåˆ©ç”¨æ‹¦æˆªå™¨å¯è¿›è¡ŒAOPç¼–ç¨‹ï¼ˆé¢å‘åˆ‡é¢çš„ç¼–ç¨‹ï¼‰ï¼Œå®ç°æƒé™çš„æ‹¦æˆªç­‰åŠŸèƒ½</li>
<li>Strtus2æä¾›äº†ç±»å‹è½¬æ¢å™¨ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°è¿›è¡Œç±»å‹è½¬æ¢ï¼Œä¾‹å¦‚å°†ç‰¹æ®Šçš„çš„è¯·æ±‚å‚æ•°è½¬æ¢æˆéœ€è¦çš„ç±»å‹</li>
<li>Struts2æ”¯æŒå¤šç§è¡¨ç°å±‚æŠ€æœ¯ï¼Œå¦‚JSPã€FreeMarkerã€Vectocity</li>
<li>Struts2çš„è¾“å…¥éªŒè¯å¯ä»¥å¯¹æŒ‡å®šçš„æ–¹æ³•è¿›è¡ŒéªŒè¯<!-- raw HTML omitted -->ç¬”è®°æ¥æºï¼š<a 
    href="https://www.shiyanlou.com/"
    
    
     
      target="_blank" 
      rel="noopener"
    
>
    å®éªŒæ¥¼
</a></li>
</ul>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1 id="struts2æ ¸å¿ƒé…ç½®æ–‡ä»¶strutsxmlè¯¦è§£">struts2æ ¸å¿ƒé…ç½®æ–‡ä»¶struts.xmlè¯¦è§£ <a href="#struts2%e6%a0%b8%e5%bf%83%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6strutsxml%e8%af%a6%e8%a7%a3" class="anchor">ğŸ”—</a></h1><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="strutsxmlæ–‡ä»¶ç¤ºä¾‹">struts.xmlæ–‡ä»¶ç¤ºä¾‹ <a href="#strutsxml%e6%96%87%e4%bb%b6%e7%a4%ba%e4%be%8b" class="anchor">ğŸ”—</a></h2><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#080">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
<span style="color:#080">&lt;!DOCTYPE struts PUBLIC
</span><span style="color:#080">    &#34;-//Apache Software Foundation//DTD Struts Configuration 2.3//EN&#34;
</span><span style="color:#080">    &#34;http://struts.apache.org/dtds/struts-2.3.dtd&#34;&gt;</span>
<span style="color:#008000;font-weight:bold">&lt;struts&gt;</span>
    <span style="color:#008000;font-weight:bold">&lt;constant</span> <span style="color:#b44">name=</span><span style="color:#b44">&#34;struts.enable.DynamicMethodInvocation&#34;</span> <span style="color:#b44">value=</span><span style="color:#b44">&#34;false&#34;</span> <span style="color:#008000;font-weight:bold">/&gt;</span>
    <span style="color:#008000;font-weight:bold">&lt;constant</span> <span style="color:#b44">name=</span><span style="color:#b44">&#34;struts.devMode&#34;</span> <span style="color:#b44">value=</span><span style="color:#b44">&#34;true&#34;</span> <span style="color:#008000;font-weight:bold">/&gt;</span>
    <span style="color:#008000;font-weight:bold">&lt;package</span> <span style="color:#b44">name=</span><span style="color:#b44">&#34;default&#34;</span> <span style="color:#b44">namespace=</span><span style="color:#b44">&#34;/&#34;</span> <span style="color:#b44">extends=</span><span style="color:#b44">&#34;struts-default&#34;</span><span style="color:#008000;font-weight:bold">&gt;</span>
        <span style="color:#008000;font-weight:bold">&lt;default-action-ref</span> <span style="color:#b44">name=</span><span style="color:#b44">&#34;index&#34;</span> <span style="color:#008000;font-weight:bold">/&gt;</span>
        <span style="color:#008000;font-weight:bold">&lt;global-results&gt;</span>
            <span style="color:#008000;font-weight:bold">&lt;result</span> <span style="color:#b44">name=</span><span style="color:#b44">&#34;error&#34;</span><span style="color:#008000;font-weight:bold">&gt;</span>/WEB-INF/jsp/error.jsp<span style="color:#008000;font-weight:bold">&lt;/result&gt;</span>
        <span style="color:#008000;font-weight:bold">&lt;/global-results&gt;</span>
        <span style="color:#008000;font-weight:bold">&lt;global-exception-mappings&gt;</span>
            <span style="color:#008000;font-weight:bold">&lt;exception-mapping</span> <span style="color:#b44">exception=</span><span style="color:#b44">&#34;java.lang.Exception&#34;</span> <span style="color:#b44">result=</span><span style="color:#b44">&#34;error&#34;</span><span style="color:#008000;font-weight:bold">/&gt;</span>
        <span style="color:#008000;font-weight:bold">&lt;/global-exception-mappings&gt;</span>
        <span style="color:#008000;font-weight:bold">&lt;action</span> <span style="color:#b44">name=</span><span style="color:#b44">&#34;index&#34;</span><span style="color:#008000;font-weight:bold">&gt;</span>
            <span style="color:#008000;font-weight:bold">&lt;result</span> <span style="color:#b44">type=</span><span style="color:#b44">&#34;redirectAction&#34;</span><span style="color:#008000;font-weight:bold">&gt;</span>
                <span style="color:#008000;font-weight:bold">&lt;param</span> <span style="color:#b44">name=</span><span style="color:#b44">&#34;actionName&#34;</span><span style="color:#008000;font-weight:bold">&gt;</span>HelloWorld<span style="color:#008000;font-weight:bold">&lt;/param&gt;</span>
                <span style="color:#008000;font-weight:bold">&lt;param</span> <span style="color:#b44">name=</span><span style="color:#b44">&#34;namespace&#34;</span><span style="color:#008000;font-weight:bold">&gt;</span>/example<span style="color:#008000;font-weight:bold">&lt;/param&gt;</span>
            <span style="color:#008000;font-weight:bold">&lt;/result&gt;</span>
        <span style="color:#008000;font-weight:bold">&lt;/action&gt;</span>
    <span style="color:#008000;font-weight:bold">&lt;/package&gt;</span>
    <span style="color:#008000;font-weight:bold">&lt;include</span> <span style="color:#b44">file=</span><span style="color:#b44">&#34;example.xml&#34;</span><span style="color:#008000;font-weight:bold">/&gt;</span>
<span style="color:#008000;font-weight:bold">&lt;/struts&gt;</span>
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="constant">constant <a href="#constant" class="anchor">ğŸ”—</a></h2><p>åŒ…å«ä¸€äº›å±æ€§è®¾ç½®ï¼Œä»–å¯ä»¥æ”¹å˜strutsæ¡†æ¶çš„ä¸€äº›è¡Œä¸ºã€‚ä¾‹å¦‚ç¤ºä¾‹ä¸­çš„ struts.enable.DynamicMethodInvocation è®¾ä¸ºtrueï¼Œè¡¨ç¤ºè®¾ç½®åŠ¨æ€æ–¹æ³•è°ƒç”¨ä¸ºçœŸï¼Œè€Œ struts.devMode è¡¨ç¤ºæ˜¯å¦å¯ç”¨å¼€å‘è€…æ¨¡å¼ã€‚</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="package">package <a href="#package" class="anchor">ğŸ”—</a></h2><p>åœ¨strutsä¸­ï¼Œpackageç”¨æ¥ç®¡ç†actionã€resultã€interceptorã€interceptor-stackç­‰é…ç½®ä¿¡æ¯</p>
<ul>
<li>nameï¼šå¿…é¡»å”¯ä¸€ï¼Œè¿™æ ·å…¶ä»–packageå¦‚æœå¼•ç”¨æœ¬packageçš„è¯ï¼Œæ‰èƒ½æ‰¾å¾—åˆ°ã€‚</li>
<li>extendsï¼šå½“æœ¬packageç»§æ‰¿å…¶ä»–packageçš„æ—¶å€™ï¼Œä¼šç»§æ‰¿çˆ¶packageçš„æ‰€æœ‰é…ç½®å±æ€§ï¼ˆä¾‹å¦‚actionã€resultç­‰ç­‰ï¼‰ï¼›ç”±äºpackageçš„ä¿¡æ¯è·å–æ˜¯æŒ‰ç…§struts.xmlæ–‡ä»¶ä¸­çš„å…ˆåé¡ºåºè¿›è¡Œçš„ï¼Œå› æ­¤çˆ¶packageå¿…é¡»åœ¨å­packageä¹‹å‰å…ˆå®šä¹‰ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œç»§æ‰¿ä¸€ä¸ªâ€œstruts-default.xmlâ€çš„packageï¼Œè¿™æ˜¯ Struts2 é»˜è®¤çš„packageã€‚<!-- raw HTML omitted -->namespaceï¼šnamespaceçš„é…ç½®ä¼šæ”¹å˜é¡¹ç›®çš„urlè®¿é—®åœ°å€ï¼Œä¸»è¦æ˜¯é’ˆå¯¹æ¯”è¾ƒå¤§å‹çš„é¡¹ç›®ä»¥æ–¹ä¾¿ç®¡ç†actionï¼Œå› ä¸ºä¸åŒnamespaceä¸­çš„actionå¯ä»¥åŒåï¼Œä»è€Œè§£å†³actioné‡åçš„é—®é¢˜ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šnamespaceï¼Œåˆ™é»˜è®¤ä¸ºâ€œâ€ã€‚</li>
</ul>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="action">action <a href="#action" class="anchor">ğŸ”—</a></h2><ul>
<li>nameï¼šactionçš„åç§°</li>
<li>classï¼šactionå¯¹åº”çš„javaç±»</li>
<li>methodï¼šåœ¨è¯¥classä¸­å¯¹åº”æ‰§è¡ŒActionçš„å‡½æ•°æ–¹æ³•ï¼Œé»˜è®¤æ˜¯execute()ã€‚</li>
<li>converterï¼šç±»å‹è½¬æ¢å™¨</li>
</ul>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="result">result <a href="#result" class="anchor">ğŸ”—</a></h2><ul>
<li>nameï¼šå…·ä½“æ¥è¯´ï¼Œå°±æ˜¯æ ¹æ®æŸä¸ªè¿”å›ç»“æœï¼ŒæŒ‡å®šå“åº”é€»è¾‘ï¼Œé»˜è®¤æ˜¯successã€‚</li>
<li>typeï¼šè¿”å›ç»“æœçš„ç±»å‹ï¼Œé»˜è®¤ä¸ºdispatcherã€‚</li>
</ul>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="default-action-ref">default-action-ref <a href="#default-action-ref" class="anchor">ğŸ”—</a></h2><p>å¦‚æœæ‰¾ä¸åˆ°é¡¹ç›®è¯·æ±‚çš„actionï¼Œå°±ä¼šæŠ¥å‡º404é”™è¯¯ï¼Œè€Œä¸”è¿™ç§é”™è¯¯ä¸å¯é¿å…ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ default-action-ref æ¥æŒ‡å®šä¸€ä¸ªé»˜è®¤çš„actionï¼Œå¦‚æœç³»ç»Ÿå‡ºç°æ‰¾ä¸åˆ°actionçš„æƒ…å†µï¼Œå°±ä¼šæ¥è°ƒç”¨è¿™ä¸ªé»˜è®¤çš„actionã€‚</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="global-results">global-results <a href="#global-results" class="anchor">ğŸ”—</a></h2><p>è®¾ç½®packageèŒƒå›´å†…çš„å…¨å±€å“åº”ç»“æœã€‚åœ¨å¤šä¸ªactionéƒ½è¿”å›åŒä¸€ä¸ªé€»è¾‘è§†å›¾ï¼ˆé€šå¸¸ä¸ºæŸä¸ªjspé¡µé¢ï¼‰çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡è¯¥æ ‡ç­¾æ¥ç»Ÿä¸€é…ç½®ã€‚</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="global-exception-mapping">global-exception-mapping <a href="#global-exception-mapping" class="anchor">ğŸ”—</a></h2><p>é…ç½®å‘ç”Ÿå¼‚å¸¸æ—¶çš„è§†å›¾ä¿¡æ¯ã€‚exception-mappingæ˜¯æ§åˆ¶actionèŒƒå›´å†…çš„ï¼Œè€Œglobal-exception-mappæ˜¯æ§åˆ¶packageèŒƒå›´å†…çš„ã€‚ä¸¤ä¸ªéƒ½é…ç½®æ—¶ï¼Œexception-mappingçš„ä¼˜å…ˆçº§æ›´é«˜ã€‚</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="include">include <a href="#include" class="anchor">ğŸ”—</a></h2><p>ä½¿ç”¨includeå¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶ï¼Œç›´æ¥ç»™å‡ºurlå³å¯</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">&lt;include file=&#34;**/**/***.xml&#34; /&gt;
</code></pre></div><p>ä½¿ç”¨ include çš„å¥½å¤„åœ¨äºï¼Œä¾‹å¦‚å½“æˆ‘ä»¬å¼€å‘ä¸€ä¸ªæ¯”è¾ƒå¤§å‹çš„é¡¹ç›®çš„æ—¶å€™ï¼Œé…ç½®æ–‡ä»¶è‚¯å®šä¼šå†™ä¸€å¤§å †ã€‚å¦‚æœå†™åœ¨ä¸€ä¸ªé…ç½®æ–‡ä»¶é‡Œå°±ä¸å¥½æŸ¥çœ‹å’Œä¿®æ”¹ï¼Œä¸ä¾¿äºç»´æŠ¤ï¼›æ‰€ä»¥ä½¿ç”¨ include åå¯ä»¥æ ¹æ®æ¨¡å—ã€ä¹Ÿå¯ä»¥æ ¹æ®åŠŸèƒ½æ¥åˆ’åˆ†ï¼Œè¿™æ ·å°±æ¯”è¾ƒæ¸…æ™°ï¼Œæ–¹ä¾¿ç®¡ç†å’Œç»´æŠ¤ã€‚<!-- raw HTML omitted -->å…¶ä»–è¾ƒä¸ºå¸¸ç”¨çš„è¿˜æœ‰ æ‹¦æˆªå™¨ç­‰ç­‰ã€‚<!-- raw HTML omitted -->æ¥æºï¼šå®éªŒæ¥¼Â <a 
    href="https://www.shiyanlou.com/courses/32/labs/920/document"
    
    
     
      target="_blank" 
      rel="noopener"
    
>
    https://www.shiyanlou.com/courses/32/labs/920/document
</a></p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1 id="struts2ä¸­actionæ¥æ”¶å‚æ•°çš„ä¸‰ç§æ–¹æ³•">struts2ä¸­actionæ¥æ”¶å‚æ•°çš„ä¸‰ç§æ–¹æ³• <a href="#struts2%e4%b8%adaction%e6%8e%a5%e6%94%b6%e5%8f%82%e6%95%b0%e7%9a%84%e4%b8%89%e7%a7%8d%e6%96%b9%e6%b3%95" class="anchor">ğŸ”—</a></h1><p>struts2ä¸­actionæ¥æ”¶å‚æ•°çš„æ–¹æ³•ä¸»è¦æœ‰ä¸€ä¸‹ä¸‰ç§</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="1ä½¿ç”¨action-ä¸­çš„å±æ€§æ¥æ”¶å‚æ•°">1.ä½¿ç”¨action ä¸­çš„å±æ€§æ¥æ”¶å‚æ•° <a href="#1%e4%bd%bf%e7%94%a8action-%e4%b8%ad%e7%9a%84%e5%b1%9e%e6%80%a7%e6%8e%a5%e6%94%b6%e5%8f%82%e6%95%b0" class="anchor">ğŸ”—</a></h2><ul>
<li>å®šä¹‰ï¼šåœ¨actionç±»ä¸­å®šä¹‰å±æ€§ï¼Œåˆ›å»ºgetå’Œsetæ–¹æ³•</li>
<li>æ¥æ”¶ï¼šé€šè¿‡å±æ€§æ¥æ”¶å‚æ•°ï¼Œå¦‚userIdï¼›</li>
<li>å‘é€ï¼šé€šè¿‡å±æ€§åä¼ é€’å‚æ•°ï¼Œå¦‚ï¼šuser_usershow?userId=1;</li>
</ul>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="2ä½¿ç”¨domainmodelæ¥æ”¶å‚æ•°">2.ä½¿ç”¨DomainModelæ¥æ”¶å‚æ•°ï¼š <a href="#2%e4%bd%bf%e7%94%a8domainmodel%e6%8e%a5%e6%94%b6%e5%8f%82%e6%95%b0" class="anchor">ğŸ”—</a></h2><ul>
<li>å®šä¹‰ï¼šå®šä¹‰Modelç±»ï¼Œåœ¨actionä¸­å®šä¹‰Modelç±»çš„å¯¹è±¡ï¼ˆä¸éœ€è¦newï¼‰ï¼Œåˆ›å»ºè¯¥å¯¹è±¡çš„getå’Œsetæ–¹æ³•</li>
<li>æ¥æ”¶ï¼šé€šè¿‡å¯¹è±¡çš„å±æ€§æ¥æ”¶å‚æ•°ï¼Œå¦‚user.getUserName();</li>
<li>å‘é€ï¼šä½¿ç”¨å¯¹è±¡çš„å±ç›¸ä¼ é€’å‚æ•°ï¼Œå¦‚user_usershow?user.user.userName=xxx;</li>
</ul>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="3ä½¿ç”¨modeldrivenæ¥æ”¶å‚æ•°">3ä½¿ç”¨ModelDrivenæ¥æ”¶å‚æ•° <a href="#3%e4%bd%bf%e7%94%a8modeldriven%e6%8e%a5%e6%94%b6%e5%8f%82%e6%95%b0" class="anchor">ğŸ”—</a></h2><ul>
<li>å®šä¹‰ï¼šactionå®ç°ModelDrivenæ³›å‹æ¥å£ï¼Œå®šä¹‰Modelç±»çš„å¯¹è±¡ï¼ˆå¿…é¡»newï¼‰ï¼Œé€šè¿‡getModelæ–¹æ³•è¿”å›è¯¥å¯¹è±¡ï¼›</li>
<li>æ¥æ”¶ï¼šé€šè¿‡å¯¹è±¡çš„å±æ€§æ¥æ”¶å‚æ•°ï¼Œå¦‚ï¼šuser.getUserName()ï¼›</li>
<li>å‘é€ï¼šç›´æ¥ä½¿ç”¨å±æ€§åä¼ é€’å‚æ•°ï¼Œå¦‚ï¼šuser_usershow?userName=xxx
<!-- raw HTML omitted --><!-- raw HTML omitted --></li>
</ul>
<h1 id="actionè·å–è¡¨å•æäº¤æ•°æ®">Actionè·å–è¡¨å•æäº¤æ•°æ® <a href="#action%e8%8e%b7%e5%8f%96%e8%a1%a8%e5%8d%95%e6%8f%90%e4%ba%a4%e6%95%b0%e6%8d%ae" class="anchor">ğŸ”—</a></h1><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="è·å–è¡¨å•æäº¤æ•°æ®çš„ä¸‰ç§ä¸»è¦æ–¹å¼">è·å–è¡¨å•æäº¤æ•°æ®çš„ä¸‰ç§ä¸»è¦æ–¹å¼ <a href="#%e8%8e%b7%e5%8f%96%e8%a1%a8%e5%8d%95%e6%8f%90%e4%ba%a4%e6%95%b0%e6%8d%ae%e7%9a%84%e4%b8%89%e7%a7%8d%e4%b8%bb%e8%a6%81%e6%96%b9%e5%bc%8f" class="anchor">ğŸ”—</a></h2><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="1ä½¿ç”¨actioncontext">1.ä½¿ç”¨ActionContext <a href="#1%e4%bd%bf%e7%94%a8actioncontext" class="anchor">ğŸ”—</a></h3><p>Map&lt;String,Object&gt;getParameters() è¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰HttpServletRequestå‚æ•°ä¿¡æ¯</p>
<ol>
<li>å› ä¸ºæ–¹æ³•ä¸æ˜¯é™æ€çš„æ–¹æ³•ï¼Œéœ€è¦åˆ›å»ºActionContextç±»çš„å¯¹è±¡</li>
<li>ActionContextå¯¹è±¡ä¸æ˜¯newå‡ºæ¥çš„ static ActionContext getContext() è·å–å½“å‰çº¿ç¨‹çš„ActionContextå¯¹è±¡</li>
<li>å®ä¾‹</li>
</ol>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a2f;font-weight:bold">public</span> String <span style="color:#00a000">execute</span><span style="color:#666">()</span> <span style="color:#a2f;font-weight:bold">throws</span> Exception <span style="color:#666">{</span>
        <span style="color:#080;font-style:italic">//ç¬¬ä¸€ç§æ–¹å¼ï¼šä½¿ç”¨ActionContextç±»è·å–
</span><span style="color:#080;font-style:italic"></span>        <span style="color:#080;font-style:italic">//è·å–ActionContextå¯¹è±¡
</span><span style="color:#080;font-style:italic"></span>        ActionContext context<span style="color:#666">=</span>ActionContext<span style="color:#666">.</span><span style="color:#b44">getContext</span><span style="color:#666">();</span>
        <span style="color:#080;font-style:italic">//è°ƒç”¨æ–¹æ³•å¾—åˆ°è¡¨å•æ•°æ®
</span><span style="color:#080;font-style:italic"></span>        Map<span style="color:#666">&lt;</span>String<span style="color:#666">,</span> Object<span style="color:#666">&gt;</span> map <span style="color:#666">=</span> context<span style="color:#666">.</span><span style="color:#b44">getParameters</span><span style="color:#666">();</span>
        Set<span style="color:#666">&lt;</span>String<span style="color:#666">&gt;</span> keys<span style="color:#666">=</span>map<span style="color:#666">.</span><span style="color:#b44">keySet</span><span style="color:#666">();</span>
        <span style="color:#080;font-style:italic">//æ ¹æ®keyå¾—åˆ°vauleï¼Œä½¿ç”¨æ•°ç»„å½¢å¼æ˜¯å› ä¸ºè¾“å…¥é¡¹å¯èƒ½æœ‰å¤é€‰æ¡†
</span><span style="color:#080;font-style:italic"></span>        <span style="color:#a2f;font-weight:bold">for</span><span style="color:#666">(</span>String key<span style="color:#666">:</span>keys<span style="color:#666">){</span>
            Object<span style="color:#666">[]</span> obj<span style="color:#666">=(</span>Object<span style="color:#666">[])</span> map<span style="color:#666">.</span><span style="color:#b44">get</span><span style="color:#666">(</span>key<span style="color:#666">);</span>
            System<span style="color:#666">.</span><span style="color:#b44">out</span><span style="color:#666">.</span><span style="color:#b44">println</span><span style="color:#666">(</span>Arrays<span style="color:#666">.</span><span style="color:#b44">toString</span><span style="color:#666">(</span>obj<span style="color:#666">));</span>
        <span style="color:#666">}</span>
        <span style="color:#a2f;font-weight:bold">return</span> NONE<span style="color:#666">;</span>
    <span style="color:#666">}</span>
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="2ä½¿ç”¨servletactioncontextç±»">2.ä½¿ç”¨ServletActionContextç±» <a href="#2%e4%bd%bf%e7%94%a8servletactioncontext%e7%b1%bb" class="anchor">ğŸ”—</a></h3><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a2f;font-weight:bold">public</span> String <span style="color:#00a000">execute</span><span style="color:#666">()</span> <span style="color:#a2f;font-weight:bold">throws</span> Exception <span style="color:#666">{</span>
        <span style="color:#080;font-style:italic">//ä½¿ç”¨ServletActionContextè·å–requestå¯¹è±¡
</span><span style="color:#080;font-style:italic"></span>        HttpServletRequest request<span style="color:#666">=</span>ServletActionContext<span style="color:#666">.</span><span style="color:#b44">getRequest</span><span style="color:#666">();</span>
        <span style="color:#080;font-style:italic">//è°ƒç”¨requesté‡Œé¢çš„æ–¹æ³•å¾—åˆ°ç»“æœ
</span><span style="color:#080;font-style:italic"></span>        String username<span style="color:#666">=</span>request<span style="color:#666">.</span><span style="color:#b44">getParameter</span><span style="color:#666">(</span><span style="color:#b44">&#34;username&#34;</span><span style="color:#666">);</span>
        String password<span style="color:#666">=</span>request<span style="color:#666">.</span><span style="color:#b44">getParameter</span><span style="color:#666">(</span><span style="color:#b44">&#34;password&#34;</span><span style="color:#666">);</span>
        String address<span style="color:#666">=</span>request<span style="color:#666">.</span><span style="color:#b44">getParameter</span><span style="color:#666">(</span><span style="color:#b44">&#34;address&#34;</span><span style="color:#666">);</span>
        System<span style="color:#666">.</span><span style="color:#b44">out</span><span style="color:#666">.</span><span style="color:#b44">println</span><span style="color:#666">(</span>username<span style="color:#666">+</span><span style="color:#b44">&#34; &#34;</span><span style="color:#666">+</span>password<span style="color:#666">+</span><span style="color:#b44">&#34; &#34;</span><span style="color:#666">+</span>address<span style="color:#666">);</span>
        <span style="color:#a2f;font-weight:bold">return</span> NONE<span style="color:#666">;</span>
    <span style="color:#666">}</span>
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="3ä½¿ç”¨æ¥å£æ³¨å…¥æ–¹å¼">3.ä½¿ç”¨æ¥å£æ³¨å…¥æ–¹å¼ <a href="#3%e4%bd%bf%e7%94%a8%e6%8e%a5%e5%8f%a3%e6%b3%a8%e5%85%a5%e6%96%b9%e5%bc%8f" class="anchor">ğŸ”—</a></h3><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="åœ¨actionæ“ä½œåŸŸå¯¹è±¡">åœ¨actionæ“ä½œåŸŸå¯¹è±¡ <a href="#%e5%9c%a8action%e6%93%8d%e4%bd%9c%e5%9f%9f%e5%af%b9%e8%b1%a1" class="anchor">ğŸ”—</a></h2><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#080;font-style:italic">//æ“ä½œä¸‰ä¸ªåŸŸå¯¹è±¡
</span><span style="color:#080;font-style:italic"></span>        <span style="color:#080;font-style:italic">//1.requeståŸŸ
</span><span style="color:#080;font-style:italic"></span>        HttpServletRequest request<span style="color:#666">=</span>ServletActionContext<span style="color:#666">.</span><span style="color:#b44">getRequest</span><span style="color:#666">();</span>
        request<span style="color:#666">.</span><span style="color:#b44">setAttribute</span><span style="color:#666">(</span><span style="color:#b44">&#34;req&#34;</span><span style="color:#666">,</span><span style="color:#b44">&#34;reqvalue&#34;</span> <span style="color:#666">);</span>
        <span style="color:#080;font-style:italic">//2.sessionåŸŸ
</span><span style="color:#080;font-style:italic"></span>        HttpSession session<span style="color:#666">=</span>request<span style="color:#666">.</span><span style="color:#b44">getSession</span><span style="color:#666">();</span>
        session<span style="color:#666">.</span><span style="color:#b44">setAttribute</span><span style="color:#666">(</span><span style="color:#b44">&#34;sess&#34;</span><span style="color:#666">,</span> <span style="color:#b44">&#34;sessValue&#34;</span><span style="color:#666">);</span>
        <span style="color:#080;font-style:italic">//3ServletContextåŸŸ
</span><span style="color:#080;font-style:italic"></span>        ServletContext context<span style="color:#666">=</span>ServletActionContext<span style="color:#666">.</span><span style="color:#b44">getServletContext</span><span style="color:#666">();</span>
        context<span style="color:#666">.</span><span style="color:#b44">setAttribute</span><span style="color:#666">(</span><span style="color:#b44">&#34;contextname&#34;</span><span style="color:#666">,</span> <span style="color:#b44">&#34;contextValue&#34;</span><span style="color:#666">);</span>
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="struts2æä¾›è·å–è¡¨å•æ•°æ®æ–¹å¼">struts2æä¾›è·å–è¡¨å•æ•°æ®æ–¹å¼ <a href="#struts2%e6%8f%90%e4%be%9b%e8%8e%b7%e5%8f%96%e8%a1%a8%e5%8d%95%e6%95%b0%e6%8d%ae%e6%96%b9%e5%bc%8f" class="anchor">ğŸ”—</a></h2><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="1åŸå§‹æ–¹å¼è·å–è¡¨å•å°è£…åˆ°å®ä½“ç±»å¯¹è±¡">1.åŸå§‹æ–¹å¼è·å–è¡¨å•å°è£…åˆ°å®ä½“ç±»å¯¹è±¡ <a href="#1%e5%8e%9f%e5%a7%8b%e6%96%b9%e5%bc%8f%e8%8e%b7%e5%8f%96%e8%a1%a8%e5%8d%95%e5%b0%81%e8%a3%85%e5%88%b0%e5%ae%9e%e4%bd%93%e7%b1%bb%e5%af%b9%e8%b1%a1" class="anchor">ğŸ”—</a></h3><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a2f;font-weight:bold">public</span> String <span style="color:#00a000">execute</span><span style="color:#666">()</span> <span style="color:#a2f;font-weight:bold">throws</span> Exception <span style="color:#666">{</span>
        HttpServletRequest request<span style="color:#666">=</span>ServletActionContext<span style="color:#666">.</span><span style="color:#b44">getRequest</span><span style="color:#666">();</span>
        String username<span style="color:#666">=</span>request<span style="color:#666">.</span><span style="color:#b44">getParameter</span><span style="color:#666">(</span><span style="color:#b44">&#34;username&#34;</span><span style="color:#666">);</span>
        String password<span style="color:#666">=</span>request<span style="color:#666">.</span><span style="color:#b44">getParameter</span><span style="color:#666">(</span><span style="color:#b44">&#34;password&#34;</span><span style="color:#666">);</span>
        String address<span style="color:#666">=</span>request<span style="color:#666">.</span><span style="color:#b44">getParameter</span><span style="color:#666">(</span><span style="color:#b44">&#34;address&#34;</span><span style="color:#666">);</span>
        <span style="color:#080;font-style:italic">//å°è£…åˆ°å®ä½“ç±»
</span><span style="color:#080;font-style:italic"></span>        User user<span style="color:#666">=</span><span style="color:#a2f;font-weight:bold">new</span> User<span style="color:#666">();</span>
        user<span style="color:#666">.</span><span style="color:#b44">setUsername</span><span style="color:#666">(</span>username<span style="color:#666">);</span>
        user<span style="color:#666">.</span><span style="color:#b44">setPassword</span><span style="color:#666">(</span>password<span style="color:#666">);</span>
        user<span style="color:#666">.</span><span style="color:#b44">setAddress</span><span style="color:#666">(</span>address<span style="color:#666">);</span>
        System<span style="color:#666">.</span><span style="color:#b44">out</span><span style="color:#666">.</span><span style="color:#b44">println</span><span style="color:#666">(</span>user<span style="color:#666">);</span>
        <span style="color:#a2f;font-weight:bold">return</span> NONE<span style="color:#666">;</span>
    <span style="color:#666">}</span>
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="2å±æ€§å°è£…">2.å±æ€§å°è£… <a href="#2%e5%b1%9e%e6%80%a7%e5%b0%81%e8%a3%85" class="anchor">ğŸ”—</a></h3><ol>
<li>ç›´æ¥æŠŠè¡¨å•æäº¤å±æ€§å°è£…åˆ°actionå±æ€§ä¸­</li>
<li>å®ç°æ­¥éª¤</li>
<li>åœ¨actionæˆå‘˜å˜é‡ä½ç½®å®šä¹‰å˜é‡ï¼Œå˜é‡åç§°å’Œè¡¨å•è¾“å…¥é¡¹çš„nameå±æ€§å€¼ä¸€æ ·</li>
<li>ç”Ÿæˆå˜é‡çš„getå’Œsetæ–¹æ³•</li>
<li>ä½¿ç”¨å±æ€§å°è£…è·å–è¡¨å•æ•°æ®åˆ°å±æ€§é‡Œé¢ï¼Œä¸èƒ½ç›´æ¥æŠŠæ•°æ®å°è£…åˆ°å®ä½“ç±»å¯¹è±¡é‡Œé¢</li>
<li>å®ä¾‹</li>
</ol>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a2f;font-weight:bold">public</span> <span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">sysAction</span> <span style="color:#a2f;font-weight:bold">extends</span> ActionSupport<span style="color:#666">{</span>    
    <span style="color:#a2f;font-weight:bold">private</span> String username<span style="color:#666">;</span>    
   
    <span style="color:#a2f;font-weight:bold">public</span> String <span style="color:#00a000">login</span><span style="color:#666">()</span> <span style="color:#a2f;font-weight:bold">throws</span> Exception <span style="color:#666">{</span>    
        System<span style="color:#666">.</span><span style="color:#b44">out</span><span style="color:#666">.</span><span style="color:#b44">println</span><span style="color:#666">(</span>username<span style="color:#666">);</span>    
        <span style="color:#a2f;font-weight:bold">return</span> SUCCESS<span style="color:#666">;</span>    
    <span style="color:#666">}</span>    
   
    <span style="color:#a2f;font-weight:bold">public</span> String <span style="color:#00a000">getUsername</span><span style="color:#666">()</span> <span style="color:#666">{</span>    
        <span style="color:#a2f;font-weight:bold">return</span> username<span style="color:#666">;</span>    
    <span style="color:#666">}</span>    
    <span style="color:#a2f;font-weight:bold">public</span> <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">setUsername</span><span style="color:#666">(</span>String username<span style="color:#666">)</span> <span style="color:#666">{</span>    
        <span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">.</span><span style="color:#b44">username</span><span style="color:#666">=</span> username<span style="color:#666">;</span>    
    <span style="color:#666">}</span>    
<span style="color:#666">}</span>
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="3æ¨¡å‹é©±åŠ¨å°è£…å¯¹äºè¦ä¼ å…¥å¤šä¸ªmodelç¬¬äºŒç§æ–¹å¼ä¸æ–¹ä¾¿">3.æ¨¡å‹é©±åŠ¨å°è£…ï¼Œå¯¹äºè¦ä¼ å…¥å¤šä¸ªmodelï¼Œç¬¬äºŒç§æ–¹å¼ä¸æ–¹ä¾¿ <a href="#3%e6%a8%a1%e5%9e%8b%e9%a9%b1%e5%8a%a8%e5%b0%81%e8%a3%85%e5%af%b9%e4%ba%8e%e8%a6%81%e4%bc%a0%e5%85%a5%e5%a4%9a%e4%b8%aamodel%e7%ac%ac%e4%ba%8c%e7%a7%8d%e6%96%b9%e5%bc%8f%e4%b8%8d%e6%96%b9%e4%be%bf" class="anchor">ğŸ”—</a></h3><ol>
<li>å¯ä»¥ç›´æ¥æŠŠè¡¨å•æ•°æ®å°è£…åˆ°å®ä½“ç±»å¯¹è±¡</li>
<li>å®ç°æ­¥éª¤</li>
<li>actionå®ç°æ¥å£ModelDriven</li>
<li>å®ç°æ¥å£é‡Œé¢çš„æ–¹æ³•getModelæ–¹æ³•</li>
<li>åœ¨actioné‡Œé¢åˆ›å»ºå®ä½“ç±»å¯¹è±¡</li>
</ol>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a2f;font-weight:bold">public</span> <span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">DataDemo2Action</span> <span style="color:#a2f;font-weight:bold">extends</span> ActionSupport <span style="color:#a2f;font-weight:bold">implements</span> ModelDriven<span style="color:#666">&lt;</span>User<span style="color:#666">&gt;{</span>
    <span style="color:#080;font-style:italic">//åˆ›å»ºå¯¹è±¡
</span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f;font-weight:bold">private</span> User user<span style="color:#666">=</span><span style="color:#a2f;font-weight:bold">new</span> User<span style="color:#666">();</span>
    <span style="color:#a2f;font-weight:bold">public</span> User <span style="color:#00a000">getModel</span><span style="color:#666">()</span> <span style="color:#666">{</span>
        <span style="color:#080;font-style:italic">// è¿”å›åˆ›å»ºçš„å¯¹è±¡
</span><span style="color:#080;font-style:italic"></span>        <span style="color:#a2f;font-weight:bold">return</span> user<span style="color:#666">;</span>
    <span style="color:#666">}</span>
    <span style="color:#a2f;font-weight:bold">public</span> String <span style="color:#00a000">execute</span><span style="color:#666">()</span> <span style="color:#a2f;font-weight:bold">throws</span> Exception <span style="color:#666">{</span>
        
        <span style="color:#a2f;font-weight:bold">return</span> NONE<span style="color:#666">;</span>
    <span style="color:#666">}</span>
<span style="color:#666">}</span>
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="4å¯ä»¥ä½¿ç”¨å¤šä¸ªmoduleå®ä½“å¯¹è±¡çš„å°è£…">4.å¯ä»¥ä½¿ç”¨å¤šä¸ªmoduleå®ä½“å¯¹è±¡çš„å°è£… <a href="#4%e5%8f%af%e4%bb%a5%e4%bd%bf%e7%94%a8%e5%a4%9a%e4%b8%aamodule%e5%ae%9e%e4%bd%93%e5%af%b9%e8%b1%a1%e7%9a%84%e5%b0%81%e8%a3%85" class="anchor">ğŸ”—</a></h3><p>æ­¤ç§å°è£…æ–¹æ³•ï¼Œå˜é‡åç§°å’Œè¡¨å•è¾“å…¥é¡¹çš„nameå±æ€§å€¼ä¸ä¸€æ ·ï¼Œå˜å•è¾“å…¥é¡¹æ ·å¼ä¸º</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#008000;font-weight:bold">form</span> <span style="color:#b44">action</span><span style="color:#666">=</span><span style="color:#b44">&#34;sys/login.action&#34;</span> <span style="color:#b44">method</span><span style="color:#666">=</span><span style="color:#b44">&#34;post&#34;</span>&gt;    
    &lt;<span style="color:#008000;font-weight:bold">input</span> <span style="color:#b44">type</span><span style="color:#666">=</span><span style="color:#b44">&#34;text&#34;</span> <span style="color:#b44">name</span><span style="color:#666">=</span><span style="color:#b44">&#34;user.username&#34;</span>&gt;    
    &lt;<span style="color:#008000;font-weight:bold">input</span> <span style="color:#b44">type</span><span style="color:#666">=</span><span style="color:#b44">&#34;text&#34;</span> <span style="color:#b44">name</span><span style="color:#666">=</span><span style="color:#b44">&#34;teacher.level&#34;</span>&gt;    
    &lt;<span style="color:#008000;font-weight:bold">input</span> <span style="color:#b44">type</span><span style="color:#666">=</span><span style="color:#b44">&#34;submit&#34;</span> <span style="color:#b44">value</span><span style="color:#666">=</span><span style="color:#b44">&#34;submit&#34;</span>&gt;    
&lt;/<span style="color:#008000;font-weight:bold">form</span>&gt;
</code></pre></div><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a2f;font-weight:bold">public</span> <span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">sysAction</span> <span style="color:#a2f;font-weight:bold">extends</span> ActionSupport<span style="color:#666">{</span>    
    <span style="color:#a2f;font-weight:bold">private</span> User user<span style="color:#666">;</span>    
    <span style="color:#a2f;font-weight:bold">private</span> Teacher teacher<span style="color:#666">;</span>    
   
    <span style="color:#a2f;font-weight:bold">public</span> String <span style="color:#00a000">login</span><span style="color:#666">()</span> <span style="color:#a2f;font-weight:bold">throws</span> Exception <span style="color:#666">{</span>    
        System<span style="color:#666">.</span><span style="color:#b44">out</span><span style="color:#666">.</span><span style="color:#b44">println</span><span style="color:#666">(</span>user<span style="color:#666">.</span><span style="color:#b44">getUsername</span><span style="color:#666">());</span>    
        System<span style="color:#666">.</span><span style="color:#b44">out</span><span style="color:#666">.</span><span style="color:#b44">println</span><span style="color:#666">(</span>teacher<span style="color:#666">.</span><span style="color:#b44">getLevel</span><span style="color:#666">());</span>    
        <span style="color:#a2f;font-weight:bold">return</span> SUCCESS<span style="color:#666">;</span>    
    <span style="color:#666">}</span>    
   
    <span style="color:#a2f;font-weight:bold">public</span> <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">setUser</span><span style="color:#666">(</span>User user<span style="color:#666">)</span> <span style="color:#666">{</span>    
        <span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">.</span><span style="color:#b44">user</span> <span style="color:#666">=</span> user<span style="color:#666">;</span>    
    <span style="color:#666">}</span>    
    <span style="color:#a2f;font-weight:bold">public</span> <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">setTeacher</span><span style="color:#666">(</span>Teacher teacher<span style="color:#666">)</span> <span style="color:#666">{</span>    
        <span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">.</span><span style="color:#b44">teacher</span> <span style="color:#666">=</span> teacher<span style="color:#666">;</span>    
    <span style="color:#666">}</span>    
<span style="color:#666">}</span>
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="å°è£…æ•°æ®åˆ°é›†åˆ">å°è£…æ•°æ®åˆ°é›†åˆ <a href="#%e5%b0%81%e8%a3%85%e6%95%b0%e6%8d%ae%e5%88%b0%e9%9b%86%e5%90%88" class="anchor">ğŸ”—</a></h2><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="å°è£…æ•°æ®åˆ°listé›†åˆ">å°è£…æ•°æ®åˆ°listé›†åˆ <a href="#%e5%b0%81%e8%a3%85%e6%95%b0%e6%8d%ae%e5%88%b0list%e9%9b%86%e5%90%88" class="anchor">ğŸ”—</a></h3><ol>
<li>åœ¨actionå£°æ˜List</li>
<li>ç”Ÿæˆlistå˜é‡çš„getå’Œsetæ–¹æ³•</li>
<li>åœ¨è¡¨å•è¾“å…¥é¡¹å†™è¡¨è¾¾å¼</li>
</ol>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="å°è£…æ•°æ®åˆ°mapé›†åˆ">å°è£…æ•°æ®åˆ°mapé›†åˆ <a href="#%e5%b0%81%e8%a3%85%e6%95%b0%e6%8d%ae%e5%88%b0map%e9%9b%86%e5%90%88" class="anchor">ğŸ”—</a></h3><ol>
<li>åœ¨actionå£°æ˜mapé›†åˆ</li>
<li>ç”Ÿæˆlistå˜é‡çš„getå’Œsetæ–¹æ³•</li>
<li>åœ¨è¡¨å•è¾“å…¥é¡¹å†™è¡¨è¾¾å¼</li>
</ol>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1 id="struts2ç»“æœé¡µé¢é…ç½®">struts2ç»“æœé¡µé¢é…ç½® <a href="#struts2%e7%bb%93%e6%9e%9c%e9%a1%b5%e9%9d%a2%e9%85%8d%e7%bd%ae" class="anchor">ğŸ”—</a></h1><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="actionçš„è®¿é—®">actionçš„è®¿é—® <a href="#action%e7%9a%84%e8%ae%bf%e9%97%ae" class="anchor">ğŸ”—</a></h2><ul>
<li>ä½¿ç”¨methodæ–¹æ³•</li>
<li>ä½¿ç”¨é€šé…ç¬¦å®ç°<!-- raw HTML omitted -->
åœ¨actionæ ‡ç­¾é‡Œé¢nameå±æ€§ï¼Œnameå±æ€§å€¼å†™ç¬¦å· * ï¼Œè¡¨ç¤ºåŒ¹é…ä»»ä½•å†…å®¹</li>
<li>åŠ¨æ€è®¿é—®</li>
</ul>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="ç»“æœé¡µé¢é…ç½®">ç»“æœé¡µé¢é…ç½® <a href="#%e7%bb%93%e6%9e%9c%e9%a1%b5%e9%9d%a2%e9%85%8d%e7%bd%ae" class="anchor">ğŸ”—</a></h2><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="å…¨å±€ç»“æœé¡µé¢">å…¨å±€ç»“æœé¡µé¢ <a href="#%e5%85%a8%e5%b1%80%e7%bb%93%e6%9e%9c%e9%a1%b5%e9%9d%a2" class="anchor">ğŸ”—</a></h3><ol>
<li>å¦‚æœå¤šä¸ªactionï¼Œæ–¹æ³•é‡Œé¢è¿”å›ç›¸åŒå€¼çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨å…¨å±€ç»“æœç•Œé¢é…ç½®</li>
</ol>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="å±€éƒ¨ç»“æœé¡µé¢é…ç½®">å±€éƒ¨ç»“æœé¡µé¢é…ç½® <a href="#%e5%b1%80%e9%83%a8%e7%bb%93%e6%9e%9c%e9%a1%b5%e9%9d%a2%e9%85%8d%e7%bd%ae" class="anchor">ğŸ”—</a></h3><ol>
<li>å½“å­˜åœ¨å…¨å±€ç»“æœé¡µé¢é…ç½®æ—¶ï¼Œä¾æ—§ä»¥å±€éƒ¨ç»“æœé¡µé¢é…ç½®ä¸ºå‡†</li>
</ol>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="resultä¾¿ç­¾çš„typeå±æ€§">resultä¾¿ç­¾çš„typeå±æ€§ <a href="#result%e4%be%bf%e7%ad%be%e7%9a%84type%e5%b1%9e%e6%80%a7" class="anchor">ğŸ”—</a></h3><ol>
<li>typeå±æ€§ï¼šå¦‚ä½•åˆ°è·¯å¾„é‡Œ</li>
<li>typeå±æ€§å€¼ï¼š</li>
</ol>
<ul>
<li>é»˜è®¤å€¼ï¼šè½¬å‘æ“ä½œï¼Œå€¼æ˜¯dispatcher</li>
<li>é‡å®šå‘ï¼šredirect</li>
<li>chainï¼šè½¬å‘åˆ°action</li>
<li>redirectActionï¼šé‡å®šå‘åˆ°action</li>
</ul>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="å®ä¾‹">å®ä¾‹ <a href="#%e5%ae%9e%e4%be%8b" class="anchor">ğŸ”—</a></h3><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#080">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#080">&lt;!DOCTYPE struts PUBLIC
</span><span style="color:#080">        &#34;-//Apache Software Foundation//DTD Struts Configuration 2.3//EN&#34;
</span><span style="color:#080">        &#34;http://struts.apache.org/dtds/struts-2.3.dtd&#34;&gt;</span>
<span style="color:#008000;font-weight:bold">&lt;struts&gt;</span>
    <span style="color:#008000;font-weight:bold">&lt;package</span> <span style="color:#b44">name=</span><span style="color:#b44">&#34;demo1&#34;</span> <span style="color:#b44">extends=</span><span style="color:#b44">&#34;struts-default&#34;</span> <span style="color:#b44">namespace=</span><span style="color:#b44">&#34;/&#34;</span><span style="color:#008000;font-weight:bold">&gt;</span>
    <span style="color:#008000;font-weight:bold">&lt;action</span> <span style="color:#b44">name=</span><span style="color:#b44">&#34;user_*&#34;</span> <span style="color:#b44">class=</span><span style="color:#b44">&#34;userAction&#34;</span> <span style="color:#b44">method=</span><span style="color:#b44">&#34;{1}&#34;</span><span style="color:#008000;font-weight:bold">&gt;</span>
        <span style="color:#080;font-style:italic">&lt;!-- &lt;result name=&#34;loginsuccess&#34;&gt;/index.jsp&lt;/result&gt; --&gt;</span>
        <span style="color:#008000;font-weight:bold">&lt;result</span> <span style="color:#b44">name=</span><span style="color:#b44">&#34;loginsuccess&#34;</span> <span style="color:#b44">type=</span><span style="color:#b44">&#34;redirectAction&#34;</span><span style="color:#008000;font-weight:bold">&gt;</span>story_indexlist<span style="color:#008000;font-weight:bold">&lt;/result&gt;</span>
        <span style="color:#008000;font-weight:bold">&lt;result</span> <span style="color:#b44">name=</span><span style="color:#b44">&#34;login&#34;</span><span style="color:#008000;font-weight:bold">&gt;</span>/login.jsp<span style="color:#008000;font-weight:bold">&lt;/result&gt;</span>
         <span style="color:#008000;font-weight:bold">&lt;result</span> <span style="color:#b44">name=</span><span style="color:#b44">&#34;logout&#34;</span> <span style="color:#b44">type=</span><span style="color:#b44">&#34;redirectAction&#34;</span><span style="color:#008000;font-weight:bold">&gt;</span>story_indexlist<span style="color:#008000;font-weight:bold">&lt;/result&gt;</span>
        <span style="color:#008000;font-weight:bold">&lt;result</span> <span style="color:#b44">name=</span><span style="color:#b44">&#34;registersuccess&#34;</span><span style="color:#008000;font-weight:bold">&gt;</span>/login.jsp<span style="color:#008000;font-weight:bold">&lt;/result&gt;</span>
        <span style="color:#008000;font-weight:bold">&lt;result</span> <span style="color:#b44">name=</span><span style="color:#b44">&#34;usershow&#34;</span><span style="color:#008000;font-weight:bold">&gt;</span>/myinfo.jsp<span style="color:#008000;font-weight:bold">&lt;/result&gt;</span>
        <span style="color:#008000;font-weight:bold">&lt;result</span> <span style="color:#b44">name=</span><span style="color:#b44">&#34;showUserinfo&#34;</span><span style="color:#008000;font-weight:bold">&gt;</span>/myinfoedit.jsp<span style="color:#008000;font-weight:bold">&lt;/result&gt;</span>
        <span style="color:#008000;font-weight:bold">&lt;result</span> <span style="color:#b44">name=</span><span style="color:#b44">&#34;update&#34;</span> <span style="color:#b44">type=</span><span style="color:#b44">&#34;redirectAction&#34;</span><span style="color:#008000;font-weight:bold">&gt;</span>story_indexlist<span style="color:#008000;font-weight:bold">&lt;/result&gt;</span>
    <span style="color:#008000;font-weight:bold">&lt;/action&gt;</span>
    <span style="color:#008000;font-weight:bold">&lt;action</span> <span style="color:#b44">name=</span><span style="color:#b44">&#34;story_*&#34;</span> <span style="color:#b44">class=</span><span style="color:#b44">&#34;storyAction&#34;</span> <span style="color:#b44">method=</span><span style="color:#b44">&#34;{1}&#34;</span><span style="color:#008000;font-weight:bold">&gt;</span>
        <span style="color:#008000;font-weight:bold">&lt;result</span> <span style="color:#b44">name=</span><span style="color:#b44">&#34;toAddPage&#34;</span><span style="color:#008000;font-weight:bold">&gt;</span>/newstory.jsp<span style="color:#008000;font-weight:bold">&lt;/result&gt;</span>
        <span style="color:#008000;font-weight:bold">&lt;result</span> <span style="color:#b44">name=</span><span style="color:#b44">&#34;add&#34;</span> <span style="color:#b44">type=</span><span style="color:#b44">&#34;redirectAction&#34;</span><span style="color:#008000;font-weight:bold">&gt;</span>story_indexlist<span style="color:#008000;font-weight:bold">&lt;/result&gt;</span>
        <span style="color:#008000;font-weight:bold">&lt;result</span> <span style="color:#b44">name=</span><span style="color:#b44">&#34;indexlist&#34;</span><span style="color:#008000;font-weight:bold">&gt;</span>/index.jsp<span style="color:#008000;font-weight:bold">&lt;/result&gt;</span>
        <span style="color:#008000;font-weight:bold">&lt;result</span> <span style="color:#b44">name=</span><span style="color:#b44">&#34;storyshow&#34;</span><span style="color:#008000;font-weight:bold">&gt;</span>/storyshow.jsp<span style="color:#008000;font-weight:bold">&lt;/result&gt;</span>
        <span style="color:#008000;font-weight:bold">&lt;result</span> <span style="color:#b44">name=</span><span style="color:#b44">&#34;getAllStory&#34;</span><span style="color:#008000;font-weight:bold">&gt;</span>/showbypage.jsp<span style="color:#008000;font-weight:bold">&lt;/result&gt;</span>
        <span style="color:#008000;font-weight:bold">&lt;result</span> <span style="color:#b44">name=</span><span style="color:#b44">&#34;addComment&#34;</span><span style="color:#008000;font-weight:bold">&gt;</span>/showbypage.jsp<span style="color:#008000;font-weight:bold">&lt;/result&gt;</span>
    <span style="color:#008000;font-weight:bold">&lt;/action&gt;</span>
        <span style="color:#008000;font-weight:bold">&lt;action</span> <span style="color:#b44">name=</span><span style="color:#b44">&#34;comment_*&#34;</span> <span style="color:#b44">class=</span><span style="color:#b44">&#34;commentAction&#34;</span> <span style="color:#b44">method=</span><span style="color:#b44">&#34;{1}&#34;</span><span style="color:#008000;font-weight:bold">&gt;</span>
            <span style="color:#008000;font-weight:bold">&lt;result</span> <span style="color:#b44">name=</span><span style="color:#b44">&#34;add&#34;</span> <span style="color:#b44">type=</span><span style="color:#b44">&#34;redirectAction&#34;</span><span style="color:#008000;font-weight:bold">&gt;</span>story_show?story_id=${comment.story.story_id}<span style="color:#008000;font-weight:bold">&lt;/result&gt;</span>
        <span style="color:#008000;font-weight:bold">&lt;/action&gt;</span>
    <span style="color:#008000;font-weight:bold">&lt;/package&gt;</span>
<span style="color:#008000;font-weight:bold">&lt;/struts&gt;</span>
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1 id="struts2ä¸­çš„é‡å®šå‘é—®é¢˜">struts2ä¸­çš„é‡å®šå‘é—®é¢˜ <a href="#struts2%e4%b8%ad%e7%9a%84%e9%87%8d%e5%ae%9a%e5%90%91%e9%97%ae%e9%a2%98" class="anchor">ğŸ”—</a></h1><p>åœ¨å¤„ç†sshæ¡†æ¶çš„å°è®ºå›é¡¹ç›®çš„æ—¶å€™ï¼Œé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨ä¸€ä¸ªå¸–å­ä¸‹éœ€è¦è¿›è¡Œè¯„è®ºï¼Œä½†æ˜¯åœ¨ç‚¹å‡»è¯„è®ºæŒ‰é’®çš„æ—¶å€™ï¼Œåå°åšå‡ºè¿™å‡ ä¸ªåŠ¨ä½œï¼š</p>
<ol>
<li>å­˜å‚¨è¯„è®ºä¿¡æ¯åˆ°æ•°æ®åº“ï¼Œä¹Ÿå°±æ˜¯commentå®ä½“ï¼›</li>
<li>é‡æ–°åŠ è½½å¸–å­è¯¦æƒ…å’Œè¯„è®ºè¯¦æƒ…<!-- raw HTML omitted -->
è¦å®ç°ä»¥ä¸Šéœ€æ±‚ï¼Œå¯ä»¥é€šè¿‡strutsçš„é‡å®šå‘åŠŸèƒ½æ¥å®ç°</li>
</ol>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="strutsé‡å®šå‘çš„å‡ ç§æ–¹å¼">strutsé‡å®šå‘çš„å‡ ç§æ–¹å¼ <a href="#struts%e9%87%8d%e5%ae%9a%e5%90%91%e7%9a%84%e5%87%a0%e7%a7%8d%e6%96%b9%e5%bc%8f" class="anchor">ğŸ”—</a></h2><ul>
<li>dispatcher â€”â€” è¯·æ±‚è½¬å‘åˆ°ä¸€ä¸ªé¡µé¢ ï¼ˆé»˜è®¤ï¼‰,ä¸å¯ä»¥ç”¨è¿™ç§æ–¹å¼è½¬å‘åˆ°ä¸€ä¸ªaction</li>
<li>chain â€”â€” ä¸€ä¸ªactionè¯·æ±‚è½¬å‘è‡³å¦ä¸€ä¸ª action</li>
<li>redirect â€”â€” å“åº”é‡å®šå‘åˆ°ä¸€ä¸ªé¡µé¢ï¼Œä¹Ÿå¯ä»¥å®ç°å“åº”é‡å®šå‘åˆ°action</li>
<li>redirectAction â€”â€” ä¸€ä¸ªactionå“åº”é‡å®šå‘è‡³å¦ä¸€ä¸ª action</li>
</ul>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="strutsé‡å®šå‘çš„å®ä¾‹">strutsé‡å®šå‘çš„å®ä¾‹ <a href="#struts%e9%87%8d%e5%ae%9a%e5%90%91%e7%9a%84%e5%ae%9e%e4%be%8b" class="anchor">ğŸ”—</a></h2><ul>
<li>redirectAction â€”â€” ä¸€ä¸ªactionå“åº”é‡å®šå‘è‡³å¦ä¸€ä¸ª actionï¼Œè¿™ç§æ˜¯ä¸å¸¦å‚æ•°çš„</li>
</ul>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#008000;font-weight:bold">&lt;result</span> <span style="color:#b44">name=</span><span style="color:#b44">&#34;loginsuccess&#34;</span> <span style="color:#b44">type=</span><span style="color:#b44">&#34;redirectAction&#34;</span><span style="color:#008000;font-weight:bold">&gt;</span>story_indexlist<span style="color:#008000;font-weight:bold">&lt;/result&gt;</span>
</code></pre></div><ul>
<li>å¸¦å‚æ•°çš„redirectAction</li>
</ul>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#008000;font-weight:bold">&lt;result</span> <span style="color:#b44">type=</span><span style="color:#b44">&#34;redirect&#34;</span><span style="color:#008000;font-weight:bold">&gt;</span>successAction?name=${name}<span style="color:#008000;font-weight:bold">&lt;/result&gt;</span>
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="æˆ‘çš„é—®é¢˜è§£å†³">æˆ‘çš„é—®é¢˜è§£å†³ <a href="#%e6%88%91%e7%9a%84%e9%97%ae%e9%a2%98%e8%a7%a3%e5%86%b3" class="anchor">ğŸ”—</a></h2><p>æˆ‘çš„é¡¹ç›®çš„é‡å®šå‘å°±éœ€è¦å‚æ•°ï¼Œåœ¨é‡ç°åŠ è½½å¸–å­å’Œè¯„è®ºçš„æ—¶å€™éœ€è¦çŸ¥é“å¸–å­çš„idï¼Œå…·ä½“çš„è§£å†³æ–¹æ¡ˆå¦‚ä¸‹</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#008000;font-weight:bold">&lt;result</span> <span style="color:#b44">name=</span><span style="color:#b44">&#34;add&#34;</span> <span style="color:#b44">type=</span><span style="color:#b44">&#34;redirectAction&#34;</span><span style="color:#008000;font-weight:bold">&gt;</span>story_show?story_id=${comment.story.story_id}<span style="color:#008000;font-weight:bold">&lt;/result&gt;</span>
</code></pre></div><p>åœ¨commentçš„actionä¸­ï¼Œé‡å®šå‘ï¼Œå¹¶è·å–å‚æ•°ï¼Œè¿™é‡Œå¯èƒ½æœ‰é—®é¢˜çš„å°±æ˜¯å‚æ•°çš„è·å–ï¼Œè¿™ä¸ªå‚æ•°çš„è·å–å’Œactionæ–¹æ³•ä¸­çš„å±æ€§è·å–æœ‰å…³ç³»ï¼Œå¯èƒ½æœ‰ä»¥ä¸‹çš„é›†ä¸­æƒ…å†µ</p>
<ul>
<li>æ ¹æ®ä½ çš„actionè·å–è¡¨å•æ•°æ®æ–¹å¼çš„ä¸åŒï¼Œ${}é‡Œé¢çš„å‚æ•°ä¹¦å†™æ–¹å¼ä¹Ÿä¸åŒï¼Œå¦‚æœæ˜¯å±æ€§ï¼Œå¹¶æœ‰getterå’Œsetteræ–¹æ³•ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥å†™å±æ€§å€¼ï¼Œå¦‚æœæ˜¯å…¶ä»–çš„æ–¹å¼è·å–ï¼Œåˆ™è¦æ ¹æ®ä½ çš„æƒ…å†µæ¥è®¾ç½®</li>
<li>å¦‚æœè¿™ä¸ªå‚æ•°æ˜¯å®ä½“å†…çš„å®ä½“å¯¹è±¡ï¼Œæ¯”å¦‚æˆ‘éœ€è¦çš„storyIdï¼Œåˆ™æ˜¯commentå®ä½“å†…çš„ä¸€ä¸ªstoryå¯¹è±¡ï¼Œåœ¨è¿™ä¸ªstoryå¯¹è±¡é‡Œå…·æœ‰storyIdè¿™ä¸ªå€¼ï¼Œé‚£ä¹ˆå°±éœ€è¦ä½¿ç”¨ä¸Šé¢çš„æ–¹å¼<code>${comment.story.story_id}</code>å¦‚æœä½¿ç”¨<code>${comment.story_id}</code>æ˜¯ä¼šæŠ¥é”™<!-- raw HTML omitted -->
æˆ‘çš„comment Actionå¦‚ä¸‹</li>
</ul>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a2f;font-weight:bold">package</span> <span style="color:#00f;font-weight:bold">cn.haigeek.action</span><span style="color:#666">;</span>
<span style="color:#a2f;font-weight:bold">import</span> <span style="color:#00f;font-weight:bold">cn.haigeek.entity.Comment</span><span style="color:#666">;</span>
<span style="color:#a2f;font-weight:bold">import</span> <span style="color:#00f;font-weight:bold">cn.haigeek.service.CommentService</span><span style="color:#666">;</span>
<span style="color:#a2f;font-weight:bold">import</span> <span style="color:#00f;font-weight:bold">com.opensymphony.xwork2.ActionSupport</span><span style="color:#666">;</span>
<span style="color:#a2f;font-weight:bold">import</span> <span style="color:#00f;font-weight:bold">java.util.Date</span><span style="color:#666">;</span>
<span style="color:#080;font-style:italic">/**
</span><span style="color:#080;font-style:italic"> * Created by haigeek on 2017/7/22.
</span><span style="color:#080;font-style:italic"> */</span>
<span style="color:#a2f;font-weight:bold">public</span> <span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">CommentAction</span> <span style="color:#a2f;font-weight:bold">extends</span> ActionSupport  <span style="color:#666">{</span>
    Date date <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold">new</span> Date<span style="color:#666">();</span>
    <span style="color:#a2f;font-weight:bold">private</span> Comment comment<span style="color:#666">;</span>
    <span style="color:#a2f;font-weight:bold">private</span> CommentService commentService<span style="color:#666">;</span>
    <span style="color:#080;font-style:italic">//private Integer storyId;
</span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f;font-weight:bold">public</span> <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">setCommentService</span><span style="color:#666">(</span>CommentService commentService<span style="color:#666">)</span> <span style="color:#666">{</span>
        <span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">.</span><span style="color:#b44">commentService</span> <span style="color:#666">=</span> commentService<span style="color:#666">;</span>
    <span style="color:#666">}</span>
    <span style="color:#a2f;font-weight:bold">public</span> Comment <span style="color:#00a000">getComment</span><span style="color:#666">()</span> <span style="color:#666">{</span>
        <span style="color:#a2f;font-weight:bold">return</span> comment<span style="color:#666">;</span>
    <span style="color:#666">}</span>
    <span style="color:#a2f;font-weight:bold">public</span> <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">setComment</span><span style="color:#666">(</span>Comment comment<span style="color:#666">)</span> <span style="color:#666">{</span>
        <span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">.</span><span style="color:#b44">comment</span> <span style="color:#666">=</span> comment<span style="color:#666">;</span>
    <span style="color:#666">}</span>
    <span style="color:#a2f;font-weight:bold">public</span> String <span style="color:#00a000">add</span><span style="color:#666">(){</span>
        comment<span style="color:#666">.</span><span style="color:#b44">setCommentDate</span><span style="color:#666">(</span>date<span style="color:#666">);</span>
        commentService<span style="color:#666">.</span><span style="color:#b44">add</span><span style="color:#666">(</span>comment<span style="color:#666">);</span>
        <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#b44">&#34;add&#34;</span><span style="color:#666">;</span>
    <span style="color:#666">}</span>
<span style="color:#666">}</span>
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1 id="struts2æ–‡ä»¶ä¸Šä¼ ä»¥ä¸Šä¼ å¤´åƒä¸ºä¾‹">struts2æ–‡ä»¶ä¸Šä¼ ï¼ˆä»¥ä¸Šä¼ å¤´åƒä¸ºä¾‹ï¼‰ <a href="#struts2%e6%96%87%e4%bb%b6%e4%b8%8a%e4%bc%a0%e4%bb%a5%e4%b8%8a%e4%bc%a0%e5%a4%b4%e5%83%8f%e4%b8%ba%e4%be%8b" class="anchor">ğŸ”—</a></h1><p>åœ¨javaçš„sshé¡¹ç›®ä¸­ï¼Œéœ€è¦ä¸ºæ³¨å†Œçš„ç”¨æˆ·è®¾ç½®ä¸€ä¸ªå¤´åƒï¼Œå…·ä½“è§£å†³æ–¹æ¡ˆå¦‚ä¸‹</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="jspè§†å›¾å±‚">jspè§†å›¾å±‚ <a href="#jsp%e8%a7%86%e5%9b%be%e5%b1%82" class="anchor">ğŸ”—</a></h2><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#666">&lt;</span>form action<span style="color:#666">=</span><span style="color:#b44">&#34;${pageContext.request.contextPath }/user_updateavatar.action?user.usid=${user.uid}&#34;</span>
        method<span style="color:#666">=</span>post enctype<span style="color:#666">=</span><span style="color:#b44">&#34;multipart/form-data&#34;</span><span style="color:#666">&gt;</span>
    <span style="color:#666">&lt;</span>input type<span style="color:#666">=</span><span style="color:#b44">&#34;hidden&#34;</span> name<span style="color:#666">=</span><span style="color:#b44">&#34;user.uid&#34;</span> value<span style="color:#666">=</span><span style="color:#b44">&#34;${user.uid }&#34;</span><span style="color:#666">/&gt;</span>
    <span style="color:#666">&lt;</span>div class<span style="color:#666">=</span><span style="color:#b44">&#34;panel panel-default&#34;</span><span style="color:#666">&gt;</span>
        <span style="color:#666">&lt;</span>div class<span style="color:#666">=</span><span style="color:#b44">&#34;panel-body&#34;</span><span style="color:#666">&gt;</span>
            <span style="color:#666">&lt;</span>br<span style="color:#666">&gt;</span>
            <span style="color:#666">&lt;</span>div class<span style="color:#666">=</span><span style="color:#b44">&#34;mdui-card-header-title&#34;</span><span style="color:#666">&gt;</span>å¤´åƒä¸Šä¼ <span style="color:#666">&lt;/</span>div<span style="color:#666">&gt;</span>
            <span style="color:#666">&lt;</span>div class<span style="color:#666">=</span><span style="color:#b44">&#34;mdui-container&#34;</span><span style="color:#666">&gt;</span>
                <span style="color:#666">&lt;</span>input type<span style="color:#666">=</span><span style="color:#b44">&#34;file&#34;</span> name<span style="color:#666">=</span><span style="color:#b44">&#34;avatar&#34;</span><span style="color:#666">&gt;</span>
                <span style="color:#666">&lt;</span>button class<span style="color:#666">=</span><span style="color:#b44">&#34;mdui-btn mdui-btn-dense mdui-color-blue mdui-float-right mdui-m-a-2&#34;</span><span style="color:#666">&gt;</span>
                    ä¿å­˜
                <span style="color:#666">&lt;/</span>button<span style="color:#666">&gt;</span>
            <span style="color:#666">&lt;/</span>div<span style="color:#666">&gt;</span>
        <span style="color:#666">&lt;/</span>div<span style="color:#666">&gt;</span>
    <span style="color:#666">&lt;/</span>div<span style="color:#666">&gt;</span>
<span style="color:#666">&lt;/</span>form<span style="color:#666">&gt;</span>
</code></pre></div><p>inputç±»å‹è¦è®¾ç½®ä¸ºtypeä¸ºFileç±»å‹ï¼Œnameéœ€è¦å¯¹åº”actionä¸­çš„å‘½å</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="actionå±‚">actionå±‚ <a href="#action%e5%b1%82" class="anchor">ğŸ”—</a></h2><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a2f;font-weight:bold">private</span> File avatar<span style="color:#666">;</span><span style="color:#080;font-style:italic">//ä¸Šä¼ æ–‡ä»¶åŸŸ
</span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">private</span> String avatatFileType<span style="color:#666">;</span><span style="color:#080;font-style:italic">//ä¸Šä¼ æ–‡ä»¶ç±»å‹
</span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">private</span> String avatarFileName<span style="color:#666">;</span><span style="color:#080;font-style:italic">//ä¸Šä¼ æ–‡ä»¶åå­—
</span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">private</span> String savePathAvatar<span style="color:#666">;</span><span style="color:#080;font-style:italic">//æ–‡ä»¶å­˜å‚¨ä½ç½®ï¼Œåœ¨struts2ä¸­é…ç½®
</span><span style="color:#080;font-style:italic">//å¯¹åº”çš„getå’Œsetæ–¹æ³•
</span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">public</span> String <span style="color:#00a000">updateavatar</span><span style="color:#666">(){</span>
  <span style="color:#080;font-style:italic">//æ–‡ä»¶åœ¨æœ¬åœ°çš„å…·ä½“å­˜å‚¨ä½ç½®
</span><span style="color:#080;font-style:italic"></span>        String path<span style="color:#666">=</span>ServletActionContext<span style="color:#666">.</span><span style="color:#b44">getServletContext</span><span style="color:#666">().</span><span style="color:#b44">getRealPath</span><span style="color:#666">(</span><span style="color:#b44">&#34;/&#34;</span><span style="color:#666">)+</span>getSavePathAvatar<span style="color:#666">()+</span><span style="color:#b44">&#34;\\&#34;</span><span style="color:#666">+</span>getAvatarFileName<span style="color:#666">();</span>
  <span style="color:#080;font-style:italic">//æ–‡ä»¶å­˜å‚¨åˆ°æ•°æ®åº“çš„è·¯å¾„ï¼ˆæ ¹æ®å®é™…æƒ…å†µæ¥è®¾ç½®ï¼‰
</span><span style="color:#080;font-style:italic"></span>        String path2<span style="color:#666">=</span>getSavePathAvatar<span style="color:#666">()+</span><span style="color:#b44">&#34;/&#34;</span><span style="color:#666">+</span>getAvatarFileName<span style="color:#666">();</span>
        <span style="color:#a2f;font-weight:bold">try</span><span style="color:#666">{</span>
            FileOutputStream fos<span style="color:#666">=</span><span style="color:#a2f;font-weight:bold">new</span> FileOutputStream<span style="color:#666">(</span>path<span style="color:#666">);</span>
            FileInputStream fis<span style="color:#666">=</span><span style="color:#a2f;font-weight:bold">new</span> FileInputStream<span style="color:#666">(</span>getAvatar<span style="color:#666">());</span>
            <span style="color:#0b0;font-weight:bold">byte</span><span style="color:#666">[]</span>buffer<span style="color:#666">=</span><span style="color:#a2f;font-weight:bold">new</span> <span style="color:#0b0;font-weight:bold">byte</span><span style="color:#666">[</span>1024<span style="color:#666">];</span>
            <span style="color:#0b0;font-weight:bold">int</span> len<span style="color:#666">=</span>0<span style="color:#666">;</span>
            <span style="color:#a2f;font-weight:bold">try</span> <span style="color:#666">{</span>
                <span style="color:#a2f;font-weight:bold">while</span> <span style="color:#666">((</span>len<span style="color:#666">=</span>fis<span style="color:#666">.</span><span style="color:#b44">read</span><span style="color:#666">(</span>buffer<span style="color:#666">))&gt;</span>0<span style="color:#666">){</span>
                    fos<span style="color:#666">.</span><span style="color:#b44">write</span><span style="color:#666">(</span>buffer<span style="color:#666">,</span>0<span style="color:#666">,</span>len<span style="color:#666">);</span>
                <span style="color:#666">}</span>
            <span style="color:#666">}</span> <span style="color:#a2f;font-weight:bold">catch</span> <span style="color:#666">(</span>IOException e<span style="color:#666">)</span> <span style="color:#666">{</span>
                e<span style="color:#666">.</span><span style="color:#b44">printStackTrace</span><span style="color:#666">();</span>
            <span style="color:#666">}</span>
        <span style="color:#666">}</span> <span style="color:#a2f;font-weight:bold">catch</span> <span style="color:#666">(</span>FileNotFoundException e<span style="color:#666">)</span> <span style="color:#666">{</span>
            e<span style="color:#666">.</span><span style="color:#b44">printStackTrace</span><span style="color:#666">();</span>
        <span style="color:#666">}</span>
  <span style="color:#080;font-style:italic">//æ¥å—é¡µé¢ä¼ è¿‡æ¥çš„ç”¨æˆ·id
</span><span style="color:#080;font-style:italic"></span>        <span style="color:#0b0;font-weight:bold">int</span> uid<span style="color:#666">=</span>user<span style="color:#666">.</span><span style="color:#b44">getUid</span><span style="color:#666">();</span>
        User user4<span style="color:#666">=</span>userService<span style="color:#666">.</span><span style="color:#b44">findOne</span><span style="color:#666">(</span>uid<span style="color:#666">);</span>
        user4<span style="color:#666">.</span><span style="color:#b44">setAvatar</span><span style="color:#666">(</span>path2<span style="color:#666">);</span>
  <span style="color:#080;font-style:italic">//è°ƒç”¨serviceè¿›è¡Œè·¯å¾„çš„å­˜å‚¨
</span><span style="color:#080;font-style:italic"></span>        userService<span style="color:#666">.</span><span style="color:#b44">update</span><span style="color:#666">(</span>user4<span style="color:#666">);</span>
        <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#b44">&#34;update&#34;</span><span style="color:#666">;</span>
    <span style="color:#666">}</span>
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="strutsxmlçš„é…ç½®">Struts.xmlçš„é…ç½® <a href="#strutsxml%e7%9a%84%e9%85%8d%e7%bd%ae" class="anchor">ğŸ”—</a></h2><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#008000;font-weight:bold">&lt;action</span> <span style="color:#b44">name=</span><span style="color:#b44">&#34;user_*&#34;</span> <span style="color:#b44">class=</span><span style="color:#b44">&#34;userAction&#34;</span> <span style="color:#b44">method=</span><span style="color:#b44">&#34;{1}&#34;</span><span style="color:#008000;font-weight:bold">&gt;</span>
  <span style="color:#080;font-style:italic">&lt;!-- åŠ¨æ€è®¾ç½®å­˜å‚¨ä½ç½®çš„å€¼ --&gt;</span>  
<span style="color:#008000;font-weight:bold">&lt;param</span> <span style="color:#b44">name=</span><span style="color:#b44">&#34;savePathAvatar&#34;</span><span style="color:#008000;font-weight:bold">&gt;</span>/upload/avatar<span style="color:#008000;font-weight:bold">&lt;/param&gt;</span>
<span style="color:#008000;font-weight:bold">&lt;/action&gt;</span>
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="æ˜¾ç¤º">æ˜¾ç¤º <a href="#%e6%98%be%e7%a4%ba" class="anchor">ğŸ”—</a></h2><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#008000;font-weight:bold">&lt;img</span> <span style="color:#b44">src=</span><span style="color:#b44">&#34;${story.user.avatar}&#34;</span><span style="color:#008000;font-weight:bold">/&gt;&lt;/div&gt;</span>
</code></pre></div><p>æˆ‘çš„é¡¹ç›®æ˜¯æ˜¾ç¤ºè¿™ä¸ªstoryå¯¹åº”çš„ç”¨æˆ·çš„å¤´åƒ</p>
<h1 id="sshæ¡†æ¶å®ç°åˆ†é¡µæ˜¾ç¤º">sshæ¡†æ¶å®ç°åˆ†é¡µæ˜¾ç¤º <a href="#ssh%e6%a1%86%e6%9e%b6%e5%ae%9e%e7%8e%b0%e5%88%86%e9%a1%b5%e6%98%be%e7%a4%ba" class="anchor">ğŸ”—</a></h1><h2 id="ç›®çš„">ç›®çš„ <a href="#%e7%9b%ae%e7%9a%84" class="anchor">ğŸ”—</a></h2><p>æœ€è¿‘åœ¨å†™çš„ä¸€ä¸ªjavaå°è®ºå›çš„é¦–é¡µæƒ³è¦å®ç°é¦–é¡µå¸–å­åˆ—è¡¨çš„åˆ†é¡µæ˜¾ç¤º</p>
<h2 id="å®ç°">å®ç° <a href="#%e5%ae%9e%e7%8e%b0" class="anchor">ğŸ”—</a></h2><h3 id="åˆ†é¡µç±»">åˆ†é¡µç±» <a href="#%e5%88%86%e9%a1%b5%e7%b1%bb" class="anchor">ğŸ”—</a></h3><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a2f;font-weight:bold">package</span> <span style="color:#00f;font-weight:bold">cn.haigeek.entity</span><span style="color:#666">;</span>

<span style="color:#080;font-style:italic">/**
</span><span style="color:#080;font-style:italic"> * Created by haigeek on 2017/7/16.
</span><span style="color:#080;font-style:italic"> */</span>
<span style="color:#a2f;font-weight:bold">public</span> <span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">pageShow</span> <span style="color:#666">{</span>
    <span style="color:#080;font-style:italic">//æ­¤ç±»ç”¨äºåˆ†é¡µ
</span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f;font-weight:bold">private</span> <span style="color:#0b0;font-weight:bold">int</span> pageNow<span style="color:#666">;</span><span style="color:#080;font-style:italic">//å½“å‰é¡µ
</span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f;font-weight:bold">private</span> <span style="color:#0b0;font-weight:bold">int</span> totalSize<span style="color:#666">;</span><span style="color:#080;font-style:italic">//æ€»æ¡æ•°
</span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f;font-weight:bold">private</span> <span style="color:#0b0;font-weight:bold">int</span> totalPage<span style="color:#666">;</span><span style="color:#080;font-style:italic">//æ€»é¡µæ•°
</span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f;font-weight:bold">private</span> <span style="color:#0b0;font-weight:bold">int</span> pageSize <span style="color:#666">=</span> 10<span style="color:#666">;</span><span style="color:#080;font-style:italic">//æ¯é¡µæ˜¾ç¤ºæ¡æ•°
</span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f;font-weight:bold">private</span> <span style="color:#0b0;font-weight:bold">boolean</span> hasPre<span style="color:#666">;</span><span style="color:#080;font-style:italic">//æ˜¯å¦æœ‰ä¸Šä¸€é¡µ
</span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f;font-weight:bold">private</span> <span style="color:#0b0;font-weight:bold">boolean</span> hasNext<span style="color:#666">;</span><span style="color:#080;font-style:italic">//æ˜¯å¦æœ‰ä¸‹ä¸€é¡µ
</span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f;font-weight:bold">private</span> <span style="color:#0b0;font-weight:bold">boolean</span> hasFirst<span style="color:#666">;</span><span style="color:#080;font-style:italic">//æ˜¯å¦æœ‰é¦–é¡µ
</span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f;font-weight:bold">private</span> <span style="color:#0b0;font-weight:bold">boolean</span> hasLast<span style="color:#666">;</span><span style="color:#080;font-style:italic">//æ˜¯å¦æœ‰å°¾é¡µ
</span><span style="color:#080;font-style:italic"></span>
    <span style="color:#a2f;font-weight:bold">public</span> <span style="color:#00a000">pageShow</span><span style="color:#666">(</span><span style="color:#0b0;font-weight:bold">int</span> pageNow<span style="color:#666">,</span> <span style="color:#0b0;font-weight:bold">int</span> totalSize<span style="color:#666">)</span> <span style="color:#666">{</span>
        <span style="color:#080;font-style:italic">//æ„é€ æ–¹æ³•
</span><span style="color:#080;font-style:italic"></span>        <span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">.</span><span style="color:#b44">setPageNow</span><span style="color:#666">(</span>pageNow<span style="color:#666">);</span>
        <span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">.</span><span style="color:#b44">setTotalSize</span><span style="color:#666">(</span>totalSize<span style="color:#666">);</span>
    <span style="color:#666">}</span>

    <span style="color:#a2f;font-weight:bold">public</span> <span style="color:#00a000">pageShow</span><span style="color:#666">(</span><span style="color:#0b0;font-weight:bold">int</span> pageNow<span style="color:#666">,</span> <span style="color:#0b0;font-weight:bold">int</span> totalSize<span style="color:#666">,</span> <span style="color:#0b0;font-weight:bold">int</span> pageSize<span style="color:#666">)</span> <span style="color:#666">{</span><span style="color:#080;font-style:italic">//å¯åŠ¨æ€æ”¹å˜æ¯é¡µæ¡æ•°
</span><span style="color:#080;font-style:italic"></span>        <span style="color:#080;font-style:italic">//æ„é€ æ–¹æ³•
</span><span style="color:#080;font-style:italic"></span>        <span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">.</span><span style="color:#b44">setPageNow</span><span style="color:#666">(</span>pageNow<span style="color:#666">);</span>
        <span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">.</span><span style="color:#b44">setTotalSize</span><span style="color:#666">(</span>totalSize<span style="color:#666">);</span>
        <span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">.</span><span style="color:#b44">pageSize</span> <span style="color:#666">=</span> pageSize<span style="color:#666">;</span>
    <span style="color:#666">}</span>

    <span style="color:#a2f;font-weight:bold">public</span> <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">setPageNow</span><span style="color:#666">(</span><span style="color:#0b0;font-weight:bold">int</span> pageNow<span style="color:#666">)</span> <span style="color:#666">{</span>
        <span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">.</span><span style="color:#b44">pageNow</span> <span style="color:#666">=</span> pageNow<span style="color:#666">;</span>
    <span style="color:#666">}</span>

    <span style="color:#a2f;font-weight:bold">public</span> <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">getPageNow</span><span style="color:#666">()</span> <span style="color:#666">{</span>
        <span style="color:#a2f;font-weight:bold">return</span> pageNow<span style="color:#666">;</span>
    <span style="color:#666">}</span>

    <span style="color:#a2f;font-weight:bold">public</span> <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">setTotalSize</span><span style="color:#666">(</span><span style="color:#0b0;font-weight:bold">int</span> totalSize<span style="color:#666">)</span> <span style="color:#666">{</span>
        <span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">.</span><span style="color:#b44">totalSize</span> <span style="color:#666">=</span> totalSize<span style="color:#666">;</span>
    <span style="color:#666">}</span>

    <span style="color:#a2f;font-weight:bold">public</span> <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">getTotalSize</span><span style="color:#666">()</span> <span style="color:#666">{</span>
        <span style="color:#a2f;font-weight:bold">return</span> totalSize<span style="color:#666">;</span>
    <span style="color:#666">}</span>

    <span style="color:#a2f;font-weight:bold">public</span> <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">setPageSize</span><span style="color:#666">(</span><span style="color:#0b0;font-weight:bold">int</span> pageSize<span style="color:#666">)</span> <span style="color:#666">{</span>
        <span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">.</span><span style="color:#b44">pageSize</span> <span style="color:#666">=</span> pageSize<span style="color:#666">;</span>
    <span style="color:#666">}</span>

    <span style="color:#a2f;font-weight:bold">public</span> <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">getPageSize</span><span style="color:#666">()</span> <span style="color:#666">{</span>
        <span style="color:#a2f;font-weight:bold">return</span> pageSize<span style="color:#666">;</span>
    <span style="color:#666">}</span>

    <span style="color:#a2f;font-weight:bold">public</span> <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">getTotalPage</span><span style="color:#666">()</span> <span style="color:#666">{</span><span style="color:#080;font-style:italic">//æ€»é¡µæ•° = æ€»æ¡æ•°/æ¯é¡µæ˜¾ç¤ºæ¡æ•°
</span><span style="color:#080;font-style:italic"></span>        totalPage <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">.</span><span style="color:#b44">getTotalSize</span><span style="color:#666">()</span> <span style="color:#666">/</span> <span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">.</span><span style="color:#b44">getPageSize</span><span style="color:#666">();</span>
        <span style="color:#a2f;font-weight:bold">if</span> <span style="color:#666">(</span><span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">.</span><span style="color:#b44">getTotalSize</span><span style="color:#666">()</span> <span style="color:#666">%</span> <span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">.</span><span style="color:#b44">getPageSize</span><span style="color:#666">()</span> <span style="color:#666">!=</span> 0<span style="color:#666">)</span> <span style="color:#666">{</span>
            totalPage<span style="color:#666">++;</span> <span style="color:#080;font-style:italic">//è‹¥ä½™æ•°ä¸ºä¸0 åˆ™è¦å¤šåŠ ä¸€é¡µ
</span><span style="color:#080;font-style:italic"></span>        <span style="color:#666">}</span>
        <span style="color:#a2f;font-weight:bold">return</span> totalPage<span style="color:#666">;</span>
    <span style="color:#666">}</span>

    <span style="color:#a2f;font-weight:bold">public</span> <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">setTotalPage</span><span style="color:#666">(</span><span style="color:#0b0;font-weight:bold">int</span> totalPage<span style="color:#666">)</span> <span style="color:#666">{</span>
        <span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">.</span><span style="color:#b44">totalPage</span> <span style="color:#666">=</span> totalPage<span style="color:#666">;</span>
    <span style="color:#666">}</span>

    <span style="color:#a2f;font-weight:bold">public</span> <span style="color:#0b0;font-weight:bold">boolean</span> <span style="color:#00a000">isHasPre</span><span style="color:#666">()</span> <span style="color:#666">{</span><span style="color:#080;font-style:italic">//æ˜¯å¦æœ‰ä¸Šä¸€é¡µ   é™¤ç¬¬ä¸€é¡µä»¥å¤–éƒ½æœ‰ä¸Šä¸€é¡µ  è¯´æ˜æœ‰é¦–é¡µçš„å°±æœ‰ä¸Šä¸€é¡µ
</span><span style="color:#080;font-style:italic"></span>        <span style="color:#a2f;font-weight:bold">if</span> <span style="color:#666">(</span><span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">.</span><span style="color:#b44">isHasFirst</span><span style="color:#666">())</span> <span style="color:#666">{</span>
            <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f;font-weight:bold">true</span><span style="color:#666">;</span>
        <span style="color:#666">}</span> <span style="color:#a2f;font-weight:bold">else</span> <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f;font-weight:bold">false</span><span style="color:#666">;</span>
    <span style="color:#666">}</span>

    <span style="color:#a2f;font-weight:bold">public</span> <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">setHasPre</span><span style="color:#666">(</span><span style="color:#0b0;font-weight:bold">boolean</span> hasPre<span style="color:#666">)</span> <span style="color:#666">{</span>
        <span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">.</span><span style="color:#b44">hasPre</span> <span style="color:#666">=</span> hasPre<span style="color:#666">;</span>
    <span style="color:#666">}</span>

    <span style="color:#a2f;font-weight:bold">public</span> <span style="color:#0b0;font-weight:bold">boolean</span> <span style="color:#00a000">isHasNext</span><span style="color:#666">()</span> <span style="color:#666">{</span><span style="color:#080;font-style:italic">//æ˜¯å¦æœ‰ä¸‹ä¸€é¡µ   é™¤æœ€åä¸€é¡µä»¥å¤–éƒ½æœ‰ä¸‹ä¸€é¡µ  è¯´æ˜æœ‰å°¾é¡µçš„å°±æœ‰ä¸‹ä¸€é¡µ
</span><span style="color:#080;font-style:italic"></span>        <span style="color:#a2f;font-weight:bold">if</span> <span style="color:#666">(</span><span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">.</span><span style="color:#b44">isHasLast</span><span style="color:#666">())</span> <span style="color:#666">{</span>
            <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f;font-weight:bold">true</span><span style="color:#666">;</span>
        <span style="color:#666">}</span> <span style="color:#a2f;font-weight:bold">else</span> <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f;font-weight:bold">false</span><span style="color:#666">;</span>
    <span style="color:#666">}</span>

    <span style="color:#a2f;font-weight:bold">public</span> <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">setHasNext</span><span style="color:#666">(</span><span style="color:#0b0;font-weight:bold">boolean</span> hasNext<span style="color:#666">)</span> <span style="color:#666">{</span>
        <span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">.</span><span style="color:#b44">hasNext</span> <span style="color:#666">=</span> hasNext<span style="color:#666">;</span>
    <span style="color:#666">}</span>

    <span style="color:#a2f;font-weight:bold">public</span> <span style="color:#0b0;font-weight:bold">boolean</span> <span style="color:#00a000">isHasFirst</span><span style="color:#666">()</span> <span style="color:#666">{</span><span style="color:#080;font-style:italic">//æ˜¯å¦æœ‰é¦–é¡µ é™¤ç¬¬ä¸€é¡µä»¥å¤–éƒ½æœ‰é¦–é¡µ
</span><span style="color:#080;font-style:italic"></span>        <span style="color:#a2f;font-weight:bold">if</span> <span style="color:#666">(</span><span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">.</span><span style="color:#b44">pageNow</span> <span style="color:#666">==</span> 1<span style="color:#666">)</span><span style="color:#080;font-style:italic">//æ˜¯ç¬¬ä¸€é¡µå°±æ²¡æœ‰é¦–é¡µ
</span><span style="color:#080;font-style:italic"></span>            <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f;font-weight:bold">false</span><span style="color:#666">;</span>
        <span style="color:#a2f;font-weight:bold">else</span>
            <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f;font-weight:bold">true</span><span style="color:#666">;</span>
    <span style="color:#666">}</span>

    <span style="color:#a2f;font-weight:bold">public</span> <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">setHasFirst</span><span style="color:#666">(</span><span style="color:#0b0;font-weight:bold">boolean</span> hasFirst<span style="color:#666">)</span> <span style="color:#666">{</span>
        <span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">.</span><span style="color:#b44">hasFirst</span> <span style="color:#666">=</span> hasFirst<span style="color:#666">;</span>
    <span style="color:#666">}</span>

    <span style="color:#a2f;font-weight:bold">public</span> <span style="color:#0b0;font-weight:bold">boolean</span> <span style="color:#00a000">isHasLast</span><span style="color:#666">()</span> <span style="color:#666">{</span><span style="color:#080;font-style:italic">//æ˜¯å¦æœ‰å°¾é¡µ  é™¤æœ€åä¸€é¡µä»¥å¤–éƒ½æœ‰å°¾é¡µ
</span><span style="color:#080;font-style:italic"></span>        <span style="color:#a2f;font-weight:bold">if</span> <span style="color:#666">(</span>pageNow <span style="color:#666">==</span> <span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">.</span><span style="color:#b44">getTotalPage</span><span style="color:#666">())</span> <span style="color:#666">{</span><span style="color:#080;font-style:italic">//æœ€åä¸€é¡µ
</span><span style="color:#080;font-style:italic"></span>            <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f;font-weight:bold">false</span><span style="color:#666">;</span>
        <span style="color:#666">}</span> <span style="color:#a2f;font-weight:bold">else</span> <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f;font-weight:bold">true</span><span style="color:#666">;</span>
    <span style="color:#666">}</span>

    <span style="color:#a2f;font-weight:bold">public</span> <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">setHasLast</span><span style="color:#666">(</span><span style="color:#0b0;font-weight:bold">boolean</span> hasLast<span style="color:#666">)</span> <span style="color:#666">{</span>
        <span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">.</span><span style="color:#b44">hasLast</span> <span style="color:#666">=</span> hasLast<span style="color:#666">;</span>
    <span style="color:#666">}</span>
<span style="color:#666">}</span>
</code></pre></div><h3 id="ç¼–å†™action">ç¼–å†™action <a href="#%e7%bc%96%e5%86%99action" class="anchor">ğŸ”—</a></h3><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a2f;font-weight:bold">public</span> String <span style="color:#00a000">getAllStory</span><span style="color:#666">(){</span>
		List <span style="color:#666">&lt;</span>Story<span style="color:#666">&gt;</span>StoryList<span style="color:#666">=</span>storyService<span style="color:#666">.</span><span style="color:#b44">getAllStory</span><span style="color:#666">(</span>pageNow<span style="color:#666">,</span>pageSize<span style="color:#666">);</span>
  			<span style="color:#080;font-style:italic">//æ”¾è¿›åŸŸå¯¹è±¡
</span><span style="color:#080;font-style:italic"></span>			ServletActionContext<span style="color:#666">.</span><span style="color:#b44">getRequest</span><span style="color:#666">().</span><span style="color:#b44">setAttribute</span><span style="color:#666">(</span><span style="color:#b44">&#34;StoryList&#34;</span><span style="color:#666">,</span> StoryList<span style="color:#666">);</span>
  			<span style="color:#080;font-style:italic">//æ”¾å…¥requestå¯¹è±¡
</span><span style="color:#080;font-style:italic"></span>			Map request<span style="color:#666">=</span> <span style="color:#666">(</span>Map<span style="color:#666">)</span> ActionContext<span style="color:#666">.</span><span style="color:#b44">getContext</span><span style="color:#666">().</span><span style="color:#b44">get</span><span style="color:#666">(</span><span style="color:#b44">&#34;request&#34;</span><span style="color:#666">);</span>
			pageShow page<span style="color:#666">=</span><span style="color:#a2f;font-weight:bold">new</span> pageShow<span style="color:#666">(</span>pageNow<span style="color:#666">,</span>storyService<span style="color:#666">.</span><span style="color:#b44">findStorySize</span><span style="color:#666">(),</span>pageSize<span style="color:#666">);</span>
			request<span style="color:#666">.</span><span style="color:#b44">put</span><span style="color:#666">(</span><span style="color:#b44">&#34;page&#34;</span><span style="color:#666">,</span>page<span style="color:#666">);</span>
			<span style="color:#a2f;font-weight:bold">return</span> <span style="color:#b44">&#34;getAllStory&#34;</span><span style="color:#666">;</span>
		<span style="color:#666">}</span>
</code></pre></div><h3 id="ç¼–å†™serviceå±‚">ç¼–å†™serviceå±‚ <a href="#%e7%bc%96%e5%86%99service%e5%b1%82" class="anchor">ğŸ”—</a></h3><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">	<span style="color:#080;font-style:italic">//serviceå±‚
</span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">public</span> List <span style="color:#666">&lt;</span>Story<span style="color:#666">&gt;</span>getAllStory<span style="color:#666">(</span><span style="color:#0b0;font-weight:bold">int</span> page<span style="color:#666">,</span><span style="color:#0b0;font-weight:bold">int</span> pageSize<span style="color:#666">){</span>
        <span style="color:#a2f;font-weight:bold">return</span> storyDao<span style="color:#666">.</span><span style="color:#b44">getAllStory</span><span style="color:#666">(</span>page<span style="color:#666">,</span>pageSize<span style="color:#666">);</span>
    <span style="color:#666">}</span>
    <span style="color:#080;font-style:italic">//è·å–å¸–å­æ•°ç›®
</span><span style="color:#080;font-style:italic"></span> <span style="color:#a2f;font-weight:bold">public</span> <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">findStorySize</span><span style="color:#666">(){</span>
        <span style="color:#a2f;font-weight:bold">return</span> storyDao<span style="color:#666">.</span><span style="color:#b44">findStorySize</span><span style="color:#666">();</span>
  	<span style="color:#666">}</span>
</code></pre></div><h3 id="daoæ¥å£å±‚">Daoæ¥å£å±‚ <a href="#dao%e6%8e%a5%e5%8f%a3%e5%b1%82" class="anchor">ğŸ”—</a></h3><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">    <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">findStorySize</span><span style="color:#666">();</span>

    List <span style="color:#666">&lt;</span>Story<span style="color:#666">&gt;</span>getAllStory<span style="color:#666">(</span><span style="color:#0b0;font-weight:bold">int</span> page<span style="color:#666">,</span> <span style="color:#0b0;font-weight:bold">int</span> pageSize<span style="color:#666">);</span>
</code></pre></div><h3 id="daoå±‚çš„å®ç°å±‚">Daoå±‚çš„å®ç°å±‚ <a href="#dao%e5%b1%82%e7%9a%84%e5%ae%9e%e7%8e%b0%e5%b1%82" class="anchor">ğŸ”—</a></h3><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a2f;font-weight:bold">public</span> <span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">StoryDaoImpl</span> <span style="color:#a2f;font-weight:bold">extends</span> HibernateDaoSupport <span style="color:#a2f;font-weight:bold">implements</span> StoryDao <span style="color:#666">{</span>
<span style="color:#a2f;font-weight:bold">public</span> <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">findStorySize</span><span style="color:#666">()</span> <span style="color:#666">{</span>
        Session session<span style="color:#666">=</span>getSessionFactory<span style="color:#666">().</span><span style="color:#b44">openSession</span><span style="color:#666">();</span>
        String hql <span style="color:#666">=</span> <span style="color:#b44">&#34;from Story &#34;</span><span style="color:#666">;</span>
        <span style="color:#0b0;font-weight:bold">int</span> size <span style="color:#666">=</span> session<span style="color:#666">.</span><span style="color:#b44">createQuery</span><span style="color:#666">(</span>hql<span style="color:#666">).</span><span style="color:#b44">list</span><span style="color:#666">().</span><span style="color:#b44">size</span><span style="color:#666">();</span>
        session<span style="color:#666">.</span><span style="color:#b44">close</span><span style="color:#666">();</span>
        <span style="color:#a2f;font-weight:bold">return</span> size<span style="color:#666">;</span>
    <span style="color:#666">}</span>
    <span style="color:#a2f;font-weight:bold">public</span> List<span style="color:#666">&lt;</span>Story<span style="color:#666">&gt;</span> <span style="color:#00a000">getAllStory</span><span style="color:#666">(</span><span style="color:#0b0;font-weight:bold">int</span> pageNow<span style="color:#666">,</span> <span style="color:#0b0;font-weight:bold">int</span> pageSize<span style="color:#666">)</span> <span style="color:#666">{</span>
    <span style="color:#080;font-style:italic">//è·å–sessionçš„æ–¹å¼å¾ˆé‡è¦ï¼Œè¿™é‡Œçš„daoå±‚æ˜¯ç»§æ‰¿äº†HibernateDaoSupportæ¥å®ç°daoæ¥å£
</span><span style="color:#080;font-style:italic"></span>        Session session<span style="color:#666">=</span><span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">.</span><span style="color:#b44">getHibernateTemplate</span><span style="color:#666">().</span><span style="color:#b44">getSessionFactory</span><span style="color:#666">().</span><span style="color:#b44">getCurrentSession</span><span style="color:#666">();</span>
        String hql<span style="color:#666">=</span><span style="color:#b44">&#34;from Story order by story_id desc &#34;</span><span style="color:#666">;</span>
        Query query <span style="color:#666">=</span> session<span style="color:#666">.</span><span style="color:#b44">createQuery</span><span style="color:#666">(</span>hql<span style="color:#666">);</span><span style="color:#080;font-style:italic">//æ‰§è¡ŒæŸ¥è¯¢æ“ä½œ
</span><span style="color:#080;font-style:italic"></span>        query<span style="color:#666">.</span><span style="color:#b44">setFirstResult</span><span style="color:#666">((</span>pageNow <span style="color:#666">-</span> 1<span style="color:#666">)</span> <span style="color:#666">*</span> pageSize<span style="color:#666">);</span>
        query<span style="color:#666">.</span><span style="color:#b44">setMaxResults</span><span style="color:#666">(</span>pageSize<span style="color:#666">);</span>
        List <span style="color:#666">&lt;</span>Story<span style="color:#666">&gt;</span> StoryList <span style="color:#666">=</span> query<span style="color:#666">.</span><span style="color:#b44">list</span><span style="color:#666">();</span>
        <span style="color:#a2f;font-weight:bold">return</span> StoryList<span style="color:#666">;</span>

    <span style="color:#666">}</span>
 <span style="color:#666">}</span>
</code></pre></div><h3 id="è§†å›¾å±‚">è§†å›¾å±‚ <a href="#%e8%a7%86%e5%9b%be%e5%b1%82" class="anchor">ğŸ”—</a></h3><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">&lt;div class=&#34;panel-body&#34;&gt;
    &lt;c:forEach items=&#34;${StoryList }&#34; var=&#34;story&#34;&gt;
        &lt;ul class=&#34;mdui-list&#34;&gt;
            &lt;a href=&#34;${pageContext.request.contextPath }/story_show.action?story_id=${story.story_id}&#34;&gt;
                &lt;li class=&#34;mdui-list-item mdui-ripple&#34;&gt;
                    &lt;div class=&#34;mdui-list-item-avatar&#34;&gt;&lt;img src=&#34;avatar1.jpg&#34;/&gt;&lt;/div&gt;
                    &lt;div class=&#34;mdui-list-item-content&#34;&gt;
                        &lt;div class=&#34;mdui-list-item-title mdui-list-item-two-line&#34;&gt;${story.story_title}&lt;/div&gt;
                        &lt;div class=&#34;mdui-list-item-text mdui-list-item-one-line&#34;&gt; ${story.user.username}å‘è¡¨åœ¨è¯´å¤©è°ˆåœ°
                            æœ€åå›å¤ï¼šhaigeek 2017.06.07
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/li&gt;
            &lt;/a&gt;
        &lt;/ul&gt;
    &lt;/c:forEach&gt;
    &lt;s:set name=&#34;page&#34; value=&#34;#request.page&#34;&gt;&lt;/s:set&gt;
    &lt;nav aria-label=&#34;Page navigation&#34;&gt;
        &lt;ul class=&#34;pagination center-block&#34;&gt;
            &lt;s:if test=&#34;#page.hasPre&#34;&gt;
            &lt;li&gt;
                &lt;a href=story_getAllStory?pageNow=&lt;s:property value=&#34;#page.pageNow-1&#34;/&gt;
                aria-label=&#34;Previous&#34;&gt;
                &lt;span aria-hidden=&#34;true&#34;&gt;&amp;laquo;&lt;/span&gt;
                &lt;/a&gt;
            &lt;/li&gt;
            &lt;/s:if&gt;
                &lt;s:if test=&#34;#page.hasFirst&#34;&gt;
                &lt;li&gt;
                    &lt;a href=&#34;story_getAllStory?pageNow=1&#34;
                        aria-label=&#34;Previous&#34;&gt;
                        &lt;span aria-hidden=&#34;true&#34;&gt;é¦–é¡µ&lt;/span&gt;
                    &lt;/a&gt;
                &lt;/li&gt;
                &lt;/s:if&gt;

            &lt;li&gt;&lt;a href=&#34;story_getAllStory?pageNow=1&#34;&gt;1&lt;/a&gt;&lt;/li&gt;
            &lt;li&gt;&lt;a href=&#34;story_getAllStory?pageNow=2&#34;&gt;2&lt;/a&gt;&lt;/li&gt;
            &lt;li&gt;&lt;a href=&#34;story_getAllStory?pageNow=3&#34;&gt;3&lt;/a&gt;&lt;/li&gt;
            &lt;li&gt;&lt;a href=&#34;story_getAllStory?pageNow=4&#34;&gt;4&lt;/a&gt;&lt;/li&gt;
            &lt;li&gt;&lt;a href=&#34;story_getAllStory?pageNow=5&#34;&gt;5&lt;/a&gt;&lt;/li&gt;
            &lt;s:if test=&#34;#page.hasLast&#34;&gt;
            &lt;li&gt;
                &lt;a href=story_getAllStory?pageNow=&lt;s:property value=&#34;#page.totalPage&#34;/&gt;
                    aria-label=&#34;Previous&#34;&gt;
                    &lt;span aria-hidden=&#34;true&#34;&gt;å°¾é¡µ&lt;/span&gt;
                &lt;/a&gt;
            &lt;/li&gt;
            &lt;/s:if&gt;
            &lt;s:if test=&#34;#page.hasNext&#34;&gt;
            &lt;li&gt;
                &lt;a href=&#34;story_getAllStory?pageNow=&lt;s:property value=&#34;#page.pageNow+1&#34; /&gt; &#34;
                    aria-label=&#34;Next&#34;&gt;
                    &lt;span aria-hidden=&#34;true&#34;&gt;&amp;raquo;&lt;/span&gt;
                &lt;/a&gt;
            &lt;/li&gt;
            &lt;/s:if&gt;
        &lt;/ul&gt;

    &lt;/nav&gt;
&lt;/div&gt;
</code></pre></div><p>è§†å›¾ä½¿ç”¨äº†ä¸€äº›æ ·å¼ï¼ˆbootstrapç­‰ï¼‰ï¼Œä¸»è¦æ˜¯æ ‡ç­¾çš„ä½¿ç”¨ï¼Œéœ€è¦åŠ å…¥</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">&lt;%@ taglib prefix=&#34;c&#34; uri=&#34;http://java.sun.com/jsp/jstl/core&#34; %&gt;
&lt;%@ taglib uri=&#34;/struts-tags&#34; prefix=&#34;s&#34; %&gt;
</code></pre></div><h3 id="é…ç½®æ–‡ä»¶">é…ç½®æ–‡ä»¶ <a href="#%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6" class="anchor">ğŸ”—</a></h3><p>é…ç½®struts.xmlå’Œspringé…ç½®æ–‡ä»¶å³å¯ï¼Œæˆ‘çš„é¡¹ç›®ä¸»è¦æ˜¯æ·»åŠ åŠŸèƒ½ï¼Œé…ç½®æ–‡ä»¶å·²ç»é…ç½®å¥½ï¼Œåªè´´äº†æ ¸å¿ƒçš„ä»£ç ï¼Œæœ€ååœ¨struts.xmlæ·»åŠ ä¸€é¡¹é…ç½®å³å¯</p>
    </div>

    
        <div class="tags">
            
                <a href="https://haigeek.me/tags/struts2">struts2</a>
            
                <a href="https://haigeek.me/tags/java-web">java web</a>
            
        </div>
    
    
     
  <div id="comment">
    
    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "your-disqus-shortname" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </div>


</section>


    </main>
    
    <footer id="footer">
    
        <div id="social">


    <a class="symbol" href="https://github.com/haigeek" target="_blank">
        
        <svg fill="#bbbbbb" width="28" height="28"  viewBox="0 0 72 72" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    
    <title>Github</title>
    <desc>Created with Sketch.</desc>
    <defs></defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="Social-Icons---Rounded-Black" transform="translate(-264.000000, -939.000000)">
            <g id="Github" transform="translate(264.000000, 939.000000)">
                <path d="M8,72 L64,72 C68.418278,72 72,68.418278 72,64 L72,8 C72,3.581722 68.418278,-8.11624501e-16 64,0 L8,0 C3.581722,8.11624501e-16 -5.41083001e-16,3.581722 0,8 L0,64 C5.41083001e-16,68.418278 3.581722,72 8,72 Z" id="Rounded" fill="#bbbbbb"></path>
                <path d="M35.9985,13 C22.746,13 12,23.7870921 12,37.096644 C12,47.7406712 18.876,56.7718301 28.4145,59.9584121 C29.6145,60.1797862 30.0525,59.4358488 30.0525,58.7973276 C30.0525,58.2250681 30.0315,56.7100863 30.0195,54.6996482 C23.343,56.1558981 21.9345,51.4693938 21.9345,51.4693938 C20.844,48.6864054 19.2705,47.9454799 19.2705,47.9454799 C17.091,46.4500754 19.4355,46.4801943 19.4355,46.4801943 C21.843,46.6503662 23.1105,48.9634994 23.1105,48.9634994 C25.2525,52.6455377 28.728,51.5823398 30.096,50.9649018 C30.3135,49.4077535 30.9345,48.3460615 31.62,47.7436831 C26.2905,47.1352808 20.688,45.0691228 20.688,35.8361671 C20.688,33.2052792 21.6225,31.0547881 23.1585,29.3696344 C22.911,28.7597262 22.0875,26.3110578 23.3925,22.9934585 C23.3925,22.9934585 25.4085,22.3459017 29.9925,25.4632101 C31.908,24.9285993 33.96,24.6620468 36.0015,24.6515052 C38.04,24.6620468 40.0935,24.9285993 42.0105,25.4632101 C46.5915,22.3459017 48.603,22.9934585 48.603,22.9934585 C49.9125,26.3110578 49.089,28.7597262 48.8415,29.3696344 C50.3805,31.0547881 51.309,33.2052792 51.309,35.8361671 C51.309,45.0917119 45.6975,47.1292571 40.3515,47.7256117 C41.2125,48.4695491 41.9805,49.9393525 41.9805,52.1877301 C41.9805,55.4089489 41.9505,58.0067059 41.9505,58.7973276 C41.9505,59.4418726 42.3825,60.1918338 43.6005,59.9554002 C53.13,56.7627944 60,47.7376593 60,37.096644 C60,23.7870921 49.254,13 35.9985,13" fill="#FFFFFF"></path>
            </g>
        </g>
    </g>
</svg>
    </a>


</div>

    

    <p class="copyright">
    
       Â© Copyright 
       2021 
       <span class="split">
        <svg fill="#bbbbbb" width="15" height="15" version="1.1" id="heart-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">
  <path d="M13.91,6.75c-1.17,2.25-4.3,5.31-6.07,6.94c-0.1903,0.1718-0.4797,0.1718-0.67,0C5.39,12.06,2.26,9,1.09,6.75&#xA;&#x9;C-1.48,1.8,5-1.5,7.5,3.45C10-1.5,16.48,1.8,13.91,6.75z"/>
</svg>
       </span>
       haigeek
    
    </p>
    <p class="powerby">
        Powered by <a href="http://www.gohugo.io/">Hugo</a> Theme By <a href="https://github.com/nodejh/hugo-theme-cactus-plus">nodejh</a>
    </p>
</footer>

  </body>
</html>
