<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta property="og:title" content="winestory中struts2的使用" />
<meta property="og:description" content="使用ssh框架做的一个小论坛是我的第一个项目，ssh框架在现在早已经过时，但是当初学习和解决问题的精神却是最重要的，因此我将相关的博文进行归档，记录并缅怀初学编程时的历程。这一篇是struts2框架相关内容。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://haigeek.me/posts/project/winestory-struts2/" />
<meta property="article:published_time" content="2017-07-22T20:27:55+00:00" />
<meta property="article:modified_time" content="2017-07-22T20:27:55+00:00" />

  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="winestory中struts2的使用"/>
<meta name="twitter:description" content="使用ssh框架做的一个小论坛是我的第一个项目，ssh框架在现在早已经过时，但是当初学习和解决问题的精神却是最重要的，因此我将相关的博文进行归档，记录并缅怀初学编程时的历程。这一篇是struts2框架相关内容。"/>

  
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#262d33">
  <title>
    
    haigeek blog - winestory中struts2的使用
    
  </title>
  
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
  
  
  
  <link rel="stylesheet" href="/minima.1671899191.css">
  
  
  <script defer type="text/javascript" src="/minima.1671899191.js"></script>
  
</head>
<script>
  
  let default_theme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';

  try {
    const local = localStorage.getItem('theme')
    if (local) {
      default_theme = local
    }
    localStorage.setItem('theme', default_theme);
    window.minima_theme = default_theme;
    document.querySelector('html').classList.add(default_theme);
  } catch (e) {
    console.error(e);
  }
</script>



<body>
  <header class="mt-3 mb-6">
  <div class="container mx-auto">
    <nav class="flex justify-between items-center">
      <div class="flex items-center">
        
        <div id="theme-switch" class="text-3xl cursor-pointer">☼</div>
      </div>
      <ul class="flex items-center font-medium
        whitespace-nowrap overflow-x-auto overflow-y-hidden">
        
        <li class="ml-1 mr-1"><a href="/">首页</a></li>
        
        <li class="ml-1 mr-1"><a href="/categories">分类</a></li>
        
        <li class="ml-1 mr-1"><a href="/tags">标签</a></li>
        
        <li class="ml-1 mr-1"><a href="/about">关于</a></li>
        
        <li class="ml-1 mr-1"><a href="https://wiki.haigeek.me">Wiki</a></li>
        
      </ul>
      <ul class="flex item-center text-sm font-bold">
        
      </ul>
    </nav>
  </div>
</header>

  
<div class="container mx-auto">
  <h1 class="text-4xl font-extrabold mt-6 mb-6">winestory中struts2的使用</h1>
  <div class="mb-3 text-sm flex justify-between ">
    <div>
      
      发布于 &mdash; 2017 年 7 月 22 日
      
      
    </div>
    
    <div>
      
      
      <a class="ml-1" href="/tags/struts2">#struts2</a>
      
      
      <a class="ml-1" href="/tags/java%20web">#java web</a>
      
    </div>
    
  </div>
  <main class="mb-8">
    <p></p>
    <article class="md">
      <p>使用ssh框架做的一个小论坛是我的第一个项目，ssh框架在现在早已经过时，但是当初学习和解决问题的精神却是最重要的，因此我将相关的博文进行归档，记录并缅怀初学编程时的历程。这一篇是struts2框架相关内容。</p>
<h1 id="winestory中struts2的使用">winestory中struts2的使用</h1>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1 id="什么是struts">什么是Struts</h1>
<p>Struts直译过来就是支柱，枝干的意思，它实现了基于javaweb应用的Model-View——Controller设计模式的应用框架</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="struts的体系结构">Struts的体系结构</h2>
<p>一个请求在Struts2框架中的处理大概会经过以下结构步骤</p>
<ol>
<li>客户端发出一个指向Servlet容器（例如Tomcat）的请求</li>
<li>这个请求会经过结构过滤器Filter(ActionContextCleanUP可选过滤器，其他web过滤器如SiteMesh等)，最后到达FilterDispatcher过滤器</li>
<li>接着FilterDispatcher（过滤调度器）过滤器被调用，FilterDispatcher询问ActionMapper来决定这个请是否需要调用某个Action</li>
<li>如果ActionMapper决定需要调用某个Action，FilterDispatcher把请求的处理交给Action对象的代理（ActionProxy）</li>
<li>ActionProxy通过配置管理器（Configuration Manager）读取框架的相关的配置文件（Struts.xml以及它包含的*.xml配置文件）找到需要调用的Action类</li>
<li>找到需要调用的Action类之后，ActionProxy会创建一个ActionInvocation（动作调用)的实例</li>
<li>ActionInvocation在调用Action的过程之前，会先依次调用相关配置拦截器（Intercepter）执行结果返回结果字符串</li>
<li>ActionInvocation负责查找结果字符串对应的Result。然后再执行这个Result，再返回对应的结果视图（如JSP）来呈现界面</li>
<li>再次调用所用的配置拦截器（调用顺序与第7步相反），然后响应（HttpServletResponse)被返回给浏览器</li>
</ol>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="struts2的优点">Struts2的优点</h2>
<ul>
<li>Struts2是非侵入式设计，即不依赖与Servlet API和StrutsAPI</li>
<li>Strtus2提供了强大的拦截器，利用拦截器可进行AOP编程（面向切面的编程），实现权限的拦截等功能</li>
<li>Strtus2提供了类型转换器，可以很方便地进行类型转换，例如将特殊的的请求参数转换成需要的类型</li>
<li>Struts2支持多种表现层技术，如JSP、FreeMarker、Vectocity</li>
<li>Struts2的输入验证可以对指定的方法进行验证<!-- raw HTML omitted -->笔记来源：<a href="https://www.shiyanlou.com/">实验楼</a></li>
</ul>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1 id="struts2核心配置文件strutsxml详解">struts2核心配置文件struts.xml详解</h1>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="strutsxml文件示例">struts.xml文件示例</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
<span class="cp">&lt;!DOCTYPE struts PUBLIC
</span><span class="cp">    &#34;-//Apache Software Foundation//DTD Struts Configuration 2.3//EN&#34;
</span><span class="cp">    &#34;http://struts.apache.org/dtds/struts-2.3.dtd&#34;&gt;</span>
<span class="nt">&lt;struts&gt;</span>
    <span class="nt">&lt;constant</span> <span class="na">name=</span><span class="s">&#34;struts.enable.DynamicMethodInvocation&#34;</span> <span class="na">value=</span><span class="s">&#34;false&#34;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;constant</span> <span class="na">name=</span><span class="s">&#34;struts.devMode&#34;</span> <span class="na">value=</span><span class="s">&#34;true&#34;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;package</span> <span class="na">name=</span><span class="s">&#34;default&#34;</span> <span class="na">namespace=</span><span class="s">&#34;/&#34;</span> <span class="na">extends=</span><span class="s">&#34;struts-default&#34;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;default-action-ref</span> <span class="na">name=</span><span class="s">&#34;index&#34;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;global-results&gt;</span>
            <span class="nt">&lt;result</span> <span class="na">name=</span><span class="s">&#34;error&#34;</span><span class="nt">&gt;</span>/WEB-INF/jsp/error.jsp<span class="nt">&lt;/result&gt;</span>
        <span class="nt">&lt;/global-results&gt;</span>
        <span class="nt">&lt;global-exception-mappings&gt;</span>
            <span class="nt">&lt;exception-mapping</span> <span class="na">exception=</span><span class="s">&#34;java.lang.Exception&#34;</span> <span class="na">result=</span><span class="s">&#34;error&#34;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/global-exception-mappings&gt;</span>
        <span class="nt">&lt;action</span> <span class="na">name=</span><span class="s">&#34;index&#34;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;result</span> <span class="na">type=</span><span class="s">&#34;redirectAction&#34;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&#34;actionName&#34;</span><span class="nt">&gt;</span>HelloWorld<span class="nt">&lt;/param&gt;</span>
                <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&#34;namespace&#34;</span><span class="nt">&gt;</span>/example<span class="nt">&lt;/param&gt;</span>
            <span class="nt">&lt;/result&gt;</span>
        <span class="nt">&lt;/action&gt;</span>
    <span class="nt">&lt;/package&gt;</span>
    <span class="nt">&lt;include</span> <span class="na">file=</span><span class="s">&#34;example.xml&#34;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/struts&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="constant">constant</h2>
<p>包含一些属性设置，他可以改变struts框架的一些行为。例如示例中的 struts.enable.DynamicMethodInvocation 设为true，表示设置动态方法调用为真，而 struts.devMode 表示是否启用开发者模式。</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="package">package</h2>
<p>在struts中，package用来管理action、result、interceptor、interceptor-stack等配置信息</p>
<ul>
<li>name：必须唯一，这样其他package如果引用本package的话，才能找得到。</li>
<li>extends：当本package继承其他package的时候，会继承父package的所有配置属性（例如action、result等等）；由于package的信息获取是按照struts.xml文件中的先后顺序进行的，因此父package必须在子package之前先定义。通常情况下，继承一个“struts-default.xml”的package，这是 Struts2 默认的package。<!-- raw HTML omitted -->namespace：namespace的配置会改变项目的url访问地址，主要是针对比较大型的项目以方便管理action，因为不同namespace中的action可以同名，从而解决action重名的问题。如果没有指定namespace，则默认为“”。</li>
</ul>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="action">action</h2>
<ul>
<li>name：action的名称</li>
<li>class：action对应的java类</li>
<li>method：在该class中对应执行Action的函数方法，默认是execute()。</li>
<li>converter：类型转换器</li>
</ul>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="result">result</h2>
<ul>
<li>name：具体来说，就是根据某个返回结果，指定响应逻辑，默认是success。</li>
<li>type：返回结果的类型，默认为dispatcher。</li>
</ul>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="default-action-ref">default-action-ref</h2>
<p>如果找不到项目请求的action，就会报出404错误，而且这种错误不可避免，所以我们可以使用 default-action-ref 来指定一个默认的action，如果系统出现找不到action的情况，就会来调用这个默认的action。</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="global-results">global-results</h2>
<p>设置package范围内的全局响应结果。在多个action都返回同一个逻辑视图（通常为某个jsp页面）的情况下，可以通过该标签来统一配置。</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="global-exception-mapping">global-exception-mapping</h2>
<p>配置发生异常时的视图信息。exception-mapping是控制action范围内的，而global-exception-mapp是控制package范围内的。两个都配置时，exception-mapping的优先级更高。</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="include">include</h2>
<p>使用include引入外部配置文件，直接给出url即可</p>
<pre><code>&lt;include file=&quot;**/**/***.xml&quot; /&gt;
</code></pre><p>使用 include 的好处在于，例如当我们开发一个比较大型的项目的时候，配置文件肯定会写一大堆。如果写在一个配置文件里就不好查看和修改，不便于维护；所以使用 include 后可以根据模块、也可以根据功能来划分，这样就比较清晰，方便管理和维护。<!-- raw HTML omitted -->其他较为常用的还有 拦截器等等。<!-- raw HTML omitted -->来源：实验楼 <a href="https://www.shiyanlou.com/courses/32/labs/920/document">https://www.shiyanlou.com/courses/32/labs/920/document</a></p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1 id="struts2中action接收参数的三种方法">struts2中action接收参数的三种方法</h1>
<p>struts2中action接收参数的方法主要有一下三种</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="1使用action-中的属性接收参数">1.使用action 中的属性接收参数</h2>
<ul>
<li>定义：在action类中定义属性，创建get和set方法</li>
<li>接收：通过属性接收参数，如userId；</li>
<li>发送：通过属性名传递参数，如：user_usershow?userId=1;</li>
</ul>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="2使用domainmodel接收参数">2.使用DomainModel接收参数：</h2>
<ul>
<li>定义：定义Model类，在action中定义Model类的对象（不需要new），创建该对象的get和set方法</li>
<li>接收：通过对象的属性接收参数，如user.getUserName();</li>
<li>发送：使用对象的属相传递参数，如user_usershow?user.user.userName=xxx;</li>
</ul>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="3使用modeldriven接收参数">3使用ModelDriven接收参数</h2>
<ul>
<li>定义：action实现ModelDriven泛型接口，定义Model类的对象（必须new），通过getModel方法返回该对象；</li>
<li>接收：通过对象的属性接收参数，如：user.getUserName()；</li>
<li>发送：直接使用属性名传递参数，如：user_usershow?userName=xxx
<!-- raw HTML omitted --><!-- raw HTML omitted --></li>
</ul>
<h1 id="action获取表单提交数据">Action获取表单提交数据</h1>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="获取表单提交数据的三种主要方式">获取表单提交数据的三种主要方式</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="1使用actioncontext">1.使用ActionContext</h3>
<p>Map&lt;String,Object&gt;getParameters() 返回一个包含所有HttpServletRequest参数信息</p>
<ol>
<li>因为方法不是静态的方法，需要创建ActionContext类的对象</li>
<li>ActionContext对象不是new出来的 static ActionContext getContext() 获取当前线程的ActionContext对象</li>
<li>实例</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="n">String</span> <span class="nf">execute</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="c1">//第一种方式：使用ActionContext类获取
</span><span class="c1"></span>        <span class="c1">//获取ActionContext对象
</span><span class="c1"></span>        <span class="n">ActionContext</span> <span class="n">context</span><span class="o">=</span><span class="n">ActionContext</span><span class="o">.</span><span class="na">getContext</span><span class="o">();</span>
        <span class="c1">//调用方法得到表单数据
</span><span class="c1"></span>        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getParameters</span><span class="o">();</span>
        <span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">keys</span><span class="o">=</span><span class="n">map</span><span class="o">.</span><span class="na">keySet</span><span class="o">();</span>
        <span class="c1">//根据key得到vaule，使用数组形式是因为输入项可能有复选框
</span><span class="c1"></span>        <span class="k">for</span><span class="o">(</span><span class="n">String</span> <span class="n">key</span><span class="o">:</span><span class="n">keys</span><span class="o">){</span>
            <span class="n">Object</span><span class="o">[]</span> <span class="n">obj</span><span class="o">=(</span><span class="n">Object</span><span class="o">[])</span> <span class="n">map</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">key</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">obj</span><span class="o">));</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">NONE</span><span class="o">;</span>
    <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="2使用servletactioncontext类">2.使用ServletActionContext类</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="n">String</span> <span class="nf">execute</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="c1">//使用ServletActionContext获取request对象
</span><span class="c1"></span>        <span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">=</span><span class="n">ServletActionContext</span><span class="o">.</span><span class="na">getRequest</span><span class="o">();</span>
        <span class="c1">//调用request里面的方法得到结果
</span><span class="c1"></span>        <span class="n">String</span> <span class="n">username</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;username&#34;</span><span class="o">);</span>
        <span class="n">String</span> <span class="n">password</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;password&#34;</span><span class="o">);</span>
        <span class="n">String</span> <span class="n">address</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;address&#34;</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">username</span><span class="o">+</span><span class="s">&#34; &#34;</span><span class="o">+</span><span class="n">password</span><span class="o">+</span><span class="s">&#34; &#34;</span><span class="o">+</span><span class="n">address</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">NONE</span><span class="o">;</span>
    <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="3使用接口注入方式">3.使用接口注入方式</h3>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="在action操作域对象">在action操作域对象</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//操作三个域对象
</span><span class="c1"></span>        <span class="c1">//1.request域
</span><span class="c1"></span>        <span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">=</span><span class="n">ServletActionContext</span><span class="o">.</span><span class="na">getRequest</span><span class="o">();</span>
        <span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">&#34;req&#34;</span><span class="o">,</span><span class="s">&#34;reqvalue&#34;</span> <span class="o">);</span>
        <span class="c1">//2.session域
</span><span class="c1"></span>        <span class="n">HttpSession</span> <span class="n">session</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getSession</span><span class="o">();</span>
        <span class="n">session</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">&#34;sess&#34;</span><span class="o">,</span> <span class="s">&#34;sessValue&#34;</span><span class="o">);</span>
        <span class="c1">//3ServletContext域
</span><span class="c1"></span>        <span class="n">ServletContext</span> <span class="n">context</span><span class="o">=</span><span class="n">ServletActionContext</span><span class="o">.</span><span class="na">getServletContext</span><span class="o">();</span>
        <span class="n">context</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">&#34;contextname&#34;</span><span class="o">,</span> <span class="s">&#34;contextValue&#34;</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="struts2提供获取表单数据方式">struts2提供获取表单数据方式</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="1原始方式获取表单封装到实体类对象">1.原始方式获取表单封装到实体类对象</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="n">String</span> <span class="nf">execute</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">=</span><span class="n">ServletActionContext</span><span class="o">.</span><span class="na">getRequest</span><span class="o">();</span>
        <span class="n">String</span> <span class="n">username</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;username&#34;</span><span class="o">);</span>
        <span class="n">String</span> <span class="n">password</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;password&#34;</span><span class="o">);</span>
        <span class="n">String</span> <span class="n">address</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;address&#34;</span><span class="o">);</span>
        <span class="c1">//封装到实体类
</span><span class="c1"></span>        <span class="n">User</span> <span class="n">user</span><span class="o">=</span><span class="k">new</span> <span class="n">User</span><span class="o">();</span>
        <span class="n">user</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="n">username</span><span class="o">);</span>
        <span class="n">user</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="n">password</span><span class="o">);</span>
        <span class="n">user</span><span class="o">.</span><span class="na">setAddress</span><span class="o">(</span><span class="n">address</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">NONE</span><span class="o">;</span>
    <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="2属性封装">2.属性封装</h3>
<ol>
<li>直接把表单提交属性封装到action属性中</li>
<li>实现步骤</li>
<li>在action成员变量位置定义变量，变量名称和表单输入项的name属性值一样</li>
<li>生成变量的get和set方法</li>
<li>使用属性封装获取表单数据到属性里面，不能直接把数据封装到实体类对象里面</li>
<li>实例</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">sysAction</span> <span class="kd">extends</span> <span class="n">ActionSupport</span><span class="o">{</span>    
    <span class="kd">private</span> <span class="n">String</span> <span class="n">username</span><span class="o">;</span>    
   
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">login</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>    
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">username</span><span class="o">);</span>    
        <span class="k">return</span> <span class="n">SUCCESS</span><span class="o">;</span>    
    <span class="o">}</span>    
   
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getUsername</span><span class="o">()</span> <span class="o">{</span>    
        <span class="k">return</span> <span class="n">username</span><span class="o">;</span>    
    <span class="o">}</span>    
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUsername</span><span class="o">(</span><span class="n">String</span> <span class="n">username</span><span class="o">)</span> <span class="o">{</span>    
        <span class="k">this</span><span class="o">.</span><span class="na">username</span><span class="o">=</span> <span class="n">username</span><span class="o">;</span>    
    <span class="o">}</span>    
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="3模型驱动封装对于要传入多个model第二种方式不方便">3.模型驱动封装，对于要传入多个model，第二种方式不方便</h3>
<ol>
<li>可以直接把表单数据封装到实体类对象</li>
<li>实现步骤</li>
<li>action实现接口ModelDriven</li>
<li>实现接口里面的方法getModel方法</li>
<li>在action里面创建实体类对象</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DataDemo2Action</span> <span class="kd">extends</span> <span class="n">ActionSupport</span> <span class="kd">implements</span> <span class="n">ModelDriven</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;{</span>
    <span class="c1">//创建对象
</span><span class="c1"></span>    <span class="kd">private</span> <span class="n">User</span> <span class="n">user</span><span class="o">=</span><span class="k">new</span> <span class="n">User</span><span class="o">();</span>
    <span class="kd">public</span> <span class="n">User</span> <span class="nf">getModel</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// 返回创建的对象
</span><span class="c1"></span>        <span class="k">return</span> <span class="n">user</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">execute</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        
        <span class="k">return</span> <span class="n">NONE</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="4可以使用多个module实体对象的封装">4.可以使用多个module实体对象的封装</h3>
<p>此种封装方法，变量名称和表单输入项的name属性值不一样，变单输入项样式为</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="s">&#34;sys/login.action&#34;</span> <span class="na">method</span><span class="o">=</span><span class="s">&#34;post&#34;</span><span class="p">&gt;</span>    
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;user.username&#34;</span><span class="p">&gt;</span>    
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;teacher.level&#34;</span><span class="p">&gt;</span>    
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;submit&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;submit&#34;</span><span class="p">&gt;</span>    
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">sysAction</span> <span class="kd">extends</span> <span class="n">ActionSupport</span><span class="o">{</span>    
    <span class="kd">private</span> <span class="n">User</span> <span class="n">user</span><span class="o">;</span>    
    <span class="kd">private</span> <span class="n">Teacher</span> <span class="n">teacher</span><span class="o">;</span>    
   
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">login</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>    
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getUsername</span><span class="o">());</span>    
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">teacher</span><span class="o">.</span><span class="na">getLevel</span><span class="o">());</span>    
        <span class="k">return</span> <span class="n">SUCCESS</span><span class="o">;</span>    
    <span class="o">}</span>    
   
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUser</span><span class="o">(</span><span class="n">User</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>    
        <span class="k">this</span><span class="o">.</span><span class="na">user</span> <span class="o">=</span> <span class="n">user</span><span class="o">;</span>    
    <span class="o">}</span>    
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setTeacher</span><span class="o">(</span><span class="n">Teacher</span> <span class="n">teacher</span><span class="o">)</span> <span class="o">{</span>    
        <span class="k">this</span><span class="o">.</span><span class="na">teacher</span> <span class="o">=</span> <span class="n">teacher</span><span class="o">;</span>    
    <span class="o">}</span>    
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="封装数据到集合">封装数据到集合</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="封装数据到list集合">封装数据到list集合</h3>
<ol>
<li>在action声明List</li>
<li>生成list变量的get和set方法</li>
<li>在表单输入项写表达式</li>
</ol>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="封装数据到map集合">封装数据到map集合</h3>
<ol>
<li>在action声明map集合</li>
<li>生成list变量的get和set方法</li>
<li>在表单输入项写表达式</li>
</ol>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1 id="struts2结果页面配置">struts2结果页面配置</h1>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="action的访问">action的访问</h2>
<ul>
<li>使用method方法</li>
<li>使用通配符实现<!-- raw HTML omitted -->
在action标签里面name属性，name属性值写符号 * ，表示匹配任何内容</li>
<li>动态访问</li>
</ul>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="结果页面配置">结果页面配置</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="全局结果页面">全局结果页面</h3>
<ol>
<li>如果多个action，方法里面返回相同值的时候，可以使用全局结果界面配置</li>
</ol>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="局部结果页面配置">局部结果页面配置</h3>
<ol>
<li>当存在全局结果页面配置时，依旧以局部结果页面配置为准</li>
</ol>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="result便签的type属性">result便签的type属性</h3>
<ol>
<li>type属性：如何到路径里</li>
<li>type属性值：</li>
</ol>
<ul>
<li>默认值：转发操作，值是dispatcher</li>
<li>重定向：redirect</li>
<li>chain：转发到action</li>
<li>redirectAction：重定向到action</li>
</ul>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="实例">实例</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span class="cp">&lt;!DOCTYPE struts PUBLIC
</span><span class="cp">        &#34;-//Apache Software Foundation//DTD Struts Configuration 2.3//EN&#34;
</span><span class="cp">        &#34;http://struts.apache.org/dtds/struts-2.3.dtd&#34;&gt;</span>
<span class="nt">&lt;struts&gt;</span>
    <span class="nt">&lt;package</span> <span class="na">name=</span><span class="s">&#34;demo1&#34;</span> <span class="na">extends=</span><span class="s">&#34;struts-default&#34;</span> <span class="na">namespace=</span><span class="s">&#34;/&#34;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;action</span> <span class="na">name=</span><span class="s">&#34;user_*&#34;</span> <span class="na">class=</span><span class="s">&#34;userAction&#34;</span> <span class="na">method=</span><span class="s">&#34;{1}&#34;</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- &lt;result name=&#34;loginsuccess&#34;&gt;/index.jsp&lt;/result&gt; --&gt;</span>
        <span class="nt">&lt;result</span> <span class="na">name=</span><span class="s">&#34;loginsuccess&#34;</span> <span class="na">type=</span><span class="s">&#34;redirectAction&#34;</span><span class="nt">&gt;</span>story_indexlist<span class="nt">&lt;/result&gt;</span>
        <span class="nt">&lt;result</span> <span class="na">name=</span><span class="s">&#34;login&#34;</span><span class="nt">&gt;</span>/login.jsp<span class="nt">&lt;/result&gt;</span>
         <span class="nt">&lt;result</span> <span class="na">name=</span><span class="s">&#34;logout&#34;</span> <span class="na">type=</span><span class="s">&#34;redirectAction&#34;</span><span class="nt">&gt;</span>story_indexlist<span class="nt">&lt;/result&gt;</span>
        <span class="nt">&lt;result</span> <span class="na">name=</span><span class="s">&#34;registersuccess&#34;</span><span class="nt">&gt;</span>/login.jsp<span class="nt">&lt;/result&gt;</span>
        <span class="nt">&lt;result</span> <span class="na">name=</span><span class="s">&#34;usershow&#34;</span><span class="nt">&gt;</span>/myinfo.jsp<span class="nt">&lt;/result&gt;</span>
        <span class="nt">&lt;result</span> <span class="na">name=</span><span class="s">&#34;showUserinfo&#34;</span><span class="nt">&gt;</span>/myinfoedit.jsp<span class="nt">&lt;/result&gt;</span>
        <span class="nt">&lt;result</span> <span class="na">name=</span><span class="s">&#34;update&#34;</span> <span class="na">type=</span><span class="s">&#34;redirectAction&#34;</span><span class="nt">&gt;</span>story_indexlist<span class="nt">&lt;/result&gt;</span>
    <span class="nt">&lt;/action&gt;</span>
    <span class="nt">&lt;action</span> <span class="na">name=</span><span class="s">&#34;story_*&#34;</span> <span class="na">class=</span><span class="s">&#34;storyAction&#34;</span> <span class="na">method=</span><span class="s">&#34;{1}&#34;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;result</span> <span class="na">name=</span><span class="s">&#34;toAddPage&#34;</span><span class="nt">&gt;</span>/newstory.jsp<span class="nt">&lt;/result&gt;</span>
        <span class="nt">&lt;result</span> <span class="na">name=</span><span class="s">&#34;add&#34;</span> <span class="na">type=</span><span class="s">&#34;redirectAction&#34;</span><span class="nt">&gt;</span>story_indexlist<span class="nt">&lt;/result&gt;</span>
        <span class="nt">&lt;result</span> <span class="na">name=</span><span class="s">&#34;indexlist&#34;</span><span class="nt">&gt;</span>/index.jsp<span class="nt">&lt;/result&gt;</span>
        <span class="nt">&lt;result</span> <span class="na">name=</span><span class="s">&#34;storyshow&#34;</span><span class="nt">&gt;</span>/storyshow.jsp<span class="nt">&lt;/result&gt;</span>
        <span class="nt">&lt;result</span> <span class="na">name=</span><span class="s">&#34;getAllStory&#34;</span><span class="nt">&gt;</span>/showbypage.jsp<span class="nt">&lt;/result&gt;</span>
        <span class="nt">&lt;result</span> <span class="na">name=</span><span class="s">&#34;addComment&#34;</span><span class="nt">&gt;</span>/showbypage.jsp<span class="nt">&lt;/result&gt;</span>
    <span class="nt">&lt;/action&gt;</span>
        <span class="nt">&lt;action</span> <span class="na">name=</span><span class="s">&#34;comment_*&#34;</span> <span class="na">class=</span><span class="s">&#34;commentAction&#34;</span> <span class="na">method=</span><span class="s">&#34;{1}&#34;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;result</span> <span class="na">name=</span><span class="s">&#34;add&#34;</span> <span class="na">type=</span><span class="s">&#34;redirectAction&#34;</span><span class="nt">&gt;</span>story_show?story_id=${comment.story.story_id}<span class="nt">&lt;/result&gt;</span>
        <span class="nt">&lt;/action&gt;</span>
    <span class="nt">&lt;/package&gt;</span>
<span class="nt">&lt;/struts&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1 id="struts2中的重定向问题">struts2中的重定向问题</h1>
<p>在处理ssh框架的小论坛项目的时候，遇到一个问题，在一个帖子下需要进行评论，但是在点击评论按钮的时候，后台做出这几个动作：</p>
<ol>
<li>存储评论信息到数据库，也就是comment实体；</li>
<li>重新加载帖子详情和评论详情<!-- raw HTML omitted -->
要实现以上需求，可以通过struts的重定向功能来实现</li>
</ol>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="struts重定向的几种方式">struts重定向的几种方式</h2>
<ul>
<li>dispatcher —— 请求转发到一个页面 （默认）,不可以用这种方式转发到一个action</li>
<li>chain —— 一个action请求转发至另一个 action</li>
<li>redirect —— 响应重定向到一个页面，也可以实现响应重定向到action</li>
<li>redirectAction —— 一个action响应重定向至另一个 action</li>
</ul>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="struts重定向的实例">struts重定向的实例</h2>
<ul>
<li>redirectAction —— 一个action响应重定向至另一个 action，这种是不带参数的</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;result</span> <span class="na">name=</span><span class="s">&#34;loginsuccess&#34;</span> <span class="na">type=</span><span class="s">&#34;redirectAction&#34;</span><span class="nt">&gt;</span>story_indexlist<span class="nt">&lt;/result&gt;</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>带参数的redirectAction</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;result</span> <span class="na">type=</span><span class="s">&#34;redirect&#34;</span><span class="nt">&gt;</span>successAction?name=${name}<span class="nt">&lt;/result&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="我的问题解决">我的问题解决</h2>
<p>我的项目的重定向就需要参数，在重现加载帖子和评论的时候需要知道帖子的id，具体的解决方案如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;result</span> <span class="na">name=</span><span class="s">&#34;add&#34;</span> <span class="na">type=</span><span class="s">&#34;redirectAction&#34;</span><span class="nt">&gt;</span>story_show?story_id=${comment.story.story_id}<span class="nt">&lt;/result&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>在comment的action中，重定向，并获取参数，这里可能有问题的就是参数的获取，这个参数的获取和action方法中的属性获取有关系，可能有以下的集中情况</p>
<ul>
<li>根据你的action获取表单数据方式的不同，${}里面的参数书写方式也不同，如果是属性，并有getter和setter方法，那么可以直接写属性值，如果是其他的方式获取，则要根据你的情况来设置</li>
<li>如果这个参数是实体内的实体对象，比如我需要的storyId，则是comment实体内的一个story对象，在这个story对象里具有storyId这个值，那么就需要使用上面的方式<code>${comment.story.story_id}</code>如果使用<code>${comment.story_id}</code>是会报错<!-- raw HTML omitted -->
我的comment Action如下</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">cn.haigeek.action</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">cn.haigeek.entity.Comment</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">cn.haigeek.service.CommentService</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.opensymphony.xwork2.ActionSupport</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>
<span class="cm">/**
</span><span class="cm"> * Created by haigeek on 2017/7/22.
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CommentAction</span> <span class="kd">extends</span> <span class="n">ActionSupport</span>  <span class="o">{</span>
    <span class="n">Date</span> <span class="n">date</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Date</span><span class="o">();</span>
    <span class="kd">private</span> <span class="n">Comment</span> <span class="n">comment</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">CommentService</span> <span class="n">commentService</span><span class="o">;</span>
    <span class="c1">//private Integer storyId;
</span><span class="c1"></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setCommentService</span><span class="o">(</span><span class="n">CommentService</span> <span class="n">commentService</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">commentService</span> <span class="o">=</span> <span class="n">commentService</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="n">Comment</span> <span class="nf">getComment</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">comment</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setComment</span><span class="o">(</span><span class="n">Comment</span> <span class="n">comment</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">add</span><span class="o">(){</span>
        <span class="n">comment</span><span class="o">.</span><span class="na">setCommentDate</span><span class="o">(</span><span class="n">date</span><span class="o">);</span>
        <span class="n">commentService</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">comment</span><span class="o">);</span>
        <span class="k">return</span> <span class="s">&#34;add&#34;</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1 id="struts2文件上传以上传头像为例">struts2文件上传（以上传头像为例）</h1>
<p>在java的ssh项目中，需要为注册的用户设置一个头像，具体解决方案如下</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="jsp视图层">jsp视图层</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="o">&lt;</span><span class="n">form</span> <span class="n">action</span><span class="o">=</span><span class="s">&#34;${pageContext.request.contextPath }/user_updateavatar.action?user.usid=${user.uid}&#34;</span>
        <span class="n">method</span><span class="o">=</span><span class="n">post</span> <span class="n">enctype</span><span class="o">=</span><span class="s">&#34;multipart/form-data&#34;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;hidden&#34;</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;user.uid&#34;</span> <span class="n">value</span><span class="o">=</span><span class="s">&#34;${user.uid }&#34;</span><span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s">&#34;panel panel-default&#34;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s">&#34;panel-body&#34;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">br</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s">&#34;mdui-card-header-title&#34;</span><span class="o">&gt;</span><span class="n">头像上传</span><span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s">&#34;mdui-container&#34;</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;file&#34;</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;avatar&#34;</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">button</span> <span class="n">class</span><span class="o">=</span><span class="s">&#34;mdui-btn mdui-btn-dense mdui-color-blue mdui-float-right mdui-m-a-2&#34;</span><span class="o">&gt;</span>
                    <span class="n">保存</span>
                <span class="o">&lt;/</span><span class="n">button</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">form</span><span class="o">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>input类型要设置为type为File类型，name需要对应action中的命名</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="action层">action层</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="n">File</span> <span class="n">avatar</span><span class="o">;</span><span class="c1">//上传文件域
</span><span class="c1"></span><span class="kd">private</span> <span class="n">String</span> <span class="n">avatatFileType</span><span class="o">;</span><span class="c1">//上传文件类型
</span><span class="c1"></span><span class="kd">private</span> <span class="n">String</span> <span class="n">avatarFileName</span><span class="o">;</span><span class="c1">//上传文件名字
</span><span class="c1"></span><span class="kd">private</span> <span class="n">String</span> <span class="n">savePathAvatar</span><span class="o">;</span><span class="c1">//文件存储位置，在struts2中配置
</span><span class="c1">//对应的get和set方法
</span><span class="c1"></span><span class="kd">public</span> <span class="n">String</span> <span class="nf">updateavatar</span><span class="o">(){</span>
  <span class="c1">//文件在本地的具体存储位置
</span><span class="c1"></span>        <span class="n">String</span> <span class="n">path</span><span class="o">=</span><span class="n">ServletActionContext</span><span class="o">.</span><span class="na">getServletContext</span><span class="o">().</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">&#34;/&#34;</span><span class="o">)+</span><span class="n">getSavePathAvatar</span><span class="o">()+</span><span class="s">&#34;\\&#34;</span><span class="o">+</span><span class="n">getAvatarFileName</span><span class="o">();</span>
  <span class="c1">//文件存储到数据库的路径（根据实际情况来设置）
</span><span class="c1"></span>        <span class="n">String</span> <span class="n">path2</span><span class="o">=</span><span class="n">getSavePathAvatar</span><span class="o">()+</span><span class="s">&#34;/&#34;</span><span class="o">+</span><span class="n">getAvatarFileName</span><span class="o">();</span>
        <span class="k">try</span><span class="o">{</span>
            <span class="n">FileOutputStream</span> <span class="n">fos</span><span class="o">=</span><span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="n">path</span><span class="o">);</span>
            <span class="n">FileInputStream</span> <span class="n">fis</span><span class="o">=</span><span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="n">getAvatar</span><span class="o">());</span>
            <span class="kt">byte</span><span class="o">[]</span><span class="n">buffer</span><span class="o">=</span><span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="n">1024</span><span class="o">];</span>
            <span class="kt">int</span> <span class="n">len</span><span class="o">=</span><span class="n">0</span><span class="o">;</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="k">while</span> <span class="o">((</span><span class="n">len</span><span class="o">=</span><span class="n">fis</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">buffer</span><span class="o">))&gt;</span><span class="n">0</span><span class="o">){</span>
                    <span class="n">fos</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">buffer</span><span class="o">,</span><span class="n">0</span><span class="o">,</span><span class="n">len</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">FileNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
  <span class="c1">//接受页面传过来的用户id
</span><span class="c1"></span>        <span class="kt">int</span> <span class="n">uid</span><span class="o">=</span><span class="n">user</span><span class="o">.</span><span class="na">getUid</span><span class="o">();</span>
        <span class="n">User</span> <span class="n">user4</span><span class="o">=</span><span class="n">userService</span><span class="o">.</span><span class="na">findOne</span><span class="o">(</span><span class="n">uid</span><span class="o">);</span>
        <span class="n">user4</span><span class="o">.</span><span class="na">setAvatar</span><span class="o">(</span><span class="n">path2</span><span class="o">);</span>
  <span class="c1">//调用service进行路径的存储
</span><span class="c1"></span>        <span class="n">userService</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="n">user4</span><span class="o">);</span>
        <span class="k">return</span> <span class="s">&#34;update&#34;</span><span class="o">;</span>
    <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="strutsxml的配置">Struts.xml的配置</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;action</span> <span class="na">name=</span><span class="s">&#34;user_*&#34;</span> <span class="na">class=</span><span class="s">&#34;userAction&#34;</span> <span class="na">method=</span><span class="s">&#34;{1}&#34;</span><span class="nt">&gt;</span>
  <span class="c">&lt;!-- 动态设置存储位置的值 --&gt;</span>  
<span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&#34;savePathAvatar&#34;</span><span class="nt">&gt;</span>/upload/avatar<span class="nt">&lt;/param&gt;</span>
<span class="nt">&lt;/action&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="显示">显示</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">&#34;${story.user.avatar}&#34;</span><span class="nt">/&gt;&lt;/div&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>我的项目是显示这个story对应的用户的头像</p>
<h1 id="ssh框架实现分页显示">ssh框架实现分页显示</h1>
<h2 id="目的">目的</h2>
<p>最近在写的一个java小论坛的首页想要实现首页帖子列表的分页显示</p>
<h2 id="实现">实现</h2>
<h3 id="分页类">分页类</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">cn.haigeek.entity</span><span class="o">;</span>

<span class="cm">/**
</span><span class="cm"> * Created by haigeek on 2017/7/16.
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">pageShow</span> <span class="o">{</span>
    <span class="c1">//此类用于分页
</span><span class="c1"></span>    <span class="kd">private</span> <span class="kt">int</span> <span class="n">pageNow</span><span class="o">;</span><span class="c1">//当前页
</span><span class="c1"></span>    <span class="kd">private</span> <span class="kt">int</span> <span class="n">totalSize</span><span class="o">;</span><span class="c1">//总条数
</span><span class="c1"></span>    <span class="kd">private</span> <span class="kt">int</span> <span class="n">totalPage</span><span class="o">;</span><span class="c1">//总页数
</span><span class="c1"></span>    <span class="kd">private</span> <span class="kt">int</span> <span class="n">pageSize</span> <span class="o">=</span> <span class="n">10</span><span class="o">;</span><span class="c1">//每页显示条数
</span><span class="c1"></span>    <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">hasPre</span><span class="o">;</span><span class="c1">//是否有上一页
</span><span class="c1"></span>    <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">hasNext</span><span class="o">;</span><span class="c1">//是否有下一页
</span><span class="c1"></span>    <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">hasFirst</span><span class="o">;</span><span class="c1">//是否有首页
</span><span class="c1"></span>    <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">hasLast</span><span class="o">;</span><span class="c1">//是否有尾页
</span><span class="c1"></span>
    <span class="kd">public</span> <span class="nf">pageShow</span><span class="o">(</span><span class="kt">int</span> <span class="n">pageNow</span><span class="o">,</span> <span class="kt">int</span> <span class="n">totalSize</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//构造方法
</span><span class="c1"></span>        <span class="k">this</span><span class="o">.</span><span class="na">setPageNow</span><span class="o">(</span><span class="n">pageNow</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">setTotalSize</span><span class="o">(</span><span class="n">totalSize</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nf">pageShow</span><span class="o">(</span><span class="kt">int</span> <span class="n">pageNow</span><span class="o">,</span> <span class="kt">int</span> <span class="n">totalSize</span><span class="o">,</span> <span class="kt">int</span> <span class="n">pageSize</span><span class="o">)</span> <span class="o">{</span><span class="c1">//可动态改变每页条数
</span><span class="c1"></span>        <span class="c1">//构造方法
</span><span class="c1"></span>        <span class="k">this</span><span class="o">.</span><span class="na">setPageNow</span><span class="o">(</span><span class="n">pageNow</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">setTotalSize</span><span class="o">(</span><span class="n">totalSize</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">pageSize</span> <span class="o">=</span> <span class="n">pageSize</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPageNow</span><span class="o">(</span><span class="kt">int</span> <span class="n">pageNow</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">pageNow</span> <span class="o">=</span> <span class="n">pageNow</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getPageNow</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">pageNow</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setTotalSize</span><span class="o">(</span><span class="kt">int</span> <span class="n">totalSize</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">totalSize</span> <span class="o">=</span> <span class="n">totalSize</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getTotalSize</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">totalSize</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPageSize</span><span class="o">(</span><span class="kt">int</span> <span class="n">pageSize</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">pageSize</span> <span class="o">=</span> <span class="n">pageSize</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getPageSize</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">pageSize</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getTotalPage</span><span class="o">()</span> <span class="o">{</span><span class="c1">//总页数 = 总条数/每页显示条数
</span><span class="c1"></span>        <span class="n">totalPage</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">getTotalSize</span><span class="o">()</span> <span class="o">/</span> <span class="k">this</span><span class="o">.</span><span class="na">getPageSize</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">getTotalSize</span><span class="o">()</span> <span class="o">%</span> <span class="k">this</span><span class="o">.</span><span class="na">getPageSize</span><span class="o">()</span> <span class="o">!=</span> <span class="n">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">totalPage</span><span class="o">++;</span> <span class="c1">//若余数为不0 则要多加一页
</span><span class="c1"></span>        <span class="o">}</span>
        <span class="k">return</span> <span class="n">totalPage</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setTotalPage</span><span class="o">(</span><span class="kt">int</span> <span class="n">totalPage</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">totalPage</span> <span class="o">=</span> <span class="n">totalPage</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isHasPre</span><span class="o">()</span> <span class="o">{</span><span class="c1">//是否有上一页   除第一页以外都有上一页  说明有首页的就有上一页
</span><span class="c1"></span>        <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">isHasFirst</span><span class="o">())</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setHasPre</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">hasPre</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">hasPre</span> <span class="o">=</span> <span class="n">hasPre</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isHasNext</span><span class="o">()</span> <span class="o">{</span><span class="c1">//是否有下一页   除最后一页以外都有下一页  说明有尾页的就有下一页
</span><span class="c1"></span>        <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">isHasLast</span><span class="o">())</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setHasNext</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">hasNext</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">hasNext</span> <span class="o">=</span> <span class="n">hasNext</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isHasFirst</span><span class="o">()</span> <span class="o">{</span><span class="c1">//是否有首页 除第一页以外都有首页
</span><span class="c1"></span>        <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">pageNow</span> <span class="o">==</span> <span class="n">1</span><span class="o">)</span><span class="c1">//是第一页就没有首页
</span><span class="c1"></span>            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="k">else</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setHasFirst</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">hasFirst</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">hasFirst</span> <span class="o">=</span> <span class="n">hasFirst</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isHasLast</span><span class="o">()</span> <span class="o">{</span><span class="c1">//是否有尾页  除最后一页以外都有尾页
</span><span class="c1"></span>        <span class="k">if</span> <span class="o">(</span><span class="n">pageNow</span> <span class="o">==</span> <span class="k">this</span><span class="o">.</span><span class="na">getTotalPage</span><span class="o">())</span> <span class="o">{</span><span class="c1">//最后一页
</span><span class="c1"></span>            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setHasLast</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">hasLast</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">hasLast</span> <span class="o">=</span> <span class="n">hasLast</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="编写action">编写action</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="n">String</span> <span class="nf">getAllStory</span><span class="o">(){</span>
		<span class="n">List</span> <span class="o">&lt;</span><span class="n">Story</span><span class="o">&gt;</span><span class="n">StoryList</span><span class="o">=</span><span class="n">storyService</span><span class="o">.</span><span class="na">getAllStory</span><span class="o">(</span><span class="n">pageNow</span><span class="o">,</span><span class="n">pageSize</span><span class="o">);</span>
  			<span class="c1">//放进域对象
</span><span class="c1"></span>			<span class="n">ServletActionContext</span><span class="o">.</span><span class="na">getRequest</span><span class="o">().</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">&#34;StoryList&#34;</span><span class="o">,</span> <span class="n">StoryList</span><span class="o">);</span>
  			<span class="c1">//放入request对象
</span><span class="c1"></span>			<span class="n">Map</span> <span class="n">request</span><span class="o">=</span> <span class="o">(</span><span class="n">Map</span><span class="o">)</span> <span class="n">ActionContext</span><span class="o">.</span><span class="na">getContext</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="s">&#34;request&#34;</span><span class="o">);</span>
			<span class="n">pageShow</span> <span class="n">page</span><span class="o">=</span><span class="k">new</span> <span class="n">pageShow</span><span class="o">(</span><span class="n">pageNow</span><span class="o">,</span><span class="n">storyService</span><span class="o">.</span><span class="na">findStorySize</span><span class="o">(),</span><span class="n">pageSize</span><span class="o">);</span>
			<span class="n">request</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;page&#34;</span><span class="o">,</span><span class="n">page</span><span class="o">);</span>
			<span class="k">return</span> <span class="s">&#34;getAllStory&#34;</span><span class="o">;</span>
		<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="编写service层">编写service层</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java">	<span class="c1">//service层
</span><span class="c1"></span><span class="kd">public</span> <span class="n">List</span> <span class="o">&lt;</span><span class="n">Story</span><span class="o">&gt;</span><span class="n">getAllStory</span><span class="o">(</span><span class="kt">int</span> <span class="n">page</span><span class="o">,</span><span class="kt">int</span> <span class="n">pageSize</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">storyDao</span><span class="o">.</span><span class="na">getAllStory</span><span class="o">(</span><span class="n">page</span><span class="o">,</span><span class="n">pageSize</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="c1">//获取帖子数目
</span><span class="c1"></span> <span class="kd">public</span> <span class="kt">int</span> <span class="nf">findStorySize</span><span class="o">(){</span>
        <span class="k">return</span> <span class="n">storyDao</span><span class="o">.</span><span class="na">findStorySize</span><span class="o">();</span>
  	<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="dao接口层">Dao接口层</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java">    <span class="kt">int</span> <span class="nf">findStorySize</span><span class="o">();</span>

    <span class="n">List</span> <span class="o">&lt;</span><span class="n">Story</span><span class="o">&gt;</span><span class="n">getAllStory</span><span class="o">(</span><span class="kt">int</span> <span class="n">page</span><span class="o">,</span> <span class="kt">int</span> <span class="n">pageSize</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="dao层的实现层">Dao层的实现层</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">StoryDaoImpl</span> <span class="kd">extends</span> <span class="n">HibernateDaoSupport</span> <span class="kd">implements</span> <span class="n">StoryDao</span> <span class="o">{</span>
<span class="kd">public</span> <span class="kt">int</span> <span class="nf">findStorySize</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">Session</span> <span class="n">session</span><span class="o">=</span><span class="n">getSessionFactory</span><span class="o">().</span><span class="na">openSession</span><span class="o">();</span>
        <span class="n">String</span> <span class="n">hql</span> <span class="o">=</span> <span class="s">&#34;from Story &#34;</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="n">hql</span><span class="o">).</span><span class="na">list</span><span class="o">().</span><span class="na">size</span><span class="o">();</span>
        <span class="n">session</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">size</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Story</span><span class="o">&gt;</span> <span class="nf">getAllStory</span><span class="o">(</span><span class="kt">int</span> <span class="n">pageNow</span><span class="o">,</span> <span class="kt">int</span> <span class="n">pageSize</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">//获取session的方式很重要，这里的dao层是继承了HibernateDaoSupport来实现dao接口
</span><span class="c1"></span>        <span class="n">Session</span> <span class="n">session</span><span class="o">=</span><span class="k">this</span><span class="o">.</span><span class="na">getHibernateTemplate</span><span class="o">().</span><span class="na">getSessionFactory</span><span class="o">().</span><span class="na">getCurrentSession</span><span class="o">();</span>
        <span class="n">String</span> <span class="n">hql</span><span class="o">=</span><span class="s">&#34;from Story order by story_id desc &#34;</span><span class="o">;</span>
        <span class="n">Query</span> <span class="n">query</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="n">hql</span><span class="o">);</span><span class="c1">//执行查询操作
</span><span class="c1"></span>        <span class="n">query</span><span class="o">.</span><span class="na">setFirstResult</span><span class="o">((</span><span class="n">pageNow</span> <span class="o">-</span> <span class="n">1</span><span class="o">)</span> <span class="o">*</span> <span class="n">pageSize</span><span class="o">);</span>
        <span class="n">query</span><span class="o">.</span><span class="na">setMaxResults</span><span class="o">(</span><span class="n">pageSize</span><span class="o">);</span>
        <span class="n">List</span> <span class="o">&lt;</span><span class="n">Story</span><span class="o">&gt;</span> <span class="n">StoryList</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="na">list</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">StoryList</span><span class="o">;</span>

    <span class="o">}</span>
 <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="视图层">视图层</h3>
<pre><code>&lt;div class=&quot;panel-body&quot;&gt;
    &lt;c:forEach items=&quot;${StoryList }&quot; var=&quot;story&quot;&gt;
        &lt;ul class=&quot;mdui-list&quot;&gt;
            &lt;a href=&quot;${pageContext.request.contextPath }/story_show.action?story_id=${story.story_id}&quot;&gt;
                &lt;li class=&quot;mdui-list-item mdui-ripple&quot;&gt;
                    &lt;div class=&quot;mdui-list-item-avatar&quot;&gt;&lt;img src=&quot;avatar1.jpg&quot;/&gt;&lt;/div&gt;
                    &lt;div class=&quot;mdui-list-item-content&quot;&gt;
                        &lt;div class=&quot;mdui-list-item-title mdui-list-item-two-line&quot;&gt;${story.story_title}&lt;/div&gt;
                        &lt;div class=&quot;mdui-list-item-text mdui-list-item-one-line&quot;&gt; ${story.user.username}发表在说天谈地
                            最后回复：haigeek 2017.06.07
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/li&gt;
            &lt;/a&gt;
        &lt;/ul&gt;
    &lt;/c:forEach&gt;
    &lt;s:set name=&quot;page&quot; value=&quot;#request.page&quot;&gt;&lt;/s:set&gt;
    &lt;nav aria-label=&quot;Page navigation&quot;&gt;
        &lt;ul class=&quot;pagination center-block&quot;&gt;
            &lt;s:if test=&quot;#page.hasPre&quot;&gt;
            &lt;li&gt;
                &lt;a href=story_getAllStory?pageNow=&lt;s:property value=&quot;#page.pageNow-1&quot;/&gt;
                aria-label=&quot;Previous&quot;&gt;
                &lt;span aria-hidden=&quot;true&quot;&gt;&amp;laquo;&lt;/span&gt;
                &lt;/a&gt;
            &lt;/li&gt;
            &lt;/s:if&gt;
                &lt;s:if test=&quot;#page.hasFirst&quot;&gt;
                &lt;li&gt;
                    &lt;a href=&quot;story_getAllStory?pageNow=1&quot;
                        aria-label=&quot;Previous&quot;&gt;
                        &lt;span aria-hidden=&quot;true&quot;&gt;首页&lt;/span&gt;
                    &lt;/a&gt;
                &lt;/li&gt;
                &lt;/s:if&gt;

            &lt;li&gt;&lt;a href=&quot;story_getAllStory?pageNow=1&quot;&gt;1&lt;/a&gt;&lt;/li&gt;
            &lt;li&gt;&lt;a href=&quot;story_getAllStory?pageNow=2&quot;&gt;2&lt;/a&gt;&lt;/li&gt;
            &lt;li&gt;&lt;a href=&quot;story_getAllStory?pageNow=3&quot;&gt;3&lt;/a&gt;&lt;/li&gt;
            &lt;li&gt;&lt;a href=&quot;story_getAllStory?pageNow=4&quot;&gt;4&lt;/a&gt;&lt;/li&gt;
            &lt;li&gt;&lt;a href=&quot;story_getAllStory?pageNow=5&quot;&gt;5&lt;/a&gt;&lt;/li&gt;
            &lt;s:if test=&quot;#page.hasLast&quot;&gt;
            &lt;li&gt;
                &lt;a href=story_getAllStory?pageNow=&lt;s:property value=&quot;#page.totalPage&quot;/&gt;
                    aria-label=&quot;Previous&quot;&gt;
                    &lt;span aria-hidden=&quot;true&quot;&gt;尾页&lt;/span&gt;
                &lt;/a&gt;
            &lt;/li&gt;
            &lt;/s:if&gt;
            &lt;s:if test=&quot;#page.hasNext&quot;&gt;
            &lt;li&gt;
                &lt;a href=&quot;story_getAllStory?pageNow=&lt;s:property value=&quot;#page.pageNow+1&quot; /&gt; &quot;
                    aria-label=&quot;Next&quot;&gt;
                    &lt;span aria-hidden=&quot;true&quot;&gt;&amp;raquo;&lt;/span&gt;
                &lt;/a&gt;
            &lt;/li&gt;
            &lt;/s:if&gt;
        &lt;/ul&gt;

    &lt;/nav&gt;
&lt;/div&gt;
</code></pre><p>视图使用了一些样式（bootstrap等），主要是标签的使用，需要加入</p>
<pre><code>&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;
&lt;%@ taglib uri=&quot;/struts-tags&quot; prefix=&quot;s&quot; %&gt;
</code></pre><h3 id="配置文件">配置文件</h3>
<p>配置struts.xml和spring配置文件即可，我的项目主要是添加功能，配置文件已经配置好，只贴了核心的代码，最后在struts.xml添加一项配置即可</p>
    </article>
  </main>
  





<div id="comment"></div>




<script>
    const s = document.createElement("script")
    s.src = "https://giscus.app/client.js"
    s.crossOrigin = "anonymous"
    s.async = true
    s.setAttribute("data-repo", "haigeek\/blog-comment-bygiscus")
    s.setAttribute("data-repo-id", "R_kgDOIq0W4w")
    s.setAttribute("data-category", "Announcements")
    s.setAttribute("data-category-id", "DIC_kwDOIq0W484CTPda")
    s.setAttribute("data-mapping", "pathname")
    s.setAttribute("data-strict", "0")
    s.setAttribute("data-reactions-enabled", "1")
    s.setAttribute("data-emit-metadata", "0")
    s.setAttribute("data-input-position", "buttom")
    s.setAttribute("data-theme", window.minima_theme + "_protanopia")
    s.setAttribute("data-lang", "en")
    s.setAttribute("data-loading", "lazy")
    document.getElementById("comment").appendChild(s)
</script>









</div>


  <footer class="mt-8 mb-8">
  <div class="container mx-auto">
    <div class="mt-8 flex justify-between items-center">
      <p class="mt-0 text-sm">
        © 2022 haigeek |
        <a href="https://gohugo.io" target="_blank" rel="noopener noreferrer">Hugo</a> on
        <a href="https://github.com/mivinci/hugo-theme-minima" target="_blank" rel="noopener noreferrer">Minima</a>
      </p>
      <p class="flex items-center mt-0">
        
          <a class="icon ml-1 mr-1" href="mailto:haigeek@qq.com" title="email">
          
            <svg fill="#63636f" width="22" height="22" viewBox="0 0 24 24"><path d="M3 3h18a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm9.06 8.683L5.648 6.238L4.353 7.762l7.72 6.555l7.581-6.56l-1.308-1.513l-6.285 5.439z"/></svg>
          
          </a>
        
          <a class="icon ml-1 mr-1" href="https://github.com/haigeek" title="github">
          
            <svg fill="#63636f" width="18" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
          
          </a>
        
          <a class="icon ml-1 mr-1" href="/index.xml" title="rss">
          
            <svg fill="#63636f" t="1626591563876" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1984" width="18" height="16"><path d="M128 768a128 128 0 1 0 0 256 128 128 0 0 0 0-256zM0 368v176c265.104 0 480 214.912 480 480h176c0-362.32-293.696-656-656-656zM0 0v176c468.336 0 848 379.664 848 848h176C1024 458.464 565.536 0 0 0z" p-id="1985"></path></svg>
          
          </a>
        
      </p>
    </div>
  </div>
</footer>
</body>

</html>