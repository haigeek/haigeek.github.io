<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Liste - https://haigeek.me">
    <title>winestory中struts2的使用 | haigeek blog</title>
    <meta name="description" content="I&#39;m a software engineer , Use Java as the primary programming language, Interested in Microervices, K8s, Devops ... In this blog , I share my technical problems and life records. ">
    <meta property="og:title" content="winestory中struts2的使用" />
<meta property="og:description" content="使用ssh框架做的一个小论坛是我的第一个项目，ssh框架在现在早已经过时，但是当初学习和解决问题的精神却是最重要的，因此我将相关的博文进行归档，记录并缅怀初学编程时的历程。这一篇是struts2框架相关内容。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://haigeek.me/posts/project/winestory-struts2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-07-22T20:27:55+00:00" />
<meta property="article:modified_time" content="2017-07-22T20:27:55+00:00" />

    <meta itemprop="name" content="winestory中struts2的使用">
<meta itemprop="description" content="使用ssh框架做的一个小论坛是我的第一个项目，ssh框架在现在早已经过时，但是当初学习和解决问题的精神却是最重要的，因此我将相关的博文进行归档，记录并缅怀初学编程时的历程。这一篇是struts2框架相关内容。"><meta itemprop="datePublished" content="2017-07-22T20:27:55+00:00" />
<meta itemprop="dateModified" content="2017-07-22T20:27:55+00:00" />
<meta itemprop="wordCount" content="1526">
<meta itemprop="keywords" content="struts2,java web," />
    
    <link rel="canonical" href="https://haigeek.me/posts/project/winestory-struts2/">
    <link rel="icon" href="https://haigeek.me/assets/favicon.ico">
    <link rel="dns-prefetch" href="https://www.google-analytics.com">
    <link href="https://www.google-analytics.com" rel="preconnect" crossorigin>
    <link rel="alternate" type="application/atom+xml" title="haigeek blog" href="https://haigeek.me/atom.xml" />
    <link rel="alternate" type="application/json" title="haigeek blog" href="https://haigeek.me/feed.json" />
    <link rel="shortcut icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII=">
    
    
    <style>*,:after,:before{box-sizing:border-box;padding:0}body{font:1rem/1.5 '-apple-system',BlinkMacSystemFont,avenir next,avenir,helvetica,helvetica neue,ubuntu,roboto,noto,segoe ui,arial,sans-serif;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;padding:2rem;background:#f5f5f5;color:#000}.skip-link{position:absolute;top:-40px;left:0;background:#eee;z-index:100}.skip-link:focus{top:0}h1,h2,h3,h4,h5,strong,b{font-size:inherit;font-weight:600}header{line-height:2;padding-bottom:1.5rem}.link{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-decoration:none}.time{font-variant-numeric:tabular-nums;white-space:nowrap}blockquote{border-left:5px solid #eee;padding-left:1rem;margin:0}a,a:visited{color:inherit}a:hover,a.heading-link{text-decoration:none}pre{padding:.5rem;overflow:auto;overflow-x:scroll;overflow-wrap:normal}code,pre{font-family:San Francisco Mono,Monaco,consolas,lucida console,dejavu sans mono,bitstream vera sans mono,monospace;font-size:normal;font-size:small;background:#eee}code{margin:.1rem;border:none}ul{list-style-type:square}ul,ol{padding-left:1.2rem}.list{line-height:2;list-style-type:none;padding-left:0}.list li{padding-bottom:.1rem}.meta{color:#777}.content{max-width:70ch;margin:0 auto}header{line-height:2;display:flex;justify-content:space-between;padding-bottom:1rem}header a{text-decoration:none}header ul{list-style-type:none;padding:0}header li,header a{display:inline}h2.post{padding-top:.5rem}header ul a:first-child{padding-left:1rem}.nav{height:1px;background:#000;content:'';max-width:10%}.list li{display:flex;align-items:baseline}.list li time{flex:initial}.hr-list{margin-top:0;margin-bottom:0;margin-right:.5rem;margin-left:.5rem;height:1px;border:0;border-bottom:1px dotted #ccc;flex:1 0 1rem}.m,hr{border:0;margin:3rem 0}img{max-width:100%;height:auto}.post-date{margin:5% 0}.index-date{color:#9a9a9a}.animate-blink{animation:opacity 1s infinite;opacity:1}@keyframes opacity{0%{opacity:1}50%{opacity:.5}100%{opacity:0}}.tags{display:flex;justify-content:space-between}.tags ul{padding:0;margin:0}.tags li{display:inline}.avatar{height:120px;width:120px;position:relative;margin:-10px 0 0 15px;float:right;border-radius:50%} </style>
  
    
  
  
  <script type="application/ld+json">
  {
      "@context": "http://schema.org",
      "@type": "BlogPosting",
      "articleSection": "posts",
      "name": "winestory中struts2的使用",
      "headline": "winestory中struts2的使用",
      "alternativeHeadline": "",
      "description": "\u003cp\u003e使用ssh框架做的一个小论坛是我的第一个项目，ssh框架在现在早已经过时，但是当初学习和解决问题的精神却是最重要的，因此我将相关的博文进行归档，记录并缅怀初学编程时的历程。这一篇是struts2框架相关内容。\u003c\/p\u003e",
      "inLanguage": "zh-cn",
      "isFamilyFriendly": "true",
      "mainEntityOfPage": {
          "@type": "WebPage",
          "@id": "https:\/\/haigeek.me\/posts\/project\/winestory-struts2\/"
      },
      "author" : {
          "@type": "Person",
          "name": ""
      },
      "creator" : {
          "@type": "Person",
          "name": ""
      },
      "accountablePerson" : {
          "@type": "Person",
          "name": ""
      },
      "copyrightHolder" : "haigeek blog",
      "copyrightYear" : "2017",
      "dateCreated": "2017-07-22T20:27:55.00Z",
      "datePublished": "2017-07-22T20:27:55.00Z",
      "dateModified": "2017-07-22T20:27:55.00Z",
      "publisher":{
          "@type":"Organization",
          "name": "haigeek blog",
          "url": "https://haigeek.me",
          "logo": {
              "@type": "ImageObject",
              "url": "https:\/\/haigeek.me\/assets\/favicon.ico",
              "width":"32",
              "height":"32"
          }
      },
      "image": "https://haigeek.me/assets/favicon.ico",
      "url" : "https:\/\/haigeek.me\/posts\/project\/winestory-struts2\/",
      "wordCount" : "1526",
      "genre" : [ "struts2" , "java web" ],
      "keywords" : [ "struts2" , "java web" ]
  }
  </script>
  
  
  </head>

<body>
  <a class="skip-link" href="#main">Skip to main</a>
  <main id="main">
  <div class="content">
    <header>
<p style="padding: 0;margin: 0;">
  <a href="/">
    <b>haigeek blog</b>
    <span class="text-stone-500 animate-blink">▮</span>
  </a>
</p>
<ul style="padding: 0;margin: 0;">
  
  
  <li class="">
    <a href="/posts/"><span>Post</span></a>
    
  <li class="">
    <a href="/about/"><span>About</span></a>
    
  <li class="">
    <a href="https://wiki.haigeek.me"><span>Wiki</span></a>
    
  </li>
</ul>
</header>
<hr class="hr-list" style="padding: 0;margin: 0;">
    <section>
      <h2 class="post">winestory中struts2的使用</h2>
      <p>使用ssh框架做的一个小论坛是我的第一个项目，ssh框架在现在早已经过时，但是当初学习和解决问题的精神却是最重要的，因此我将相关的博文进行归档，记录并缅怀初学编程时的历程。这一篇是struts2框架相关内容。</p>
<h1 id="winestory中struts2的使用">winestory中struts2的使用</h1>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1 id="什么是struts">什么是Struts</h1>
<p>Struts直译过来就是支柱，枝干的意思，它实现了基于javaweb应用的Model-View——Controller设计模式的应用框架</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="struts的体系结构">Struts的体系结构</h2>
<p>一个请求在Struts2框架中的处理大概会经过以下结构步骤</p>
<ol>
<li>客户端发出一个指向Servlet容器（例如Tomcat）的请求</li>
<li>这个请求会经过结构过滤器Filter(ActionContextCleanUP可选过滤器，其他web过滤器如SiteMesh等)，最后到达FilterDispatcher过滤器</li>
<li>接着FilterDispatcher（过滤调度器）过滤器被调用，FilterDispatcher询问ActionMapper来决定这个请是否需要调用某个Action</li>
<li>如果ActionMapper决定需要调用某个Action，FilterDispatcher把请求的处理交给Action对象的代理（ActionProxy）</li>
<li>ActionProxy通过配置管理器（Configuration Manager）读取框架的相关的配置文件（Struts.xml以及它包含的*.xml配置文件）找到需要调用的Action类</li>
<li>找到需要调用的Action类之后，ActionProxy会创建一个ActionInvocation（动作调用)的实例</li>
<li>ActionInvocation在调用Action的过程之前，会先依次调用相关配置拦截器（Intercepter）执行结果返回结果字符串</li>
<li>ActionInvocation负责查找结果字符串对应的Result。然后再执行这个Result，再返回对应的结果视图（如JSP）来呈现界面</li>
<li>再次调用所用的配置拦截器（调用顺序与第7步相反），然后响应（HttpServletResponse)被返回给浏览器</li>
</ol>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="struts2的优点">Struts2的优点</h2>
<ul>
<li>Struts2是非侵入式设计，即不依赖与Servlet API和StrutsAPI</li>
<li>Strtus2提供了强大的拦截器，利用拦截器可进行AOP编程（面向切面的编程），实现权限的拦截等功能</li>
<li>Strtus2提供了类型转换器，可以很方便地进行类型转换，例如将特殊的的请求参数转换成需要的类型</li>
<li>Struts2支持多种表现层技术，如JSP、FreeMarker、Vectocity</li>
<li>Struts2的输入验证可以对指定的方法进行验证<!-- raw HTML omitted -->笔记来源：<a href="https://www.shiyanlou.com/">实验楼</a></li>
</ul>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1 id="struts2核心配置文件strutsxml详解">struts2核心配置文件struts.xml详解</h1>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="strutsxml文件示例">struts.xml文件示例</h2>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1</span><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2</span><span><span style="color:#7f848e">&lt;!DOCTYPE struts PUBLIC
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3</span><span><span style="color:#7f848e">    &#34;-//Apache Software Foundation//DTD Struts Configuration 2.3//EN&#34;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4</span><span><span style="color:#7f848e">    &#34;http://struts.apache.org/dtds/struts-2.3.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5</span><span><span style="color:#e06c75">&lt;struts&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6</span><span>    <span style="color:#e06c75">&lt;constant</span> <span style="color:#e06c75">name=</span><span style="color:#98c379">&#34;struts.enable.DynamicMethodInvocation&#34;</span> <span style="color:#e06c75">value=</span><span style="color:#98c379">&#34;false&#34;</span> <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7</span><span>    <span style="color:#e06c75">&lt;constant</span> <span style="color:#e06c75">name=</span><span style="color:#98c379">&#34;struts.devMode&#34;</span> <span style="color:#e06c75">value=</span><span style="color:#98c379">&#34;true&#34;</span> <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8</span><span>    <span style="color:#e06c75">&lt;package</span> <span style="color:#e06c75">name=</span><span style="color:#98c379">&#34;default&#34;</span> <span style="color:#e06c75">namespace=</span><span style="color:#98c379">&#34;/&#34;</span> <span style="color:#e06c75">extends=</span><span style="color:#98c379">&#34;struts-default&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9</span><span>        <span style="color:#e06c75">&lt;default-action-ref</span> <span style="color:#e06c75">name=</span><span style="color:#98c379">&#34;index&#34;</span> <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10</span><span>        <span style="color:#e06c75">&lt;global-results&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11</span><span>            <span style="color:#e06c75">&lt;result</span> <span style="color:#e06c75">name=</span><span style="color:#98c379">&#34;error&#34;</span><span style="color:#e06c75">&gt;</span>/WEB-INF/jsp/error.jsp<span style="color:#e06c75">&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12</span><span>        <span style="color:#e06c75">&lt;/global-results&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13</span><span>        <span style="color:#e06c75">&lt;global-exception-mappings&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14</span><span>            <span style="color:#e06c75">&lt;exception-mapping</span> <span style="color:#e06c75">exception=</span><span style="color:#98c379">&#34;java.lang.Exception&#34;</span> <span style="color:#e06c75">result=</span><span style="color:#98c379">&#34;error&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15</span><span>        <span style="color:#e06c75">&lt;/global-exception-mappings&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">16</span><span>        <span style="color:#e06c75">&lt;action</span> <span style="color:#e06c75">name=</span><span style="color:#98c379">&#34;index&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">17</span><span>            <span style="color:#e06c75">&lt;result</span> <span style="color:#e06c75">type=</span><span style="color:#98c379">&#34;redirectAction&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">18</span><span>                <span style="color:#e06c75">&lt;param</span> <span style="color:#e06c75">name=</span><span style="color:#98c379">&#34;actionName&#34;</span><span style="color:#e06c75">&gt;</span>HelloWorld<span style="color:#e06c75">&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">19</span><span>                <span style="color:#e06c75">&lt;param</span> <span style="color:#e06c75">name=</span><span style="color:#98c379">&#34;namespace&#34;</span><span style="color:#e06c75">&gt;</span>/example<span style="color:#e06c75">&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">20</span><span>            <span style="color:#e06c75">&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">21</span><span>        <span style="color:#e06c75">&lt;/action&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">22</span><span>    <span style="color:#e06c75">&lt;/package&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">23</span><span>    <span style="color:#e06c75">&lt;include</span> <span style="color:#e06c75">file=</span><span style="color:#98c379">&#34;example.xml&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">24</span><span><span style="color:#e06c75">&lt;/struts&gt;</span>
</span></span></code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="constant">constant</h2>
<p>包含一些属性设置，他可以改变struts框架的一些行为。例如示例中的 struts.enable.DynamicMethodInvocation 设为true，表示设置动态方法调用为真，而 struts.devMode 表示是否启用开发者模式。</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="package">package</h2>
<p>在struts中，package用来管理action、result、interceptor、interceptor-stack等配置信息</p>
<ul>
<li>name：必须唯一，这样其他package如果引用本package的话，才能找得到。</li>
<li>extends：当本package继承其他package的时候，会继承父package的所有配置属性（例如action、result等等）；由于package的信息获取是按照struts.xml文件中的先后顺序进行的，因此父package必须在子package之前先定义。通常情况下，继承一个“struts-default.xml”的package，这是 Struts2 默认的package。<!-- raw HTML omitted -->namespace：namespace的配置会改变项目的url访问地址，主要是针对比较大型的项目以方便管理action，因为不同namespace中的action可以同名，从而解决action重名的问题。如果没有指定namespace，则默认为“”。</li>
</ul>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="action">action</h2>
<ul>
<li>name：action的名称</li>
<li>class：action对应的java类</li>
<li>method：在该class中对应执行Action的函数方法，默认是execute()。</li>
<li>converter：类型转换器</li>
</ul>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="result">result</h2>
<ul>
<li>name：具体来说，就是根据某个返回结果，指定响应逻辑，默认是success。</li>
<li>type：返回结果的类型，默认为dispatcher。</li>
</ul>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="default-action-ref">default-action-ref</h2>
<p>如果找不到项目请求的action，就会报出404错误，而且这种错误不可避免，所以我们可以使用 default-action-ref 来指定一个默认的action，如果系统出现找不到action的情况，就会来调用这个默认的action。</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="global-results">global-results</h2>
<p>设置package范围内的全局响应结果。在多个action都返回同一个逻辑视图（通常为某个jsp页面）的情况下，可以通过该标签来统一配置。</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="global-exception-mapping">global-exception-mapping</h2>
<p>配置发生异常时的视图信息。exception-mapping是控制action范围内的，而global-exception-mapp是控制package范围内的。两个都配置时，exception-mapping的优先级更高。</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="include">include</h2>
<p>使用include引入外部配置文件，直接给出url即可</p>
<pre tabindex="0"><code>&lt;include file=&#34;**/**/***.xml&#34; /&gt;
</code></pre><p>使用 include 的好处在于，例如当我们开发一个比较大型的项目的时候，配置文件肯定会写一大堆。如果写在一个配置文件里就不好查看和修改，不便于维护；所以使用 include 后可以根据模块、也可以根据功能来划分，这样就比较清晰，方便管理和维护。<!-- raw HTML omitted -->其他较为常用的还有 拦截器等等。<!-- raw HTML omitted -->来源：实验楼 <a href="https://www.shiyanlou.com/courses/32/labs/920/document">https://www.shiyanlou.com/courses/32/labs/920/document</a></p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1 id="struts2中action接收参数的三种方法">struts2中action接收参数的三种方法</h1>
<p>struts2中action接收参数的方法主要有一下三种</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="1使用action-中的属性接收参数">1.使用action 中的属性接收参数</h2>
<ul>
<li>定义：在action类中定义属性，创建get和set方法</li>
<li>接收：通过属性接收参数，如userId；</li>
<li>发送：通过属性名传递参数，如：user_usershow?userId=1;</li>
</ul>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="2使用domainmodel接收参数">2.使用DomainModel接收参数：</h2>
<ul>
<li>定义：定义Model类，在action中定义Model类的对象（不需要new），创建该对象的get和set方法</li>
<li>接收：通过对象的属性接收参数，如user.getUserName();</li>
<li>发送：使用对象的属相传递参数，如user_usershow?user.user.userName=xxx;</li>
</ul>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="3使用modeldriven接收参数">3使用ModelDriven接收参数</h2>
<ul>
<li>定义：action实现ModelDriven泛型接口，定义Model类的对象（必须new），通过getModel方法返回该对象；</li>
<li>接收：通过对象的属性接收参数，如：user.getUserName()；</li>
<li>发送：直接使用属性名传递参数，如：user_usershow?userName=xxx
<!-- raw HTML omitted --><!-- raw HTML omitted --></li>
</ul>
<h1 id="action获取表单提交数据">Action获取表单提交数据</h1>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="获取表单提交数据的三种主要方式">获取表单提交数据的三种主要方式</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="1使用actioncontext">1.使用ActionContext</h3>
<p>Map&lt;String,Object&gt;getParameters() 返回一个包含所有HttpServletRequest参数信息</p>
<ol>
<li>因为方法不是静态的方法，需要创建ActionContext类的对象</li>
<li>ActionContext对象不是new出来的 static ActionContext getContext() 获取当前线程的ActionContext对象</li>
<li>实例</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1</span><span><span style="color:#c678dd">public</span> <span style="color:#e06c75">String</span> <span style="color:#61afef;font-weight:bold">execute</span><span style="color:#56b6c2">()</span> <span style="color:#c678dd">throws</span> <span style="color:#e06c75">Exception</span> <span style="color:#56b6c2">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2</span><span>        <span style="color:#7f848e">//第一种方式：使用ActionContext类获取
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3</span><span><span style="color:#7f848e"></span>        <span style="color:#7f848e">//获取ActionContext对象
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4</span><span><span style="color:#7f848e"></span>        <span style="color:#e06c75">ActionContext</span> <span style="color:#e06c75">context</span><span style="color:#56b6c2">=</span><span style="color:#e06c75">ActionContext</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">getContext</span><span style="color:#56b6c2">();</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5</span><span>        <span style="color:#7f848e">//调用方法得到表单数据
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6</span><span><span style="color:#7f848e"></span>        <span style="color:#e06c75">Map</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">String</span><span style="color:#56b6c2">,</span> <span style="color:#e06c75">Object</span><span style="color:#56b6c2">&gt;</span> <span style="color:#e06c75">map</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">context</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">getParameters</span><span style="color:#56b6c2">();</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7</span><span>        <span style="color:#e06c75">Set</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">String</span><span style="color:#56b6c2">&gt;</span> <span style="color:#e06c75">keys</span><span style="color:#56b6c2">=</span><span style="color:#e06c75">map</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">keySet</span><span style="color:#56b6c2">();</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8</span><span>        <span style="color:#7f848e">//根据key得到vaule，使用数组形式是因为输入项可能有复选框
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9</span><span><span style="color:#7f848e"></span>        <span style="color:#c678dd">for</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">String</span> <span style="color:#e06c75">key</span><span style="color:#56b6c2">:</span><span style="color:#e06c75">keys</span><span style="color:#56b6c2">){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10</span><span>            <span style="color:#e06c75">Object</span><span style="color:#56b6c2">[]</span> <span style="color:#e06c75">obj</span><span style="color:#56b6c2">=(</span><span style="color:#e06c75">Object</span><span style="color:#56b6c2">[])</span> <span style="color:#e06c75">map</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">get</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">key</span><span style="color:#56b6c2">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11</span><span>            <span style="color:#e06c75">System</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">out</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">println</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">Arrays</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">toString</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">obj</span><span style="color:#56b6c2">));</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12</span><span>        <span style="color:#56b6c2">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13</span><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">NONE</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14</span><span>    <span style="color:#56b6c2">}</span>
</span></span></code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="2使用servletactioncontext类">2.使用ServletActionContext类</h3>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1</span><span><span style="color:#c678dd">public</span> <span style="color:#e06c75">String</span> <span style="color:#61afef;font-weight:bold">execute</span><span style="color:#56b6c2">()</span> <span style="color:#c678dd">throws</span> <span style="color:#e06c75">Exception</span> <span style="color:#56b6c2">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2</span><span>        <span style="color:#7f848e">//使用ServletActionContext获取request对象
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3</span><span><span style="color:#7f848e"></span>        <span style="color:#e06c75">HttpServletRequest</span> <span style="color:#e06c75">request</span><span style="color:#56b6c2">=</span><span style="color:#e06c75">ServletActionContext</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">getRequest</span><span style="color:#56b6c2">();</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4</span><span>        <span style="color:#7f848e">//调用request里面的方法得到结果
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5</span><span><span style="color:#7f848e"></span>        <span style="color:#e06c75">String</span> <span style="color:#e06c75">username</span><span style="color:#56b6c2">=</span><span style="color:#e06c75">request</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">getParameter</span><span style="color:#56b6c2">(</span><span style="color:#98c379">&#34;username&#34;</span><span style="color:#56b6c2">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6</span><span>        <span style="color:#e06c75">String</span> <span style="color:#e06c75">password</span><span style="color:#56b6c2">=</span><span style="color:#e06c75">request</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">getParameter</span><span style="color:#56b6c2">(</span><span style="color:#98c379">&#34;password&#34;</span><span style="color:#56b6c2">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7</span><span>        <span style="color:#e06c75">String</span> <span style="color:#e06c75">address</span><span style="color:#56b6c2">=</span><span style="color:#e06c75">request</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">getParameter</span><span style="color:#56b6c2">(</span><span style="color:#98c379">&#34;address&#34;</span><span style="color:#56b6c2">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8</span><span>        <span style="color:#e06c75">System</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">out</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">println</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">username</span><span style="color:#56b6c2">+</span><span style="color:#98c379">&#34; &#34;</span><span style="color:#56b6c2">+</span><span style="color:#e06c75">password</span><span style="color:#56b6c2">+</span><span style="color:#98c379">&#34; &#34;</span><span style="color:#56b6c2">+</span><span style="color:#e06c75">address</span><span style="color:#56b6c2">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9</span><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">NONE</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10</span><span>    <span style="color:#56b6c2">}</span>
</span></span></code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="3使用接口注入方式">3.使用接口注入方式</h3>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="在action操作域对象">在action操作域对象</h2>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1</span><span><span style="color:#7f848e">//操作三个域对象
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2</span><span><span style="color:#7f848e"></span>        <span style="color:#7f848e">//1.request域
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3</span><span><span style="color:#7f848e"></span>        <span style="color:#e06c75">HttpServletRequest</span> <span style="color:#e06c75">request</span><span style="color:#56b6c2">=</span><span style="color:#e06c75">ServletActionContext</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">getRequest</span><span style="color:#56b6c2">();</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4</span><span>        <span style="color:#e06c75">request</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">setAttribute</span><span style="color:#56b6c2">(</span><span style="color:#98c379">&#34;req&#34;</span><span style="color:#56b6c2">,</span><span style="color:#98c379">&#34;reqvalue&#34;</span> <span style="color:#56b6c2">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5</span><span>        <span style="color:#7f848e">//2.session域
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6</span><span><span style="color:#7f848e"></span>        <span style="color:#e06c75">HttpSession</span> <span style="color:#e06c75">session</span><span style="color:#56b6c2">=</span><span style="color:#e06c75">request</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">getSession</span><span style="color:#56b6c2">();</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7</span><span>        <span style="color:#e06c75">session</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">setAttribute</span><span style="color:#56b6c2">(</span><span style="color:#98c379">&#34;sess&#34;</span><span style="color:#56b6c2">,</span> <span style="color:#98c379">&#34;sessValue&#34;</span><span style="color:#56b6c2">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8</span><span>        <span style="color:#7f848e">//3ServletContext域
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9</span><span><span style="color:#7f848e"></span>        <span style="color:#e06c75">ServletContext</span> <span style="color:#e06c75">context</span><span style="color:#56b6c2">=</span><span style="color:#e06c75">ServletActionContext</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">getServletContext</span><span style="color:#56b6c2">();</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10</span><span>        <span style="color:#e06c75">context</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">setAttribute</span><span style="color:#56b6c2">(</span><span style="color:#98c379">&#34;contextname&#34;</span><span style="color:#56b6c2">,</span> <span style="color:#98c379">&#34;contextValue&#34;</span><span style="color:#56b6c2">);</span>
</span></span></code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="struts2提供获取表单数据方式">struts2提供获取表单数据方式</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="1原始方式获取表单封装到实体类对象">1.原始方式获取表单封装到实体类对象</h3>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1</span><span><span style="color:#c678dd">public</span> <span style="color:#e06c75">String</span> <span style="color:#61afef;font-weight:bold">execute</span><span style="color:#56b6c2">()</span> <span style="color:#c678dd">throws</span> <span style="color:#e06c75">Exception</span> <span style="color:#56b6c2">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2</span><span>        <span style="color:#e06c75">HttpServletRequest</span> <span style="color:#e06c75">request</span><span style="color:#56b6c2">=</span><span style="color:#e06c75">ServletActionContext</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">getRequest</span><span style="color:#56b6c2">();</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3</span><span>        <span style="color:#e06c75">String</span> <span style="color:#e06c75">username</span><span style="color:#56b6c2">=</span><span style="color:#e06c75">request</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">getParameter</span><span style="color:#56b6c2">(</span><span style="color:#98c379">&#34;username&#34;</span><span style="color:#56b6c2">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4</span><span>        <span style="color:#e06c75">String</span> <span style="color:#e06c75">password</span><span style="color:#56b6c2">=</span><span style="color:#e06c75">request</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">getParameter</span><span style="color:#56b6c2">(</span><span style="color:#98c379">&#34;password&#34;</span><span style="color:#56b6c2">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5</span><span>        <span style="color:#e06c75">String</span> <span style="color:#e06c75">address</span><span style="color:#56b6c2">=</span><span style="color:#e06c75">request</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">getParameter</span><span style="color:#56b6c2">(</span><span style="color:#98c379">&#34;address&#34;</span><span style="color:#56b6c2">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6</span><span>        <span style="color:#7f848e">//封装到实体类
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7</span><span><span style="color:#7f848e"></span>        <span style="color:#e06c75">User</span> <span style="color:#e06c75">user</span><span style="color:#56b6c2">=</span><span style="color:#c678dd">new</span> <span style="color:#e06c75">User</span><span style="color:#56b6c2">();</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8</span><span>        <span style="color:#e06c75">user</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">setUsername</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">username</span><span style="color:#56b6c2">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9</span><span>        <span style="color:#e06c75">user</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">setPassword</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">password</span><span style="color:#56b6c2">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10</span><span>        <span style="color:#e06c75">user</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">setAddress</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">address</span><span style="color:#56b6c2">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11</span><span>        <span style="color:#e06c75">System</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">out</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">println</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">user</span><span style="color:#56b6c2">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12</span><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">NONE</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13</span><span>    <span style="color:#56b6c2">}</span>
</span></span></code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="2属性封装">2.属性封装</h3>
<ol>
<li>直接把表单提交属性封装到action属性中</li>
<li>实现步骤</li>
<li>在action成员变量位置定义变量，变量名称和表单输入项的name属性值一样</li>
<li>生成变量的get和set方法</li>
<li>使用属性封装获取表单数据到属性里面，不能直接把数据封装到实体类对象里面</li>
<li>实例</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1</span><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">sysAction</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">ActionSupport</span><span style="color:#56b6c2">{</span>    
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2</span><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">String</span> <span style="color:#e06c75">username</span><span style="color:#56b6c2">;</span>    
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3</span><span>   
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4</span><span>    <span style="color:#c678dd">public</span> <span style="color:#e06c75">String</span> <span style="color:#61afef;font-weight:bold">login</span><span style="color:#56b6c2">()</span> <span style="color:#c678dd">throws</span> <span style="color:#e06c75">Exception</span> <span style="color:#56b6c2">{</span>    
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5</span><span>        <span style="color:#e06c75">System</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">out</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">println</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">username</span><span style="color:#56b6c2">);</span>    
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6</span><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">SUCCESS</span><span style="color:#56b6c2">;</span>    
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7</span><span>    <span style="color:#56b6c2">}</span>    
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8</span><span>   
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9</span><span>    <span style="color:#c678dd">public</span> <span style="color:#e06c75">String</span> <span style="color:#61afef;font-weight:bold">getUsername</span><span style="color:#56b6c2">()</span> <span style="color:#56b6c2">{</span>    
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10</span><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">username</span><span style="color:#56b6c2">;</span>    
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11</span><span>    <span style="color:#56b6c2">}</span>    
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12</span><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">setUsername</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">String</span> <span style="color:#e06c75">username</span><span style="color:#56b6c2">)</span> <span style="color:#56b6c2">{</span>    
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13</span><span>        <span style="color:#c678dd">this</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">username</span><span style="color:#56b6c2">=</span> <span style="color:#e06c75">username</span><span style="color:#56b6c2">;</span>    
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14</span><span>    <span style="color:#56b6c2">}</span>    
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15</span><span><span style="color:#56b6c2">}</span>
</span></span></code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="3模型驱动封装对于要传入多个model第二种方式不方便">3.模型驱动封装，对于要传入多个model，第二种方式不方便</h3>
<ol>
<li>可以直接把表单数据封装到实体类对象</li>
<li>实现步骤</li>
<li>action实现接口ModelDriven</li>
<li>实现接口里面的方法getModel方法</li>
<li>在action里面创建实体类对象</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1</span><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">DataDemo2Action</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">ActionSupport</span> <span style="color:#c678dd">implements</span> <span style="color:#e06c75">ModelDriven</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">User</span><span style="color:#56b6c2">&gt;{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2</span><span>    <span style="color:#7f848e">//创建对象
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3</span><span><span style="color:#7f848e"></span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">User</span> <span style="color:#e06c75">user</span><span style="color:#56b6c2">=</span><span style="color:#c678dd">new</span> <span style="color:#e06c75">User</span><span style="color:#56b6c2">();</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4</span><span>    <span style="color:#c678dd">public</span> <span style="color:#e06c75">User</span> <span style="color:#61afef;font-weight:bold">getModel</span><span style="color:#56b6c2">()</span> <span style="color:#56b6c2">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5</span><span>        <span style="color:#7f848e">// 返回创建的对象
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6</span><span><span style="color:#7f848e"></span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">user</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7</span><span>    <span style="color:#56b6c2">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8</span><span>    <span style="color:#c678dd">public</span> <span style="color:#e06c75">String</span> <span style="color:#61afef;font-weight:bold">execute</span><span style="color:#56b6c2">()</span> <span style="color:#c678dd">throws</span> <span style="color:#e06c75">Exception</span> <span style="color:#56b6c2">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9</span><span>        
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10</span><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">NONE</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11</span><span>    <span style="color:#56b6c2">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12</span><span><span style="color:#56b6c2">}</span>
</span></span></code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="4可以使用多个module实体对象的封装">4.可以使用多个module实体对象的封装</h3>
<p>此种封装方法，变量名称和表单输入项的name属性值不一样，变单输入项样式为</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1</span><span>&lt;<span style="color:#e06c75">form</span> <span style="color:#e06c75">action</span><span style="color:#56b6c2">=</span><span style="color:#98c379">&#34;sys/login.action&#34;</span> <span style="color:#e06c75">method</span><span style="color:#56b6c2">=</span><span style="color:#98c379">&#34;post&#34;</span>&gt;    
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2</span><span>    &lt;<span style="color:#e06c75">input</span> <span style="color:#e06c75">type</span><span style="color:#56b6c2">=</span><span style="color:#98c379">&#34;text&#34;</span> <span style="color:#e06c75">name</span><span style="color:#56b6c2">=</span><span style="color:#98c379">&#34;user.username&#34;</span>&gt;    
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3</span><span>    &lt;<span style="color:#e06c75">input</span> <span style="color:#e06c75">type</span><span style="color:#56b6c2">=</span><span style="color:#98c379">&#34;text&#34;</span> <span style="color:#e06c75">name</span><span style="color:#56b6c2">=</span><span style="color:#98c379">&#34;teacher.level&#34;</span>&gt;    
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4</span><span>    &lt;<span style="color:#e06c75">input</span> <span style="color:#e06c75">type</span><span style="color:#56b6c2">=</span><span style="color:#98c379">&#34;submit&#34;</span> <span style="color:#e06c75">value</span><span style="color:#56b6c2">=</span><span style="color:#98c379">&#34;submit&#34;</span>&gt;    
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5</span><span>&lt;/<span style="color:#e06c75">form</span>&gt;
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1</span><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">sysAction</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">ActionSupport</span><span style="color:#56b6c2">{</span>    
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2</span><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">User</span> <span style="color:#e06c75">user</span><span style="color:#56b6c2">;</span>    
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3</span><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">Teacher</span> <span style="color:#e06c75">teacher</span><span style="color:#56b6c2">;</span>    
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4</span><span>   
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5</span><span>    <span style="color:#c678dd">public</span> <span style="color:#e06c75">String</span> <span style="color:#61afef;font-weight:bold">login</span><span style="color:#56b6c2">()</span> <span style="color:#c678dd">throws</span> <span style="color:#e06c75">Exception</span> <span style="color:#56b6c2">{</span>    
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6</span><span>        <span style="color:#e06c75">System</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">out</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">println</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">user</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">getUsername</span><span style="color:#56b6c2">());</span>    
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7</span><span>        <span style="color:#e06c75">System</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">out</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">println</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">teacher</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">getLevel</span><span style="color:#56b6c2">());</span>    
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8</span><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">SUCCESS</span><span style="color:#56b6c2">;</span>    
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9</span><span>    <span style="color:#56b6c2">}</span>    
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10</span><span>   
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11</span><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">setUser</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">User</span> <span style="color:#e06c75">user</span><span style="color:#56b6c2">)</span> <span style="color:#56b6c2">{</span>    
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12</span><span>        <span style="color:#c678dd">this</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">user</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">user</span><span style="color:#56b6c2">;</span>    
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13</span><span>    <span style="color:#56b6c2">}</span>    
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14</span><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">setTeacher</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">Teacher</span> <span style="color:#e06c75">teacher</span><span style="color:#56b6c2">)</span> <span style="color:#56b6c2">{</span>    
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15</span><span>        <span style="color:#c678dd">this</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">teacher</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">teacher</span><span style="color:#56b6c2">;</span>    
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">16</span><span>    <span style="color:#56b6c2">}</span>    
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">17</span><span><span style="color:#56b6c2">}</span>
</span></span></code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="封装数据到集合">封装数据到集合</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="封装数据到list集合">封装数据到list集合</h3>
<ol>
<li>在action声明List</li>
<li>生成list变量的get和set方法</li>
<li>在表单输入项写表达式</li>
</ol>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="封装数据到map集合">封装数据到map集合</h3>
<ol>
<li>在action声明map集合</li>
<li>生成list变量的get和set方法</li>
<li>在表单输入项写表达式</li>
</ol>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1 id="struts2结果页面配置">struts2结果页面配置</h1>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="action的访问">action的访问</h2>
<ul>
<li>使用method方法</li>
<li>使用通配符实现<!-- raw HTML omitted -->
在action标签里面name属性，name属性值写符号 * ，表示匹配任何内容</li>
<li>动态访问</li>
</ul>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="结果页面配置">结果页面配置</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="全局结果页面">全局结果页面</h3>
<ol>
<li>如果多个action，方法里面返回相同值的时候，可以使用全局结果界面配置</li>
</ol>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="局部结果页面配置">局部结果页面配置</h3>
<ol>
<li>当存在全局结果页面配置时，依旧以局部结果页面配置为准</li>
</ol>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="result便签的type属性">result便签的type属性</h3>
<ol>
<li>type属性：如何到路径里</li>
<li>type属性值：</li>
</ol>
<ul>
<li>默认值：转发操作，值是dispatcher</li>
<li>重定向：redirect</li>
<li>chain：转发到action</li>
<li>redirectAction：重定向到action</li>
</ul>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="实例">实例</h3>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1</span><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2</span><span><span style="color:#7f848e">&lt;!DOCTYPE struts PUBLIC
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3</span><span><span style="color:#7f848e">        &#34;-//Apache Software Foundation//DTD Struts Configuration 2.3//EN&#34;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4</span><span><span style="color:#7f848e">        &#34;http://struts.apache.org/dtds/struts-2.3.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5</span><span><span style="color:#e06c75">&lt;struts&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6</span><span>    <span style="color:#e06c75">&lt;package</span> <span style="color:#e06c75">name=</span><span style="color:#98c379">&#34;demo1&#34;</span> <span style="color:#e06c75">extends=</span><span style="color:#98c379">&#34;struts-default&#34;</span> <span style="color:#e06c75">namespace=</span><span style="color:#98c379">&#34;/&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7</span><span>    <span style="color:#e06c75">&lt;action</span> <span style="color:#e06c75">name=</span><span style="color:#98c379">&#34;user_*&#34;</span> <span style="color:#e06c75">class=</span><span style="color:#98c379">&#34;userAction&#34;</span> <span style="color:#e06c75">method=</span><span style="color:#98c379">&#34;{1}&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8</span><span>        <span style="color:#7f848e">&lt;!-- &lt;result name=&#34;loginsuccess&#34;&gt;/index.jsp&lt;/result&gt; --&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9</span><span>        <span style="color:#e06c75">&lt;result</span> <span style="color:#e06c75">name=</span><span style="color:#98c379">&#34;loginsuccess&#34;</span> <span style="color:#e06c75">type=</span><span style="color:#98c379">&#34;redirectAction&#34;</span><span style="color:#e06c75">&gt;</span>story_indexlist<span style="color:#e06c75">&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10</span><span>        <span style="color:#e06c75">&lt;result</span> <span style="color:#e06c75">name=</span><span style="color:#98c379">&#34;login&#34;</span><span style="color:#e06c75">&gt;</span>/login.jsp<span style="color:#e06c75">&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11</span><span>         <span style="color:#e06c75">&lt;result</span> <span style="color:#e06c75">name=</span><span style="color:#98c379">&#34;logout&#34;</span> <span style="color:#e06c75">type=</span><span style="color:#98c379">&#34;redirectAction&#34;</span><span style="color:#e06c75">&gt;</span>story_indexlist<span style="color:#e06c75">&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12</span><span>        <span style="color:#e06c75">&lt;result</span> <span style="color:#e06c75">name=</span><span style="color:#98c379">&#34;registersuccess&#34;</span><span style="color:#e06c75">&gt;</span>/login.jsp<span style="color:#e06c75">&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13</span><span>        <span style="color:#e06c75">&lt;result</span> <span style="color:#e06c75">name=</span><span style="color:#98c379">&#34;usershow&#34;</span><span style="color:#e06c75">&gt;</span>/myinfo.jsp<span style="color:#e06c75">&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14</span><span>        <span style="color:#e06c75">&lt;result</span> <span style="color:#e06c75">name=</span><span style="color:#98c379">&#34;showUserinfo&#34;</span><span style="color:#e06c75">&gt;</span>/myinfoedit.jsp<span style="color:#e06c75">&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15</span><span>        <span style="color:#e06c75">&lt;result</span> <span style="color:#e06c75">name=</span><span style="color:#98c379">&#34;update&#34;</span> <span style="color:#e06c75">type=</span><span style="color:#98c379">&#34;redirectAction&#34;</span><span style="color:#e06c75">&gt;</span>story_indexlist<span style="color:#e06c75">&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">16</span><span>    <span style="color:#e06c75">&lt;/action&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">17</span><span>    <span style="color:#e06c75">&lt;action</span> <span style="color:#e06c75">name=</span><span style="color:#98c379">&#34;story_*&#34;</span> <span style="color:#e06c75">class=</span><span style="color:#98c379">&#34;storyAction&#34;</span> <span style="color:#e06c75">method=</span><span style="color:#98c379">&#34;{1}&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">18</span><span>        <span style="color:#e06c75">&lt;result</span> <span style="color:#e06c75">name=</span><span style="color:#98c379">&#34;toAddPage&#34;</span><span style="color:#e06c75">&gt;</span>/newstory.jsp<span style="color:#e06c75">&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">19</span><span>        <span style="color:#e06c75">&lt;result</span> <span style="color:#e06c75">name=</span><span style="color:#98c379">&#34;add&#34;</span> <span style="color:#e06c75">type=</span><span style="color:#98c379">&#34;redirectAction&#34;</span><span style="color:#e06c75">&gt;</span>story_indexlist<span style="color:#e06c75">&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">20</span><span>        <span style="color:#e06c75">&lt;result</span> <span style="color:#e06c75">name=</span><span style="color:#98c379">&#34;indexlist&#34;</span><span style="color:#e06c75">&gt;</span>/index.jsp<span style="color:#e06c75">&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">21</span><span>        <span style="color:#e06c75">&lt;result</span> <span style="color:#e06c75">name=</span><span style="color:#98c379">&#34;storyshow&#34;</span><span style="color:#e06c75">&gt;</span>/storyshow.jsp<span style="color:#e06c75">&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">22</span><span>        <span style="color:#e06c75">&lt;result</span> <span style="color:#e06c75">name=</span><span style="color:#98c379">&#34;getAllStory&#34;</span><span style="color:#e06c75">&gt;</span>/showbypage.jsp<span style="color:#e06c75">&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">23</span><span>        <span style="color:#e06c75">&lt;result</span> <span style="color:#e06c75">name=</span><span style="color:#98c379">&#34;addComment&#34;</span><span style="color:#e06c75">&gt;</span>/showbypage.jsp<span style="color:#e06c75">&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">24</span><span>    <span style="color:#e06c75">&lt;/action&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">25</span><span>        <span style="color:#e06c75">&lt;action</span> <span style="color:#e06c75">name=</span><span style="color:#98c379">&#34;comment_*&#34;</span> <span style="color:#e06c75">class=</span><span style="color:#98c379">&#34;commentAction&#34;</span> <span style="color:#e06c75">method=</span><span style="color:#98c379">&#34;{1}&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">26</span><span>            <span style="color:#e06c75">&lt;result</span> <span style="color:#e06c75">name=</span><span style="color:#98c379">&#34;add&#34;</span> <span style="color:#e06c75">type=</span><span style="color:#98c379">&#34;redirectAction&#34;</span><span style="color:#e06c75">&gt;</span>story_show?story_id=${comment.story.story_id}<span style="color:#e06c75">&lt;/result&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">27</span><span>        <span style="color:#e06c75">&lt;/action&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">28</span><span>    <span style="color:#e06c75">&lt;/package&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">29</span><span><span style="color:#e06c75">&lt;/struts&gt;</span>
</span></span></code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1 id="struts2中的重定向问题">struts2中的重定向问题</h1>
<p>在处理ssh框架的小论坛项目的时候，遇到一个问题，在一个帖子下需要进行评论，但是在点击评论按钮的时候，后台做出这几个动作：</p>
<ol>
<li>存储评论信息到数据库，也就是comment实体；</li>
<li>重新加载帖子详情和评论详情<!-- raw HTML omitted -->
要实现以上需求，可以通过struts的重定向功能来实现</li>
</ol>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="struts重定向的几种方式">struts重定向的几种方式</h2>
<ul>
<li>dispatcher —— 请求转发到一个页面 （默认）,不可以用这种方式转发到一个action</li>
<li>chain —— 一个action请求转发至另一个 action</li>
<li>redirect —— 响应重定向到一个页面，也可以实现响应重定向到action</li>
<li>redirectAction —— 一个action响应重定向至另一个 action</li>
</ul>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="struts重定向的实例">struts重定向的实例</h2>
<ul>
<li>redirectAction —— 一个action响应重定向至另一个 action，这种是不带参数的</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1</span><span><span style="color:#e06c75">&lt;result</span> <span style="color:#e06c75">name=</span><span style="color:#98c379">&#34;loginsuccess&#34;</span> <span style="color:#e06c75">type=</span><span style="color:#98c379">&#34;redirectAction&#34;</span><span style="color:#e06c75">&gt;</span>story_indexlist<span style="color:#e06c75">&lt;/result&gt;</span>
</span></span></code></pre></div><ul>
<li>带参数的redirectAction</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1</span><span><span style="color:#e06c75">&lt;result</span> <span style="color:#e06c75">type=</span><span style="color:#98c379">&#34;redirect&#34;</span><span style="color:#e06c75">&gt;</span>successAction?name=${name}<span style="color:#e06c75">&lt;/result&gt;</span>
</span></span></code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="我的问题解决">我的问题解决</h2>
<p>我的项目的重定向就需要参数，在重现加载帖子和评论的时候需要知道帖子的id，具体的解决方案如下</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1</span><span><span style="color:#e06c75">&lt;result</span> <span style="color:#e06c75">name=</span><span style="color:#98c379">&#34;add&#34;</span> <span style="color:#e06c75">type=</span><span style="color:#98c379">&#34;redirectAction&#34;</span><span style="color:#e06c75">&gt;</span>story_show?story_id=${comment.story.story_id}<span style="color:#e06c75">&lt;/result&gt;</span>
</span></span></code></pre></div><p>在comment的action中，重定向，并获取参数，这里可能有问题的就是参数的获取，这个参数的获取和action方法中的属性获取有关系，可能有以下的集中情况</p>
<ul>
<li>根据你的action获取表单数据方式的不同，${}里面的参数书写方式也不同，如果是属性，并有getter和setter方法，那么可以直接写属性值，如果是其他的方式获取，则要根据你的情况来设置</li>
<li>如果这个参数是实体内的实体对象，比如我需要的storyId，则是comment实体内的一个story对象，在这个story对象里具有storyId这个值，那么就需要使用上面的方式<code>${comment.story.story_id}</code>如果使用<code>${comment.story_id}</code>是会报错<!-- raw HTML omitted -->
我的comment Action如下</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1</span><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">cn.haigeek.action</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2</span><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">cn.haigeek.entity.Comment</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3</span><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">cn.haigeek.service.CommentService</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4</span><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">com.opensymphony.xwork2.ActionSupport</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5</span><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">java.util.Date</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6</span><span><span style="color:#7f848e">/**
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7</span><span><span style="color:#7f848e"> * Created by haigeek on 2017/7/22.
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8</span><span><span style="color:#7f848e"> */</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9</span><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">CommentAction</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">ActionSupport</span>  <span style="color:#56b6c2">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10</span><span>    <span style="color:#e06c75">Date</span> <span style="color:#e06c75">date</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">Date</span><span style="color:#56b6c2">();</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11</span><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">Comment</span> <span style="color:#e06c75">comment</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12</span><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">CommentService</span> <span style="color:#e06c75">commentService</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13</span><span>    <span style="color:#7f848e">//private Integer storyId;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14</span><span><span style="color:#7f848e"></span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">setCommentService</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">CommentService</span> <span style="color:#e06c75">commentService</span><span style="color:#56b6c2">)</span> <span style="color:#56b6c2">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15</span><span>        <span style="color:#c678dd">this</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">commentService</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">commentService</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">16</span><span>    <span style="color:#56b6c2">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">17</span><span>    <span style="color:#c678dd">public</span> <span style="color:#e06c75">Comment</span> <span style="color:#61afef;font-weight:bold">getComment</span><span style="color:#56b6c2">()</span> <span style="color:#56b6c2">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">18</span><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">comment</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">19</span><span>    <span style="color:#56b6c2">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">20</span><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">setComment</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">Comment</span> <span style="color:#e06c75">comment</span><span style="color:#56b6c2">)</span> <span style="color:#56b6c2">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">21</span><span>        <span style="color:#c678dd">this</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">comment</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">comment</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">22</span><span>    <span style="color:#56b6c2">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">23</span><span>    <span style="color:#c678dd">public</span> <span style="color:#e06c75">String</span> <span style="color:#61afef;font-weight:bold">add</span><span style="color:#56b6c2">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">24</span><span>        <span style="color:#e06c75">comment</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">setCommentDate</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">date</span><span style="color:#56b6c2">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">25</span><span>        <span style="color:#e06c75">commentService</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">add</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">comment</span><span style="color:#56b6c2">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">26</span><span>        <span style="color:#c678dd">return</span> <span style="color:#98c379">&#34;add&#34;</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">27</span><span>    <span style="color:#56b6c2">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">28</span><span><span style="color:#56b6c2">}</span>
</span></span></code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h1 id="struts2文件上传以上传头像为例">struts2文件上传（以上传头像为例）</h1>
<p>在java的ssh项目中，需要为注册的用户设置一个头像，具体解决方案如下</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="jsp视图层">jsp视图层</h2>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1</span><span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">form</span> <span style="color:#e06c75">action</span><span style="color:#56b6c2">=</span><span style="color:#98c379">&#34;${pageContext.request.contextPath }/user_updateavatar.action?user.usid=${user.uid}&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2</span><span>        <span style="color:#e06c75">method</span><span style="color:#56b6c2">=</span><span style="color:#e06c75">post</span> <span style="color:#e06c75">enctype</span><span style="color:#56b6c2">=</span><span style="color:#98c379">&#34;multipart/form-data&#34;</span><span style="color:#56b6c2">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3</span><span>    <span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">input</span> <span style="color:#e06c75">type</span><span style="color:#56b6c2">=</span><span style="color:#98c379">&#34;hidden&#34;</span> <span style="color:#e06c75">name</span><span style="color:#56b6c2">=</span><span style="color:#98c379">&#34;user.uid&#34;</span> <span style="color:#e06c75">value</span><span style="color:#56b6c2">=</span><span style="color:#98c379">&#34;${user.uid }&#34;</span><span style="color:#56b6c2">/&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4</span><span>    <span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">div</span> <span style="color:#e06c75">class</span><span style="color:#56b6c2">=</span><span style="color:#98c379">&#34;panel panel-default&#34;</span><span style="color:#56b6c2">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5</span><span>        <span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">div</span> <span style="color:#e06c75">class</span><span style="color:#56b6c2">=</span><span style="color:#98c379">&#34;panel-body&#34;</span><span style="color:#56b6c2">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6</span><span>            <span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">br</span><span style="color:#56b6c2">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7</span><span>            <span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">div</span> <span style="color:#e06c75">class</span><span style="color:#56b6c2">=</span><span style="color:#98c379">&#34;mdui-card-header-title&#34;</span><span style="color:#56b6c2">&gt;</span>头像上传<span style="color:#56b6c2">&lt;/</span><span style="color:#e06c75">div</span><span style="color:#56b6c2">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8</span><span>            <span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">div</span> <span style="color:#e06c75">class</span><span style="color:#56b6c2">=</span><span style="color:#98c379">&#34;mdui-container&#34;</span><span style="color:#56b6c2">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9</span><span>                <span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">input</span> <span style="color:#e06c75">type</span><span style="color:#56b6c2">=</span><span style="color:#98c379">&#34;file&#34;</span> <span style="color:#e06c75">name</span><span style="color:#56b6c2">=</span><span style="color:#98c379">&#34;avatar&#34;</span><span style="color:#56b6c2">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10</span><span>                <span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">button</span> <span style="color:#e06c75">class</span><span style="color:#56b6c2">=</span><span style="color:#98c379">&#34;mdui-btn mdui-btn-dense mdui-color-blue mdui-float-right mdui-m-a-2&#34;</span><span style="color:#56b6c2">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11</span><span>                    保存
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12</span><span>                <span style="color:#56b6c2">&lt;/</span><span style="color:#e06c75">button</span><span style="color:#56b6c2">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13</span><span>            <span style="color:#56b6c2">&lt;/</span><span style="color:#e06c75">div</span><span style="color:#56b6c2">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14</span><span>        <span style="color:#56b6c2">&lt;/</span><span style="color:#e06c75">div</span><span style="color:#56b6c2">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15</span><span>    <span style="color:#56b6c2">&lt;/</span><span style="color:#e06c75">div</span><span style="color:#56b6c2">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">16</span><span><span style="color:#56b6c2">&lt;/</span><span style="color:#e06c75">form</span><span style="color:#56b6c2">&gt;</span>
</span></span></code></pre></div><p>input类型要设置为type为File类型，name需要对应action中的命名</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="action层">action层</h2>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1</span><span><span style="color:#c678dd">private</span> <span style="color:#e06c75">File</span> <span style="color:#e06c75">avatar</span><span style="color:#56b6c2">;</span><span style="color:#7f848e">//上传文件域
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2</span><span><span style="color:#7f848e"></span><span style="color:#c678dd">private</span> <span style="color:#e06c75">String</span> <span style="color:#e06c75">avatatFileType</span><span style="color:#56b6c2">;</span><span style="color:#7f848e">//上传文件类型
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3</span><span><span style="color:#7f848e"></span><span style="color:#c678dd">private</span> <span style="color:#e06c75">String</span> <span style="color:#e06c75">avatarFileName</span><span style="color:#56b6c2">;</span><span style="color:#7f848e">//上传文件名字
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4</span><span><span style="color:#7f848e"></span><span style="color:#c678dd">private</span> <span style="color:#e06c75">String</span> <span style="color:#e06c75">savePathAvatar</span><span style="color:#56b6c2">;</span><span style="color:#7f848e">//文件存储位置，在struts2中配置
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5</span><span><span style="color:#7f848e">//对应的get和set方法
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6</span><span><span style="color:#7f848e"></span><span style="color:#c678dd">public</span> <span style="color:#e06c75">String</span> <span style="color:#61afef;font-weight:bold">updateavatar</span><span style="color:#56b6c2">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7</span><span>  <span style="color:#7f848e">//文件在本地的具体存储位置
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8</span><span><span style="color:#7f848e"></span>        <span style="color:#e06c75">String</span> <span style="color:#e06c75">path</span><span style="color:#56b6c2">=</span><span style="color:#e06c75">ServletActionContext</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">getServletContext</span><span style="color:#56b6c2">().</span><span style="color:#e06c75">getRealPath</span><span style="color:#56b6c2">(</span><span style="color:#98c379">&#34;/&#34;</span><span style="color:#56b6c2">)+</span><span style="color:#e06c75">getSavePathAvatar</span><span style="color:#56b6c2">()+</span><span style="color:#98c379">&#34;\\&#34;</span><span style="color:#56b6c2">+</span><span style="color:#e06c75">getAvatarFileName</span><span style="color:#56b6c2">();</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9</span><span>  <span style="color:#7f848e">//文件存储到数据库的路径（根据实际情况来设置）
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10</span><span><span style="color:#7f848e"></span>        <span style="color:#e06c75">String</span> <span style="color:#e06c75">path2</span><span style="color:#56b6c2">=</span><span style="color:#e06c75">getSavePathAvatar</span><span style="color:#56b6c2">()+</span><span style="color:#98c379">&#34;/&#34;</span><span style="color:#56b6c2">+</span><span style="color:#e06c75">getAvatarFileName</span><span style="color:#56b6c2">();</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11</span><span>        <span style="color:#c678dd">try</span><span style="color:#56b6c2">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12</span><span>            <span style="color:#e06c75">FileOutputStream</span> <span style="color:#e06c75">fos</span><span style="color:#56b6c2">=</span><span style="color:#c678dd">new</span> <span style="color:#e06c75">FileOutputStream</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">path</span><span style="color:#56b6c2">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13</span><span>            <span style="color:#e06c75">FileInputStream</span> <span style="color:#e06c75">fis</span><span style="color:#56b6c2">=</span><span style="color:#c678dd">new</span> <span style="color:#e06c75">FileInputStream</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">getAvatar</span><span style="color:#56b6c2">());</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14</span><span>            <span style="color:#e5c07b">byte</span><span style="color:#56b6c2">[]</span><span style="color:#e06c75">buffer</span><span style="color:#56b6c2">=</span><span style="color:#c678dd">new</span> <span style="color:#e5c07b">byte</span><span style="color:#56b6c2">[</span><span style="color:#d19a66">1024</span><span style="color:#56b6c2">];</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15</span><span>            <span style="color:#e5c07b">int</span> <span style="color:#e06c75">len</span><span style="color:#56b6c2">=</span><span style="color:#d19a66">0</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">16</span><span>            <span style="color:#c678dd">try</span> <span style="color:#56b6c2">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">17</span><span>                <span style="color:#c678dd">while</span> <span style="color:#56b6c2">((</span><span style="color:#e06c75">len</span><span style="color:#56b6c2">=</span><span style="color:#e06c75">fis</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">read</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">buffer</span><span style="color:#56b6c2">))&gt;</span><span style="color:#d19a66">0</span><span style="color:#56b6c2">){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">18</span><span>                    <span style="color:#e06c75">fos</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">write</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">buffer</span><span style="color:#56b6c2">,</span><span style="color:#d19a66">0</span><span style="color:#56b6c2">,</span><span style="color:#e06c75">len</span><span style="color:#56b6c2">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">19</span><span>                <span style="color:#56b6c2">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">20</span><span>            <span style="color:#56b6c2">}</span> <span style="color:#c678dd">catch</span> <span style="color:#56b6c2">(</span><span style="color:#e06c75">IOException</span> <span style="color:#e06c75">e</span><span style="color:#56b6c2">)</span> <span style="color:#56b6c2">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">21</span><span>                <span style="color:#e06c75">e</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">printStackTrace</span><span style="color:#56b6c2">();</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">22</span><span>            <span style="color:#56b6c2">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">23</span><span>        <span style="color:#56b6c2">}</span> <span style="color:#c678dd">catch</span> <span style="color:#56b6c2">(</span><span style="color:#e06c75">FileNotFoundException</span> <span style="color:#e06c75">e</span><span style="color:#56b6c2">)</span> <span style="color:#56b6c2">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">24</span><span>            <span style="color:#e06c75">e</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">printStackTrace</span><span style="color:#56b6c2">();</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">25</span><span>        <span style="color:#56b6c2">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">26</span><span>  <span style="color:#7f848e">//接受页面传过来的用户id
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">27</span><span><span style="color:#7f848e"></span>        <span style="color:#e5c07b">int</span> <span style="color:#e06c75">uid</span><span style="color:#56b6c2">=</span><span style="color:#e06c75">user</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">getUid</span><span style="color:#56b6c2">();</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">28</span><span>        <span style="color:#e06c75">User</span> <span style="color:#e06c75">user4</span><span style="color:#56b6c2">=</span><span style="color:#e06c75">userService</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">findOne</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">uid</span><span style="color:#56b6c2">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">29</span><span>        <span style="color:#e06c75">user4</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">setAvatar</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">path2</span><span style="color:#56b6c2">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">30</span><span>  <span style="color:#7f848e">//调用service进行路径的存储
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">31</span><span><span style="color:#7f848e"></span>        <span style="color:#e06c75">userService</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">update</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">user4</span><span style="color:#56b6c2">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">32</span><span>        <span style="color:#c678dd">return</span> <span style="color:#98c379">&#34;update&#34;</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">33</span><span>    <span style="color:#56b6c2">}</span>
</span></span></code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="strutsxml的配置">Struts.xml的配置</h2>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1</span><span><span style="color:#e06c75">&lt;action</span> <span style="color:#e06c75">name=</span><span style="color:#98c379">&#34;user_*&#34;</span> <span style="color:#e06c75">class=</span><span style="color:#98c379">&#34;userAction&#34;</span> <span style="color:#e06c75">method=</span><span style="color:#98c379">&#34;{1}&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2</span><span>  <span style="color:#7f848e">&lt;!-- 动态设置存储位置的值 --&gt;</span>  
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3</span><span><span style="color:#e06c75">&lt;param</span> <span style="color:#e06c75">name=</span><span style="color:#98c379">&#34;savePathAvatar&#34;</span><span style="color:#e06c75">&gt;</span>/upload/avatar<span style="color:#e06c75">&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4</span><span><span style="color:#e06c75">&lt;/action&gt;</span>
</span></span></code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="显示">显示</h2>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1</span><span><span style="color:#e06c75">&lt;img</span> <span style="color:#e06c75">src=</span><span style="color:#98c379">&#34;${story.user.avatar}&#34;</span><span style="color:#e06c75">/&gt;&lt;/div&gt;</span>
</span></span></code></pre></div><p>我的项目是显示这个story对应的用户的头像</p>
<h1 id="ssh框架实现分页显示">ssh框架实现分页显示</h1>
<h2 id="目的">目的</h2>
<p>最近在写的一个java小论坛的首页想要实现首页帖子列表的分页显示</p>
<h2 id="实现">实现</h2>
<h3 id="分页类">分页类</h3>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">  1</span><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">cn.haigeek.entity</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">  2</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">  3</span><span><span style="color:#7f848e">/**
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">  4</span><span><span style="color:#7f848e"> * Created by haigeek on 2017/7/16.
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">  5</span><span><span style="color:#7f848e"> */</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">  6</span><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">pageShow</span> <span style="color:#56b6c2">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">  7</span><span>    <span style="color:#7f848e">//此类用于分页
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">  8</span><span><span style="color:#7f848e"></span>    <span style="color:#c678dd">private</span> <span style="color:#e5c07b">int</span> <span style="color:#e06c75">pageNow</span><span style="color:#56b6c2">;</span><span style="color:#7f848e">//当前页
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">  9</span><span><span style="color:#7f848e"></span>    <span style="color:#c678dd">private</span> <span style="color:#e5c07b">int</span> <span style="color:#e06c75">totalSize</span><span style="color:#56b6c2">;</span><span style="color:#7f848e">//总条数
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 10</span><span><span style="color:#7f848e"></span>    <span style="color:#c678dd">private</span> <span style="color:#e5c07b">int</span> <span style="color:#e06c75">totalPage</span><span style="color:#56b6c2">;</span><span style="color:#7f848e">//总页数
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 11</span><span><span style="color:#7f848e"></span>    <span style="color:#c678dd">private</span> <span style="color:#e5c07b">int</span> <span style="color:#e06c75">pageSize</span> <span style="color:#56b6c2">=</span> <span style="color:#d19a66">10</span><span style="color:#56b6c2">;</span><span style="color:#7f848e">//每页显示条数
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 12</span><span><span style="color:#7f848e"></span>    <span style="color:#c678dd">private</span> <span style="color:#e5c07b">boolean</span> <span style="color:#e06c75">hasPre</span><span style="color:#56b6c2">;</span><span style="color:#7f848e">//是否有上一页
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 13</span><span><span style="color:#7f848e"></span>    <span style="color:#c678dd">private</span> <span style="color:#e5c07b">boolean</span> <span style="color:#e06c75">hasNext</span><span style="color:#56b6c2">;</span><span style="color:#7f848e">//是否有下一页
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 14</span><span><span style="color:#7f848e"></span>    <span style="color:#c678dd">private</span> <span style="color:#e5c07b">boolean</span> <span style="color:#e06c75">hasFirst</span><span style="color:#56b6c2">;</span><span style="color:#7f848e">//是否有首页
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 15</span><span><span style="color:#7f848e"></span>    <span style="color:#c678dd">private</span> <span style="color:#e5c07b">boolean</span> <span style="color:#e06c75">hasLast</span><span style="color:#56b6c2">;</span><span style="color:#7f848e">//是否有尾页
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 16</span><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 17</span><span>    <span style="color:#c678dd">public</span> <span style="color:#61afef;font-weight:bold">pageShow</span><span style="color:#56b6c2">(</span><span style="color:#e5c07b">int</span> <span style="color:#e06c75">pageNow</span><span style="color:#56b6c2">,</span> <span style="color:#e5c07b">int</span> <span style="color:#e06c75">totalSize</span><span style="color:#56b6c2">)</span> <span style="color:#56b6c2">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 18</span><span>        <span style="color:#7f848e">//构造方法
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 19</span><span><span style="color:#7f848e"></span>        <span style="color:#c678dd">this</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">setPageNow</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">pageNow</span><span style="color:#56b6c2">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 20</span><span>        <span style="color:#c678dd">this</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">setTotalSize</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">totalSize</span><span style="color:#56b6c2">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 21</span><span>    <span style="color:#56b6c2">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 22</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 23</span><span>    <span style="color:#c678dd">public</span> <span style="color:#61afef;font-weight:bold">pageShow</span><span style="color:#56b6c2">(</span><span style="color:#e5c07b">int</span> <span style="color:#e06c75">pageNow</span><span style="color:#56b6c2">,</span> <span style="color:#e5c07b">int</span> <span style="color:#e06c75">totalSize</span><span style="color:#56b6c2">,</span> <span style="color:#e5c07b">int</span> <span style="color:#e06c75">pageSize</span><span style="color:#56b6c2">)</span> <span style="color:#56b6c2">{</span><span style="color:#7f848e">//可动态改变每页条数
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 24</span><span><span style="color:#7f848e"></span>        <span style="color:#7f848e">//构造方法
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 25</span><span><span style="color:#7f848e"></span>        <span style="color:#c678dd">this</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">setPageNow</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">pageNow</span><span style="color:#56b6c2">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 26</span><span>        <span style="color:#c678dd">this</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">setTotalSize</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">totalSize</span><span style="color:#56b6c2">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 27</span><span>        <span style="color:#c678dd">this</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">pageSize</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">pageSize</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 28</span><span>    <span style="color:#56b6c2">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 29</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 30</span><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">setPageNow</span><span style="color:#56b6c2">(</span><span style="color:#e5c07b">int</span> <span style="color:#e06c75">pageNow</span><span style="color:#56b6c2">)</span> <span style="color:#56b6c2">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 31</span><span>        <span style="color:#c678dd">this</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">pageNow</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">pageNow</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 32</span><span>    <span style="color:#56b6c2">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 33</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 34</span><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">int</span> <span style="color:#61afef;font-weight:bold">getPageNow</span><span style="color:#56b6c2">()</span> <span style="color:#56b6c2">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 35</span><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">pageNow</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 36</span><span>    <span style="color:#56b6c2">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 37</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 38</span><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">setTotalSize</span><span style="color:#56b6c2">(</span><span style="color:#e5c07b">int</span> <span style="color:#e06c75">totalSize</span><span style="color:#56b6c2">)</span> <span style="color:#56b6c2">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 39</span><span>        <span style="color:#c678dd">this</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">totalSize</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">totalSize</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 40</span><span>    <span style="color:#56b6c2">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 41</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 42</span><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">int</span> <span style="color:#61afef;font-weight:bold">getTotalSize</span><span style="color:#56b6c2">()</span> <span style="color:#56b6c2">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 43</span><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">totalSize</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 44</span><span>    <span style="color:#56b6c2">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 45</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 46</span><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">setPageSize</span><span style="color:#56b6c2">(</span><span style="color:#e5c07b">int</span> <span style="color:#e06c75">pageSize</span><span style="color:#56b6c2">)</span> <span style="color:#56b6c2">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 47</span><span>        <span style="color:#c678dd">this</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">pageSize</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">pageSize</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 48</span><span>    <span style="color:#56b6c2">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 49</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 50</span><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">int</span> <span style="color:#61afef;font-weight:bold">getPageSize</span><span style="color:#56b6c2">()</span> <span style="color:#56b6c2">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 51</span><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">pageSize</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 52</span><span>    <span style="color:#56b6c2">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 53</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 54</span><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">int</span> <span style="color:#61afef;font-weight:bold">getTotalPage</span><span style="color:#56b6c2">()</span> <span style="color:#56b6c2">{</span><span style="color:#7f848e">//总页数 = 总条数/每页显示条数
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 55</span><span><span style="color:#7f848e"></span>        <span style="color:#e06c75">totalPage</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">this</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">getTotalSize</span><span style="color:#56b6c2">()</span> <span style="color:#56b6c2">/</span> <span style="color:#c678dd">this</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">getPageSize</span><span style="color:#56b6c2">();</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 56</span><span>        <span style="color:#c678dd">if</span> <span style="color:#56b6c2">(</span><span style="color:#c678dd">this</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">getTotalSize</span><span style="color:#56b6c2">()</span> <span style="color:#56b6c2">%</span> <span style="color:#c678dd">this</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">getPageSize</span><span style="color:#56b6c2">()</span> <span style="color:#56b6c2">!=</span> <span style="color:#d19a66">0</span><span style="color:#56b6c2">)</span> <span style="color:#56b6c2">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 57</span><span>            <span style="color:#e06c75">totalPage</span><span style="color:#56b6c2">++;</span> <span style="color:#7f848e">//若余数为不0 则要多加一页
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 58</span><span><span style="color:#7f848e"></span>        <span style="color:#56b6c2">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 59</span><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">totalPage</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 60</span><span>    <span style="color:#56b6c2">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 61</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 62</span><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">setTotalPage</span><span style="color:#56b6c2">(</span><span style="color:#e5c07b">int</span> <span style="color:#e06c75">totalPage</span><span style="color:#56b6c2">)</span> <span style="color:#56b6c2">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 63</span><span>        <span style="color:#c678dd">this</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">totalPage</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">totalPage</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 64</span><span>    <span style="color:#56b6c2">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 65</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 66</span><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">boolean</span> <span style="color:#61afef;font-weight:bold">isHasPre</span><span style="color:#56b6c2">()</span> <span style="color:#56b6c2">{</span><span style="color:#7f848e">//是否有上一页   除第一页以外都有上一页  说明有首页的就有上一页
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 67</span><span><span style="color:#7f848e"></span>        <span style="color:#c678dd">if</span> <span style="color:#56b6c2">(</span><span style="color:#c678dd">this</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">isHasFirst</span><span style="color:#56b6c2">())</span> <span style="color:#56b6c2">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 68</span><span>            <span style="color:#c678dd">return</span> <span style="color:#e5c07b">true</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 69</span><span>        <span style="color:#56b6c2">}</span> <span style="color:#c678dd">else</span> <span style="color:#c678dd">return</span> <span style="color:#e5c07b">false</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 70</span><span>    <span style="color:#56b6c2">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 71</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 72</span><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">setHasPre</span><span style="color:#56b6c2">(</span><span style="color:#e5c07b">boolean</span> <span style="color:#e06c75">hasPre</span><span style="color:#56b6c2">)</span> <span style="color:#56b6c2">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 73</span><span>        <span style="color:#c678dd">this</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">hasPre</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">hasPre</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 74</span><span>    <span style="color:#56b6c2">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 75</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 76</span><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">boolean</span> <span style="color:#61afef;font-weight:bold">isHasNext</span><span style="color:#56b6c2">()</span> <span style="color:#56b6c2">{</span><span style="color:#7f848e">//是否有下一页   除最后一页以外都有下一页  说明有尾页的就有下一页
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 77</span><span><span style="color:#7f848e"></span>        <span style="color:#c678dd">if</span> <span style="color:#56b6c2">(</span><span style="color:#c678dd">this</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">isHasLast</span><span style="color:#56b6c2">())</span> <span style="color:#56b6c2">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 78</span><span>            <span style="color:#c678dd">return</span> <span style="color:#e5c07b">true</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 79</span><span>        <span style="color:#56b6c2">}</span> <span style="color:#c678dd">else</span> <span style="color:#c678dd">return</span> <span style="color:#e5c07b">false</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 80</span><span>    <span style="color:#56b6c2">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 81</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 82</span><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">setHasNext</span><span style="color:#56b6c2">(</span><span style="color:#e5c07b">boolean</span> <span style="color:#e06c75">hasNext</span><span style="color:#56b6c2">)</span> <span style="color:#56b6c2">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 83</span><span>        <span style="color:#c678dd">this</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">hasNext</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">hasNext</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 84</span><span>    <span style="color:#56b6c2">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 85</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 86</span><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">boolean</span> <span style="color:#61afef;font-weight:bold">isHasFirst</span><span style="color:#56b6c2">()</span> <span style="color:#56b6c2">{</span><span style="color:#7f848e">//是否有首页 除第一页以外都有首页
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 87</span><span><span style="color:#7f848e"></span>        <span style="color:#c678dd">if</span> <span style="color:#56b6c2">(</span><span style="color:#c678dd">this</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">pageNow</span> <span style="color:#56b6c2">==</span> <span style="color:#d19a66">1</span><span style="color:#56b6c2">)</span><span style="color:#7f848e">//是第一页就没有首页
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 88</span><span><span style="color:#7f848e"></span>            <span style="color:#c678dd">return</span> <span style="color:#e5c07b">false</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 89</span><span>        <span style="color:#c678dd">else</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 90</span><span>            <span style="color:#c678dd">return</span> <span style="color:#e5c07b">true</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 91</span><span>    <span style="color:#56b6c2">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 92</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 93</span><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">setHasFirst</span><span style="color:#56b6c2">(</span><span style="color:#e5c07b">boolean</span> <span style="color:#e06c75">hasFirst</span><span style="color:#56b6c2">)</span> <span style="color:#56b6c2">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 94</span><span>        <span style="color:#c678dd">this</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">hasFirst</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">hasFirst</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 95</span><span>    <span style="color:#56b6c2">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 96</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 97</span><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">boolean</span> <span style="color:#61afef;font-weight:bold">isHasLast</span><span style="color:#56b6c2">()</span> <span style="color:#56b6c2">{</span><span style="color:#7f848e">//是否有尾页  除最后一页以外都有尾页
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 98</span><span><span style="color:#7f848e"></span>        <span style="color:#c678dd">if</span> <span style="color:#56b6c2">(</span><span style="color:#e06c75">pageNow</span> <span style="color:#56b6c2">==</span> <span style="color:#c678dd">this</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">getTotalPage</span><span style="color:#56b6c2">())</span> <span style="color:#56b6c2">{</span><span style="color:#7f848e">//最后一页
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 99</span><span><span style="color:#7f848e"></span>            <span style="color:#c678dd">return</span> <span style="color:#e5c07b">false</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">100</span><span>        <span style="color:#56b6c2">}</span> <span style="color:#c678dd">else</span> <span style="color:#c678dd">return</span> <span style="color:#e5c07b">true</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">101</span><span>    <span style="color:#56b6c2">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">102</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">103</span><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">setHasLast</span><span style="color:#56b6c2">(</span><span style="color:#e5c07b">boolean</span> <span style="color:#e06c75">hasLast</span><span style="color:#56b6c2">)</span> <span style="color:#56b6c2">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">104</span><span>        <span style="color:#c678dd">this</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">hasLast</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">hasLast</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">105</span><span>    <span style="color:#56b6c2">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">106</span><span><span style="color:#56b6c2">}</span>
</span></span></code></pre></div><h3 id="编写action">编写action</h3>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1</span><span><span style="color:#c678dd">public</span> <span style="color:#e06c75">String</span> <span style="color:#61afef;font-weight:bold">getAllStory</span><span style="color:#56b6c2">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2</span><span>		<span style="color:#e06c75">List</span> <span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">Story</span><span style="color:#56b6c2">&gt;</span><span style="color:#e06c75">StoryList</span><span style="color:#56b6c2">=</span><span style="color:#e06c75">storyService</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">getAllStory</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">pageNow</span><span style="color:#56b6c2">,</span><span style="color:#e06c75">pageSize</span><span style="color:#56b6c2">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3</span><span>  			<span style="color:#7f848e">//放进域对象
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4</span><span><span style="color:#7f848e"></span>			<span style="color:#e06c75">ServletActionContext</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">getRequest</span><span style="color:#56b6c2">().</span><span style="color:#e06c75">setAttribute</span><span style="color:#56b6c2">(</span><span style="color:#98c379">&#34;StoryList&#34;</span><span style="color:#56b6c2">,</span> <span style="color:#e06c75">StoryList</span><span style="color:#56b6c2">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5</span><span>  			<span style="color:#7f848e">//放入request对象
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6</span><span><span style="color:#7f848e"></span>			<span style="color:#e06c75">Map</span> <span style="color:#e06c75">request</span><span style="color:#56b6c2">=</span> <span style="color:#56b6c2">(</span><span style="color:#e06c75">Map</span><span style="color:#56b6c2">)</span> <span style="color:#e06c75">ActionContext</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">getContext</span><span style="color:#56b6c2">().</span><span style="color:#e06c75">get</span><span style="color:#56b6c2">(</span><span style="color:#98c379">&#34;request&#34;</span><span style="color:#56b6c2">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7</span><span>			<span style="color:#e06c75">pageShow</span> <span style="color:#e06c75">page</span><span style="color:#56b6c2">=</span><span style="color:#c678dd">new</span> <span style="color:#e06c75">pageShow</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">pageNow</span><span style="color:#56b6c2">,</span><span style="color:#e06c75">storyService</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">findStorySize</span><span style="color:#56b6c2">(),</span><span style="color:#e06c75">pageSize</span><span style="color:#56b6c2">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8</span><span>			<span style="color:#e06c75">request</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">put</span><span style="color:#56b6c2">(</span><span style="color:#98c379">&#34;page&#34;</span><span style="color:#56b6c2">,</span><span style="color:#e06c75">page</span><span style="color:#56b6c2">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9</span><span>			<span style="color:#c678dd">return</span> <span style="color:#98c379">&#34;getAllStory&#34;</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10</span><span>		<span style="color:#56b6c2">}</span>
</span></span></code></pre></div><h3 id="编写service层">编写service层</h3>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1</span><span>	<span style="color:#7f848e">//service层
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2</span><span><span style="color:#7f848e"></span><span style="color:#c678dd">public</span> <span style="color:#e06c75">List</span> <span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">Story</span><span style="color:#56b6c2">&gt;</span><span style="color:#e06c75">getAllStory</span><span style="color:#56b6c2">(</span><span style="color:#e5c07b">int</span> <span style="color:#e06c75">page</span><span style="color:#56b6c2">,</span><span style="color:#e5c07b">int</span> <span style="color:#e06c75">pageSize</span><span style="color:#56b6c2">){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3</span><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">storyDao</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">getAllStory</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">page</span><span style="color:#56b6c2">,</span><span style="color:#e06c75">pageSize</span><span style="color:#56b6c2">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4</span><span>    <span style="color:#56b6c2">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5</span><span>    <span style="color:#7f848e">//获取帖子数目
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6</span><span><span style="color:#7f848e"></span> <span style="color:#c678dd">public</span> <span style="color:#e5c07b">int</span> <span style="color:#61afef;font-weight:bold">findStorySize</span><span style="color:#56b6c2">(){</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7</span><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">storyDao</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">findStorySize</span><span style="color:#56b6c2">();</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">8</span><span>  	<span style="color:#56b6c2">}</span>
</span></span></code></pre></div><h3 id="dao接口层">Dao接口层</h3>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1</span><span>    <span style="color:#e5c07b">int</span> <span style="color:#61afef;font-weight:bold">findStorySize</span><span style="color:#56b6c2">();</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3</span><span>    <span style="color:#e06c75">List</span> <span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">Story</span><span style="color:#56b6c2">&gt;</span><span style="color:#e06c75">getAllStory</span><span style="color:#56b6c2">(</span><span style="color:#e5c07b">int</span> <span style="color:#e06c75">page</span><span style="color:#56b6c2">,</span> <span style="color:#e5c07b">int</span> <span style="color:#e06c75">pageSize</span><span style="color:#56b6c2">);</span>
</span></span></code></pre></div><h3 id="dao层的实现层">Dao层的实现层</h3>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1</span><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">StoryDaoImpl</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">HibernateDaoSupport</span> <span style="color:#c678dd">implements</span> <span style="color:#e06c75">StoryDao</span> <span style="color:#56b6c2">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2</span><span><span style="color:#c678dd">public</span> <span style="color:#e5c07b">int</span> <span style="color:#61afef;font-weight:bold">findStorySize</span><span style="color:#56b6c2">()</span> <span style="color:#56b6c2">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3</span><span>        <span style="color:#e06c75">Session</span> <span style="color:#e06c75">session</span><span style="color:#56b6c2">=</span><span style="color:#e06c75">getSessionFactory</span><span style="color:#56b6c2">().</span><span style="color:#e06c75">openSession</span><span style="color:#56b6c2">();</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4</span><span>        <span style="color:#e06c75">String</span> <span style="color:#e06c75">hql</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;from Story &#34;</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5</span><span>        <span style="color:#e5c07b">int</span> <span style="color:#e06c75">size</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">session</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">createQuery</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">hql</span><span style="color:#56b6c2">).</span><span style="color:#e06c75">list</span><span style="color:#56b6c2">().</span><span style="color:#e06c75">size</span><span style="color:#56b6c2">();</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6</span><span>        <span style="color:#e06c75">session</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">close</span><span style="color:#56b6c2">();</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7</span><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">size</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8</span><span>    <span style="color:#56b6c2">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9</span><span>    <span style="color:#c678dd">public</span> <span style="color:#e06c75">List</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">Story</span><span style="color:#56b6c2">&gt;</span> <span style="color:#61afef;font-weight:bold">getAllStory</span><span style="color:#56b6c2">(</span><span style="color:#e5c07b">int</span> <span style="color:#e06c75">pageNow</span><span style="color:#56b6c2">,</span> <span style="color:#e5c07b">int</span> <span style="color:#e06c75">pageSize</span><span style="color:#56b6c2">)</span> <span style="color:#56b6c2">{</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10</span><span>    <span style="color:#7f848e">//获取session的方式很重要，这里的dao层是继承了HibernateDaoSupport来实现dao接口
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11</span><span><span style="color:#7f848e"></span>        <span style="color:#e06c75">Session</span> <span style="color:#e06c75">session</span><span style="color:#56b6c2">=</span><span style="color:#c678dd">this</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">getHibernateTemplate</span><span style="color:#56b6c2">().</span><span style="color:#e06c75">getSessionFactory</span><span style="color:#56b6c2">().</span><span style="color:#e06c75">getCurrentSession</span><span style="color:#56b6c2">();</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12</span><span>        <span style="color:#e06c75">String</span> <span style="color:#e06c75">hql</span><span style="color:#56b6c2">=</span><span style="color:#98c379">&#34;from Story order by story_id desc &#34;</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13</span><span>        <span style="color:#e06c75">Query</span> <span style="color:#e06c75">query</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">session</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">createQuery</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">hql</span><span style="color:#56b6c2">);</span><span style="color:#7f848e">//执行查询操作
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14</span><span><span style="color:#7f848e"></span>        <span style="color:#e06c75">query</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">setFirstResult</span><span style="color:#56b6c2">((</span><span style="color:#e06c75">pageNow</span> <span style="color:#56b6c2">-</span> <span style="color:#d19a66">1</span><span style="color:#56b6c2">)</span> <span style="color:#56b6c2">*</span> <span style="color:#e06c75">pageSize</span><span style="color:#56b6c2">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15</span><span>        <span style="color:#e06c75">query</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">setMaxResults</span><span style="color:#56b6c2">(</span><span style="color:#e06c75">pageSize</span><span style="color:#56b6c2">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">16</span><span>        <span style="color:#e06c75">List</span> <span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">Story</span><span style="color:#56b6c2">&gt;</span> <span style="color:#e06c75">StoryList</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">query</span><span style="color:#56b6c2">.</span><span style="color:#e06c75">list</span><span style="color:#56b6c2">();</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">17</span><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">StoryList</span><span style="color:#56b6c2">;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">18</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">19</span><span>    <span style="color:#56b6c2">}</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">20</span><span> <span style="color:#56b6c2">}</span>
</span></span></code></pre></div><h3 id="视图层">视图层</h3>
<pre tabindex="0"><code>&lt;div class=&#34;panel-body&#34;&gt;
    &lt;c:forEach items=&#34;${StoryList }&#34; var=&#34;story&#34;&gt;
        &lt;ul class=&#34;mdui-list&#34;&gt;
            &lt;a href=&#34;${pageContext.request.contextPath }/story_show.action?story_id=${story.story_id}&#34;&gt;
                &lt;li class=&#34;mdui-list-item mdui-ripple&#34;&gt;
                    &lt;div class=&#34;mdui-list-item-avatar&#34;&gt;&lt;img src=&#34;avatar1.jpg&#34;/&gt;&lt;/div&gt;
                    &lt;div class=&#34;mdui-list-item-content&#34;&gt;
                        &lt;div class=&#34;mdui-list-item-title mdui-list-item-two-line&#34;&gt;${story.story_title}&lt;/div&gt;
                        &lt;div class=&#34;mdui-list-item-text mdui-list-item-one-line&#34;&gt; ${story.user.username}发表在说天谈地
                            最后回复：haigeek 2017.06.07
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/li&gt;
            &lt;/a&gt;
        &lt;/ul&gt;
    &lt;/c:forEach&gt;
    &lt;s:set name=&#34;page&#34; value=&#34;#request.page&#34;&gt;&lt;/s:set&gt;
    &lt;nav aria-label=&#34;Page navigation&#34;&gt;
        &lt;ul class=&#34;pagination center-block&#34;&gt;
            &lt;s:if test=&#34;#page.hasPre&#34;&gt;
            &lt;li&gt;
                &lt;a href=story_getAllStory?pageNow=&lt;s:property value=&#34;#page.pageNow-1&#34;/&gt;
                aria-label=&#34;Previous&#34;&gt;
                &lt;span aria-hidden=&#34;true&#34;&gt;&amp;laquo;&lt;/span&gt;
                &lt;/a&gt;
            &lt;/li&gt;
            &lt;/s:if&gt;
                &lt;s:if test=&#34;#page.hasFirst&#34;&gt;
                &lt;li&gt;
                    &lt;a href=&#34;story_getAllStory?pageNow=1&#34;
                        aria-label=&#34;Previous&#34;&gt;
                        &lt;span aria-hidden=&#34;true&#34;&gt;首页&lt;/span&gt;
                    &lt;/a&gt;
                &lt;/li&gt;
                &lt;/s:if&gt;

            &lt;li&gt;&lt;a href=&#34;story_getAllStory?pageNow=1&#34;&gt;1&lt;/a&gt;&lt;/li&gt;
            &lt;li&gt;&lt;a href=&#34;story_getAllStory?pageNow=2&#34;&gt;2&lt;/a&gt;&lt;/li&gt;
            &lt;li&gt;&lt;a href=&#34;story_getAllStory?pageNow=3&#34;&gt;3&lt;/a&gt;&lt;/li&gt;
            &lt;li&gt;&lt;a href=&#34;story_getAllStory?pageNow=4&#34;&gt;4&lt;/a&gt;&lt;/li&gt;
            &lt;li&gt;&lt;a href=&#34;story_getAllStory?pageNow=5&#34;&gt;5&lt;/a&gt;&lt;/li&gt;
            &lt;s:if test=&#34;#page.hasLast&#34;&gt;
            &lt;li&gt;
                &lt;a href=story_getAllStory?pageNow=&lt;s:property value=&#34;#page.totalPage&#34;/&gt;
                    aria-label=&#34;Previous&#34;&gt;
                    &lt;span aria-hidden=&#34;true&#34;&gt;尾页&lt;/span&gt;
                &lt;/a&gt;
            &lt;/li&gt;
            &lt;/s:if&gt;
            &lt;s:if test=&#34;#page.hasNext&#34;&gt;
            &lt;li&gt;
                &lt;a href=&#34;story_getAllStory?pageNow=&lt;s:property value=&#34;#page.pageNow+1&#34; /&gt; &#34;
                    aria-label=&#34;Next&#34;&gt;
                    &lt;span aria-hidden=&#34;true&#34;&gt;&amp;raquo;&lt;/span&gt;
                &lt;/a&gt;
            &lt;/li&gt;
            &lt;/s:if&gt;
        &lt;/ul&gt;

    &lt;/nav&gt;
&lt;/div&gt;
</code></pre><p>视图使用了一些样式（bootstrap等），主要是标签的使用，需要加入</p>
<pre tabindex="0"><code>&lt;%@ taglib prefix=&#34;c&#34; uri=&#34;http://java.sun.com/jsp/jstl/core&#34; %&gt;
&lt;%@ taglib uri=&#34;/struts-tags&#34; prefix=&#34;s&#34; %&gt;
</code></pre><h3 id="配置文件">配置文件</h3>
<p>配置struts.xml和spring配置文件即可，我的项目主要是添加功能，配置文件已经配置好，只贴了核心的代码，最后在struts.xml添加一项配置即可</p>
      
      <div class="post-date">
        <span class="g time">July 22, 2017 </span> &#8729;
         
         <a href="https://haigeek.me/tags/struts2/">struts2</a> 
      </div>
      
    </section>
    
    <div id="comments">
      <script src="https://utteranc.es/client.js"
    repo=ZgotmplZ
    issue-term="pathname"
    theme=ZgotmplZ
    crossorigin="anonymous"
    async>
</script>

    </div>
    
  </div>
</main>
</body>
</html>
